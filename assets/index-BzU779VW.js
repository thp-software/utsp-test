var fm=Object.defineProperty;var hm=(c,i,l)=>i in c?fm(c,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[i]=l;var U=(c,i,l)=>hm(c,typeof i!="symbol"?i+"":i,l);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function l(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=l(u);fetch(u.href,f)}})();var No={exports:{}},Hs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd;function dm(){if(rd)return Hs;rd=1;var c=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function l(a,u,f){var d=null;if(f!==void 0&&(d=""+f),u.key!==void 0&&(d=""+u.key),"key"in u){f={};for(var m in u)m!=="key"&&(f[m]=u[m])}else f=u;return u=f.ref,{$$typeof:c,type:a,key:d,ref:u!==void 0?u:null,props:f}}return Hs.Fragment=i,Hs.jsx=l,Hs.jsxs=l,Hs}var od;function gm(){return od||(od=1,No.exports=dm()),No.exports}var ln=gm(),Xo={exports:{}},qs={},Yo={exports:{}},Ho={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud;function mm(){return ud||(ud=1,(function(c){function i(D,H){var J=D.length;D.push(H);t:for(;0<J;){var St=J-1>>>1,At=D[St];if(0<u(At,H))D[St]=H,D[J]=At,J=St;else break t}}function l(D){return D.length===0?null:D[0]}function a(D){if(D.length===0)return null;var H=D[0],J=D.pop();if(J!==H){D[0]=J;t:for(var St=0,At=D.length,T=At>>>1;St<T;){var Y=2*(St+1)-1,q=D[Y],V=Y+1,et=D[V];if(0>u(q,J))V<At&&0>u(et,q)?(D[St]=et,D[V]=J,St=V):(D[St]=q,D[Y]=J,St=Y);else if(V<At&&0>u(et,J))D[St]=et,D[V]=J,St=V;else break t}}return H}function u(D,H){var J=D.sortIndex-H.sortIndex;return J!==0?J:D.id-H.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;c.unstable_now=function(){return f.now()}}else{var d=Date,m=d.now();c.unstable_now=function(){return d.now()-m}}var y=[],g=[],b=1,v=null,C=3,A=!1,z=!1,B=!1,X=!1,k=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function P(D){for(var H=l(g);H!==null;){if(H.callback===null)a(g);else if(H.startTime<=D)a(g),H.sortIndex=H.expirationTime,i(y,H);else break;H=l(g)}}function dt(D){if(B=!1,P(D),!z)if(l(y)!==null)z=!0,Mt||(Mt=!0,se());else{var H=l(g);H!==null&&De(dt,H.startTime-D)}}var Mt=!1,tt=-1,zt=5,Pt=-1;function Rt(){return X?!0:!(c.unstable_now()-Pt<zt)}function te(){if(X=!1,Mt){var D=c.unstable_now();Pt=D;var H=!0;try{t:{z=!1,B&&(B=!1,j(tt),tt=-1),A=!0;var J=C;try{e:{for(P(D),v=l(y);v!==null&&!(v.expirationTime>D&&Rt());){var St=v.callback;if(typeof St=="function"){v.callback=null,C=v.priorityLevel;var At=St(v.expirationTime<=D);if(D=c.unstable_now(),typeof At=="function"){v.callback=At,P(D),H=!0;break e}v===l(y)&&a(y),P(D)}else a(y);v=l(y)}if(v!==null)H=!0;else{var T=l(g);T!==null&&De(dt,T.startTime-D),H=!1}}break t}finally{v=null,C=J,A=!1}H=void 0}}finally{H?se():Mt=!1}}}var se;if(typeof F=="function")se=function(){F(te)};else if(typeof MessageChannel<"u"){var Yi=new MessageChannel,Qe=Yi.port2;Yi.port1.onmessage=te,se=function(){Qe.postMessage(null)}}else se=function(){k(te,0)};function De(D,H){tt=k(function(){D(c.unstable_now())},H)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(D){D.callback=null},c.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):zt=0<D?Math.floor(1e3/D):5},c.unstable_getCurrentPriorityLevel=function(){return C},c.unstable_next=function(D){switch(C){case 1:case 2:case 3:var H=3;break;default:H=C}var J=C;C=H;try{return D()}finally{C=J}},c.unstable_requestPaint=function(){X=!0},c.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=C;C=D;try{return H()}finally{C=J}},c.unstable_scheduleCallback=function(D,H,J){var St=c.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?St+J:St):J=St,D){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=J+At,D={id:b++,callback:H,priorityLevel:D,startTime:J,expirationTime:At,sortIndex:-1},J>St?(D.sortIndex=J,i(g,D),l(y)===null&&D===l(g)&&(B?(j(tt),tt=-1):B=!0,De(dt,J-St))):(D.sortIndex=At,i(y,D),z||A||(z=!0,Mt||(Mt=!0,se()))),D},c.unstable_shouldYield=Rt,c.unstable_wrapCallback=function(D){var H=C;return function(){var J=C;C=H;try{return D.apply(this,arguments)}finally{C=J}}}})(Ho)),Ho}var cd;function ym(){return cd||(cd=1,Yo.exports=mm()),Yo.exports}var qo={exports:{}},$={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd;function pm(){if(fd)return $;fd=1;var c=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),C=Symbol.iterator;function A(T){return T===null||typeof T!="object"?null:(T=C&&T[C]||T["@@iterator"],typeof T=="function"?T:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,X={};function k(T,Y,q){this.props=T,this.context=Y,this.refs=X,this.updater=q||z}k.prototype.isReactComponent={},k.prototype.setState=function(T,Y){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,Y,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function j(){}j.prototype=k.prototype;function F(T,Y,q){this.props=T,this.context=Y,this.refs=X,this.updater=q||z}var P=F.prototype=new j;P.constructor=F,B(P,k.prototype),P.isPureReactComponent=!0;var dt=Array.isArray;function Mt(){}var tt={H:null,A:null,T:null,S:null},zt=Object.prototype.hasOwnProperty;function Pt(T,Y,q){var V=q.ref;return{$$typeof:c,type:T,key:Y,ref:V!==void 0?V:null,props:q}}function Rt(T,Y){return Pt(T.type,Y,T.props)}function te(T){return typeof T=="object"&&T!==null&&T.$$typeof===c}function se(T){var Y={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(q){return Y[q]})}var Yi=/\/+/g;function Qe(T,Y){return typeof T=="object"&&T!==null&&T.key!=null?se(""+T.key):Y.toString(36)}function De(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Mt,Mt):(T.status="pending",T.then(function(Y){T.status==="pending"&&(T.status="fulfilled",T.value=Y)},function(Y){T.status==="pending"&&(T.status="rejected",T.reason=Y)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function D(T,Y,q,V,et){var at=typeof T;(at==="undefined"||at==="boolean")&&(T=null);var pt=!1;if(T===null)pt=!0;else switch(at){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(T.$$typeof){case c:case i:pt=!0;break;case b:return pt=T._init,D(pt(T._payload),Y,q,V,et)}}if(pt)return et=et(T),pt=V===""?"."+Qe(T,0):V,dt(et)?(q="",pt!=null&&(q=pt.replace(Yi,"$&/")+"/"),D(et,Y,q,"",function(Qn){return Qn})):et!=null&&(te(et)&&(et=Rt(et,q+(et.key==null||T&&T.key===et.key?"":(""+et.key).replace(Yi,"$&/")+"/")+pt)),Y.push(et)),1;pt=0;var ee=V===""?".":V+":";if(dt(T))for(var Dt=0;Dt<T.length;Dt++)V=T[Dt],at=ee+Qe(V,Dt),pt+=D(V,Y,q,at,et);else if(Dt=A(T),typeof Dt=="function")for(T=Dt.call(T),Dt=0;!(V=T.next()).done;)V=V.value,at=ee+Qe(V,Dt++),pt+=D(V,Y,q,at,et);else if(at==="object"){if(typeof T.then=="function")return D(De(T),Y,q,V,et);throw Y=String(T),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return pt}function H(T,Y,q){if(T==null)return T;var V=[],et=0;return D(T,V,"","",function(at){return Y.call(q,at,et++)}),V}function J(T){if(T._status===-1){var Y=T._result;Y=Y(),Y.then(function(q){(T._status===0||T._status===-1)&&(T._status=1,T._result=q)},function(q){(T._status===0||T._status===-1)&&(T._status=2,T._result=q)}),T._status===-1&&(T._status=0,T._result=Y)}if(T._status===1)return T._result.default;throw T._result}var St=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},At={map:H,forEach:function(T,Y,q){H(T,function(){Y.apply(this,arguments)},q)},count:function(T){var Y=0;return H(T,function(){Y++}),Y},toArray:function(T){return H(T,function(Y){return Y})||[]},only:function(T){if(!te(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return $.Activity=v,$.Children=At,$.Component=k,$.Fragment=l,$.Profiler=u,$.PureComponent=F,$.StrictMode=a,$.Suspense=y,$.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tt,$.__COMPILER_RUNTIME={__proto__:null,c:function(T){return tt.H.useMemoCache(T)}},$.cache=function(T){return function(){return T.apply(null,arguments)}},$.cacheSignal=function(){return null},$.cloneElement=function(T,Y,q){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var V=B({},T.props),et=T.key;if(Y!=null)for(at in Y.key!==void 0&&(et=""+Y.key),Y)!zt.call(Y,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&Y.ref===void 0||(V[at]=Y[at]);var at=arguments.length-2;if(at===1)V.children=q;else if(1<at){for(var pt=Array(at),ee=0;ee<at;ee++)pt[ee]=arguments[ee+2];V.children=pt}return Pt(T.type,et,V)},$.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:f,_context:T},T},$.createElement=function(T,Y,q){var V,et={},at=null;if(Y!=null)for(V in Y.key!==void 0&&(at=""+Y.key),Y)zt.call(Y,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(et[V]=Y[V]);var pt=arguments.length-2;if(pt===1)et.children=q;else if(1<pt){for(var ee=Array(pt),Dt=0;Dt<pt;Dt++)ee[Dt]=arguments[Dt+2];et.children=ee}if(T&&T.defaultProps)for(V in pt=T.defaultProps,pt)et[V]===void 0&&(et[V]=pt[V]);return Pt(T,at,et)},$.createRef=function(){return{current:null}},$.forwardRef=function(T){return{$$typeof:m,render:T}},$.isValidElement=te,$.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:J}},$.memo=function(T,Y){return{$$typeof:g,type:T,compare:Y===void 0?null:Y}},$.startTransition=function(T){var Y=tt.T,q={};tt.T=q;try{var V=T(),et=tt.S;et!==null&&et(q,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(Mt,St)}catch(at){St(at)}finally{Y!==null&&q.types!==null&&(Y.types=q.types),tt.T=Y}},$.unstable_useCacheRefresh=function(){return tt.H.useCacheRefresh()},$.use=function(T){return tt.H.use(T)},$.useActionState=function(T,Y,q){return tt.H.useActionState(T,Y,q)},$.useCallback=function(T,Y){return tt.H.useCallback(T,Y)},$.useContext=function(T){return tt.H.useContext(T)},$.useDebugValue=function(){},$.useDeferredValue=function(T,Y){return tt.H.useDeferredValue(T,Y)},$.useEffect=function(T,Y){return tt.H.useEffect(T,Y)},$.useEffectEvent=function(T){return tt.H.useEffectEvent(T)},$.useId=function(){return tt.H.useId()},$.useImperativeHandle=function(T,Y,q){return tt.H.useImperativeHandle(T,Y,q)},$.useInsertionEffect=function(T,Y){return tt.H.useInsertionEffect(T,Y)},$.useLayoutEffect=function(T,Y){return tt.H.useLayoutEffect(T,Y)},$.useMemo=function(T,Y){return tt.H.useMemo(T,Y)},$.useOptimistic=function(T,Y){return tt.H.useOptimistic(T,Y)},$.useReducer=function(T,Y,q){return tt.H.useReducer(T,Y,q)},$.useRef=function(T){return tt.H.useRef(T)},$.useState=function(T){return tt.H.useState(T)},$.useSyncExternalStore=function(T,Y,q){return tt.H.useSyncExternalStore(T,Y,q)},$.useTransition=function(){return tt.H.useTransition()},$.version="19.2.0",$}var hd;function Po(){return hd||(hd=1,qo.exports=pm()),qo.exports}var ko={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd;function vm(){if(dd)return Wt;dd=1;var c=Po();function i(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var a={d:{f:l,r:function(){throw Error(i(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(y,g,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:v==null?null:""+v,children:y,containerInfo:g,implementation:b}}var d=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Wt.createPortal=function(y,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(i(299));return f(y,g,null,b)},Wt.flushSync=function(y){var g=d.T,b=a.p;try{if(d.T=null,a.p=2,y)return y()}finally{d.T=g,a.p=b,a.d.f()}},Wt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(y,g))},Wt.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},Wt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var b=g.as,v=m(b,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?a.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:C,fetchPriority:A}):b==="script"&&a.d.X(y,{crossOrigin:v,integrity:C,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Wt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);a.d.M(y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(y)},Wt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,v=m(b,g.crossOrigin);a.d.L(y,b,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Wt.preloadModule=function(y,g){if(typeof y=="string")if(g){var b=m(g.as,g.crossOrigin);a.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(y)},Wt.requestFormReset=function(y){a.d.r(y)},Wt.unstable_batchedUpdates=function(y,g){return y(g)},Wt.useFormState=function(y,g,b){return d.H.useFormState(y,g,b)},Wt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Wt.version="19.2.0",Wt}var gd;function bm(){if(gd)return ko.exports;gd=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(i){console.error(i)}}return c(),ko.exports=vm(),ko.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md;function Sm(){if(md)return qs;md=1;var c=ym(),i=Po(),l=bm();function a(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function d(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y(t){if(f(t)!==t)throw Error(a(188))}function g(t){var e=t.alternate;if(!e){if(e=f(t),e===null)throw Error(a(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return y(r),t;if(o===s)return y(r),e;o=o.sibling}throw Error(a(188))}if(n.return!==s.return)n=r,s=o;else{for(var h=!1,p=r.child;p;){if(p===n){h=!0,n=r,s=o;break}if(p===s){h=!0,s=r,n=o;break}p=p.sibling}if(!h){for(p=o.child;p;){if(p===n){h=!0,n=o,s=r;break}if(p===s){h=!0,s=o,n=r;break}p=p.sibling}if(!h)throw Error(a(189))}}if(n.alternate!==s)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?t:e}function b(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=b(t),e!==null)return e;t=t.sibling}return null}var v=Object.assign,C=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),F=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),Mt=Symbol.for("react.suspense_list"),tt=Symbol.for("react.memo"),zt=Symbol.for("react.lazy"),Pt=Symbol.for("react.activity"),Rt=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var Yi=Symbol.for("react.client.reference");function Qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Yi?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case k:return"Profiler";case X:return"StrictMode";case dt:return"Suspense";case Mt:return"SuspenseList";case Pt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case F:return t.displayName||"Context";case j:return(t._context.displayName||"Context")+".Consumer";case P:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tt:return e=t.displayName||null,e!==null?e:Qe(t.type)||"Memo";case zt:e=t._payload,t=t._init;try{return Qe(t(e))}catch{}}return null}var De=Array.isArray,D=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},St=[],At=-1;function T(t){return{current:t}}function Y(t){0>At||(t.current=St[At],St[At]=null,At--)}function q(t,e){At++,St[At]=t.current,t.current=e}var V=T(null),et=T(null),at=T(null),pt=T(null);function ee(t,e){switch(q(at,e),q(et,t),q(V,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Rh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Rh(e),t=Mh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(V),q(V,t)}function Dt(){Y(V),Y(et),Y(at)}function Qn(t){t.memoizedState!==null&&q(pt,t);var e=V.current,n=Mh(e,t.type);e!==n&&(q(et,t),q(V,n))}function Gs(t){et.current===t&&(Y(V),Y(et)),pt.current===t&&(Y(pt),Ls._currentValue=J)}var pa,lu;function Hi(t){if(pa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pa=e&&e[1]||"",lu=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pa+t+lu}var va=!1;function ba(t,e){if(!t||va)return"";va=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var N=function(){throw Error()};if(Object.defineProperty(N.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(N,[])}catch(M){var R=M}Reflect.construct(t,[],N)}else{try{N.call()}catch(M){R=M}t.call(N.prototype)}}else{try{throw Error()}catch(M){R=M}(N=t())&&typeof N.catch=="function"&&N.catch(function(){})}}catch(M){if(M&&R&&typeof M.stack=="string")return[M.stack,R.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),h=o[0],p=o[1];if(h&&p){var S=h.split(`
`),_=p.split(`
`);for(r=s=0;s<S.length&&!S[s].includes("DetermineComponentFrameRoot");)s++;for(;r<_.length&&!_[r].includes("DetermineComponentFrameRoot");)r++;if(s===S.length||r===_.length)for(s=S.length-1,r=_.length-1;1<=s&&0<=r&&S[s]!==_[r];)r--;for(;1<=s&&0<=r;s--,r--)if(S[s]!==_[r]){if(s!==1||r!==1)do if(s--,r--,0>r||S[s]!==_[r]){var O=`
`+S[s].replace(" at new "," at ");return t.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",t.displayName)),O}while(1<=s&&0<=r);break}}}finally{va=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Hi(n):""}function Fd(t,e){switch(t.tag){case 26:case 27:case 5:return Hi(t.type);case 16:return Hi("Lazy");case 13:return t.child!==e&&e!==null?Hi("Suspense Fallback"):Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return ba(t.type,!1);case 11:return ba(t.type.render,!1);case 1:return ba(t.type,!0);case 31:return Hi("Activity");default:return""}}function au(t){try{var e="",n=null;do e+=Fd(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Sa=Object.prototype.hasOwnProperty,Ca=c.unstable_scheduleCallback,Ea=c.unstable_cancelCallback,Gd=c.unstable_shouldYield,Vd=c.unstable_requestPaint,he=c.unstable_now,Zd=c.unstable_getCurrentPriorityLevel,ru=c.unstable_ImmediatePriority,ou=c.unstable_UserBlockingPriority,Vs=c.unstable_NormalPriority,Qd=c.unstable_LowPriority,uu=c.unstable_IdlePriority,jd=c.log,Id=c.unstable_setDisableYieldValue,jn=null,de=null;function hi(t){if(typeof jd=="function"&&Id(t),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(jn,t)}catch{}}var ge=Math.clz32?Math.clz32:Kd,Jd=Math.log,Wd=Math.LN2;function Kd(t){return t>>>=0,t===0?32:31-(Jd(t)/Wd|0)|0}var Zs=256,Qs=262144,js=4194304;function qi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Is(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,o=t.suspendedLanes,h=t.pingedLanes;t=t.warmLanes;var p=s&134217727;return p!==0?(s=p&~o,s!==0?r=qi(s):(h&=p,h!==0?r=qi(h):n||(n=p&~t,n!==0&&(r=qi(n))))):(p=s&~o,p!==0?r=qi(p):h!==0?r=qi(h):n||(n=s&~t,n!==0&&(r=qi(n)))),r===0?0:e!==0&&e!==r&&(e&o)===0&&(o=r&-r,n=e&-e,o>=n||o===32&&(n&4194048)!==0)?e:r}function In(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function $d(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cu(){var t=js;return js<<=1,(js&62914560)===0&&(js=4194304),t}function Ta(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jn(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pd(t,e,n,s,r,o){var h=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var p=t.entanglements,S=t.expirationTimes,_=t.hiddenUpdates;for(n=h&~n;0<n;){var O=31-ge(n),N=1<<O;p[O]=0,S[O]=-1;var R=_[O];if(R!==null)for(_[O]=null,O=0;O<R.length;O++){var M=R[O];M!==null&&(M.lane&=-536870913)}n&=~N}s!==0&&fu(t,s,0),o!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=o&~(h&~e))}function fu(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-ge(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function hu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-ge(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}function du(t,e){var n=e&-e;return n=(n&42)!==0?1:Aa(n),(n&(t.suspendedLanes|e))!==0?0:n}function Aa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function wa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function gu(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:td(t.type))}function mu(t,e){var n=H.p;try{return H.p=t,e()}finally{H.p=n}}var di=Math.random().toString(36).slice(2),Zt="__reactFiber$"+di,le="__reactProps$"+di,an="__reactContainer$"+di,Ua="__reactEvents$"+di,tg="__reactListeners$"+di,eg="__reactHandles$"+di,yu="__reactResources$"+di,Wn="__reactMarker$"+di;function xa(t){delete t[Zt],delete t[le],delete t[Ua],delete t[tg],delete t[eg]}function rn(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[an]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yh(t);t!==null;){if(n=t[Zt])return n;t=Yh(t)}return e}t=n,n=t.parentNode}return null}function on(t){if(t=t[Zt]||t[an]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Kn(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(a(33))}function un(t){var e=t[yu];return e||(e=t[yu]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Gt(t){t[Wn]=!0}var pu=new Set,vu={};function ki(t,e){cn(t,e),cn(t+"Capture",e)}function cn(t,e){for(vu[t]=e,t=0;t<e.length;t++)pu.add(e[t])}var ig=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},Su={};function ng(t){return Sa.call(Su,t)?!0:Sa.call(bu,t)?!1:ig.test(t)?Su[t]=!0:(bu[t]=!0,!1)}function Js(t,e,n){if(ng(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ws(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function je(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Ee(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sg(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,o=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(h){n=""+h,o.call(this,h)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){if(!t._valueTracker){var e=Cu(t)?"checked":"value";t._valueTracker=sg(t,e,""+t[e])}}function Eu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Cu(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var lg=/[\n"\\]/g;function Te(t){return t.replace(lg,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function za(t,e,n,s,r,o,h,p){t.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?t.type=h:t.removeAttribute("type"),e!=null?h==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ee(e)):t.value!==""+Ee(e)&&(t.value=""+Ee(e)):h!=="submit"&&h!=="reset"||t.removeAttribute("value"),e!=null?Ra(t,h,Ee(e)):n!=null?Ra(t,h,Ee(n)):s!=null&&t.removeAttribute("value"),r==null&&o!=null&&(t.defaultChecked=!!o),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?t.name=""+Ee(p):t.removeAttribute("name")}function Tu(t,e,n,s,r,o,h,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.type=o),e!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||e!=null)){_a(t);return}n=n!=null?""+Ee(n):"",e=e!=null?""+Ee(e):n,p||e===t.value||(t.value=e),t.defaultValue=e}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=p?t.checked:!!s,t.defaultChecked=!!s,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.name=h),_a(t)}function Ra(t,e,n){e==="number"&&Ks(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function fn(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Ee(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Au(t,e,n){if(e!=null&&(e=""+Ee(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Ee(n):""}function wu(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(a(92));if(De(s)){if(1<s.length)throw Error(a(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Ee(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),_a(t)}function hn(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ag=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uu(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||ag.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function xu(t,e,n){if(e!=null&&typeof e!="object")throw Error(a(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&n[r]!==s&&Uu(t,r,s)}else for(var o in e)e.hasOwnProperty(o)&&Uu(t,o,e[o])}function Ma(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),og=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $s(t){return og.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ie(){}var Ba=null;function Oa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dn=null,gn=null;function _u(t){var e=on(t);if(e&&(t=e.stateNode)){var n=t[le]||null;t:switch(t=e.stateNode,e.type){case"input":if(za(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Te(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=s[le]||null;if(!r)throw Error(a(90));za(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&Eu(s)}break t;case"textarea":Au(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&fn(t,!!n.multiple,e,!1)}}}var Da=!1;function zu(t,e,n){if(Da)return t(e,n);Da=!0;try{var s=t(e);return s}finally{if(Da=!1,(dn!==null||gn!==null)&&(Hl(),dn&&(e=dn,t=gn,gn=dn=null,_u(e),t)))for(e=0;e<t.length;e++)_u(t[e])}}function $n(t,e){var n=t.stateNode;if(n===null)return null;var s=n[le]||null;if(s===null)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(a(231,e,typeof n));return n}var Je=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=!1;if(Je)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){La=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{La=!1}var gi=null,Na=null,Ps=null;function Ru(){if(Ps)return Ps;var t,e=Na,n=e.length,s,r="value"in gi?gi.value:gi.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var h=n-t;for(s=1;s<=h&&e[n-s]===r[o-s];s++);return Ps=r.slice(t,1<s?1-s:void 0)}function tl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function el(){return!0}function Mu(){return!1}function ae(t){function e(n,s,r,o,h){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=h,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?el:Mu,this.isPropagationStopped=Mu,this}return v(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},il=ae(Fi),ts=v({},Fi,{view:0,detail:0}),ug=ae(ts),Xa,Ya,es,nl=v({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==es&&(es&&t.type==="mousemove"?(Xa=t.screenX-es.screenX,Ya=t.screenY-es.screenY):Ya=Xa=0,es=t),Xa)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),Bu=ae(nl),cg=v({},nl,{dataTransfer:0}),fg=ae(cg),hg=v({},ts,{relatedTarget:0}),Ha=ae(hg),dg=v({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=ae(dg),mg=v({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yg=ae(mg),pg=v({},Fi,{data:0}),Ou=ae(pg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sg[t])?!!e[t]:!1}function qa(){return Cg}var Eg=v({},ts,{key:function(t){if(t.key){var e=vg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(t){return t.type==="keypress"?tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tg=ae(Eg),Ag=v({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Du=ae(Ag),wg=v({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),Ug=ae(wg),xg=v({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_g=ae(xg),zg=v({},nl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rg=ae(zg),Mg=v({},Fi,{newState:0,oldState:0}),Bg=ae(Mg),Og=[9,13,27,32],ka=Je&&"CompositionEvent"in window,is=null;Je&&"documentMode"in document&&(is=document.documentMode);var Dg=Je&&"TextEvent"in window&&!is,Lu=Je&&(!ka||is&&8<is&&11>=is),Nu=" ",Xu=!1;function Yu(t,e){switch(t){case"keyup":return Og.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mn=!1;function Lg(t,e){switch(t){case"compositionend":return Hu(e);case"keypress":return e.which!==32?null:(Xu=!0,Nu);case"textInput":return t=e.data,t===Nu&&Xu?null:t;default:return null}}function Ng(t,e){if(mn)return t==="compositionend"||!ka&&Yu(t,e)?(t=Ru(),Ps=Na=gi=null,mn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lu&&e.locale!=="ko"?null:e.data;default:return null}}var Xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Xg[t.type]:e==="textarea"}function ku(t,e,n,s){dn?gn?gn.push(s):gn=[s]:dn=s,e=Ql(e,"onChange"),0<e.length&&(n=new il("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ns=null,ss=null;function Yg(t){Ah(t,0)}function sl(t){var e=Kn(t);if(Eu(e))return t}function Fu(t,e){if(t==="change")return e}var Gu=!1;if(Je){var Fa;if(Je){var Ga="oninput"in document;if(!Ga){var Vu=document.createElement("div");Vu.setAttribute("oninput","return;"),Ga=typeof Vu.oninput=="function"}Fa=Ga}else Fa=!1;Gu=Fa&&(!document.documentMode||9<document.documentMode)}function Zu(){ns&&(ns.detachEvent("onpropertychange",Qu),ss=ns=null)}function Qu(t){if(t.propertyName==="value"&&sl(ss)){var e=[];ku(e,ss,t,Oa(t)),zu(Yg,e)}}function Hg(t,e,n){t==="focusin"?(Zu(),ns=e,ss=n,ns.attachEvent("onpropertychange",Qu)):t==="focusout"&&Zu()}function qg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sl(ss)}function kg(t,e){if(t==="click")return sl(e)}function Fg(t,e){if(t==="input"||t==="change")return sl(e)}function Gg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var me=typeof Object.is=="function"?Object.is:Gg;function ls(t,e){if(me(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Sa.call(e,r)||!me(t[r],e[r]))return!1}return!0}function ju(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Iu(t,e){var n=ju(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=ju(n)}}function Ju(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ju(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wu(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Ks(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ks(t.document)}return e}function Va(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Vg=Je&&"documentMode"in document&&11>=document.documentMode,yn=null,Za=null,as=null,Qa=!1;function Ku(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qa||yn==null||yn!==Ks(s)||(s=yn,"selectionStart"in s&&Va(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),as&&ls(as,s)||(as=s,s=Ql(Za,"onSelect"),0<s.length&&(e=new il("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=yn)))}function Gi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pn={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},ja={},$u={};Je&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);function Vi(t){if(ja[t])return ja[t];if(!pn[t])return t;var e=pn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $u)return ja[t]=e[n];return t}var Pu=Vi("animationend"),tc=Vi("animationiteration"),ec=Vi("animationstart"),Zg=Vi("transitionrun"),Qg=Vi("transitionstart"),jg=Vi("transitioncancel"),ic=Vi("transitionend"),nc=new Map,Ia="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ia.push("scrollEnd");function Le(t,e){nc.set(t,e),ki(e,[t])}var ll=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ae=[],vn=0,Ja=0;function al(){for(var t=vn,e=Ja=vn=0;e<t;){var n=Ae[e];Ae[e++]=null;var s=Ae[e];Ae[e++]=null;var r=Ae[e];Ae[e++]=null;var o=Ae[e];if(Ae[e++]=null,s!==null&&r!==null){var h=s.pending;h===null?r.next=r:(r.next=h.next,h.next=r),s.pending=r}o!==0&&sc(n,r,o)}}function rl(t,e,n,s){Ae[vn++]=t,Ae[vn++]=e,Ae[vn++]=n,Ae[vn++]=s,Ja|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Wa(t,e,n,s){return rl(t,e,n,s),ol(t)}function Zi(t,e){return rl(t,null,null,e),ol(t)}function sc(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var r=!1,o=t.return;o!==null;)o.childLanes|=n,s=o.alternate,s!==null&&(s.childLanes|=n),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(r=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,r&&e!==null&&(r=31-ge(n),t=o.hiddenUpdates,s=t[r],s===null?t[r]=[e]:s.push(e),e.lane=n|536870912),o):null}function ol(t){if(50<_s)throw _s=0,lo=null,Error(a(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var bn={};function Ig(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ye(t,e,n,s){return new Ig(t,e,n,s)}function Ka(t){return t=t.prototype,!(!t||!t.isReactComponent)}function We(t,e){var n=t.alternate;return n===null?(n=ye(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function lc(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ul(t,e,n,s,r,o){var h=0;if(s=t,typeof t=="function")Ka(t)&&(h=1);else if(typeof t=="string")h=P0(t,n,V.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case Pt:return t=ye(31,n,e,r),t.elementType=Pt,t.lanes=o,t;case B:return Qi(n.children,r,o,e);case X:h=8,r|=24;break;case k:return t=ye(12,n,e,r|2),t.elementType=k,t.lanes=o,t;case dt:return t=ye(13,n,e,r),t.elementType=dt,t.lanes=o,t;case Mt:return t=ye(19,n,e,r),t.elementType=Mt,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:h=10;break t;case j:h=9;break t;case P:h=11;break t;case tt:h=14;break t;case zt:h=16,s=null;break t}h=29,n=Error(a(130,t===null?"null":typeof t,"")),s=null}return e=ye(h,n,e,r),e.elementType=t,e.type=s,e.lanes=o,e}function Qi(t,e,n,s){return t=ye(7,t,s,e),t.lanes=n,t}function $a(t,e,n){return t=ye(6,t,null,e),t.lanes=n,t}function ac(t){var e=ye(18,null,null,0);return e.stateNode=t,e}function Pa(t,e,n){return e=ye(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var rc=new WeakMap;function we(t,e){if(typeof t=="object"&&t!==null){var n=rc.get(t);return n!==void 0?n:(e={value:t,source:e,stack:au(e)},rc.set(t,e),e)}return{value:t,source:e,stack:au(e)}}var Sn=[],Cn=0,cl=null,rs=0,Ue=[],xe=0,mi=null,He=1,qe="";function Ke(t,e){Sn[Cn++]=rs,Sn[Cn++]=cl,cl=t,rs=e}function oc(t,e,n){Ue[xe++]=He,Ue[xe++]=qe,Ue[xe++]=mi,mi=t;var s=He;t=qe;var r=32-ge(s)-1;s&=~(1<<r),n+=1;var o=32-ge(e)+r;if(30<o){var h=r-r%5;o=(s&(1<<h)-1).toString(32),s>>=h,r-=h,He=1<<32-ge(e)+r|n<<r|s,qe=o+t}else He=1<<o|n<<r|s,qe=t}function tr(t){t.return!==null&&(Ke(t,1),oc(t,1,0))}function er(t){for(;t===cl;)cl=Sn[--Cn],Sn[Cn]=null,rs=Sn[--Cn],Sn[Cn]=null;for(;t===mi;)mi=Ue[--xe],Ue[xe]=null,qe=Ue[--xe],Ue[xe]=null,He=Ue[--xe],Ue[xe]=null}function uc(t,e){Ue[xe++]=He,Ue[xe++]=qe,Ue[xe++]=mi,He=e.id,qe=e.overflow,mi=t}var Qt=null,Ut=null,ft=!1,yi=null,_e=!1,ir=Error(a(519));function pi(t){var e=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw os(we(e,t)),ir}function cc(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Zt]=t,e[le]=s,n){case"dialog":ot("cancel",e),ot("close",e);break;case"iframe":case"object":case"embed":ot("load",e);break;case"video":case"audio":for(n=0;n<Rs.length;n++)ot(Rs[n],e);break;case"source":ot("error",e);break;case"img":case"image":case"link":ot("error",e),ot("load",e);break;case"details":ot("toggle",e);break;case"input":ot("invalid",e),Tu(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ot("invalid",e);break;case"textarea":ot("invalid",e),wu(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||_h(e.textContent,n)?(s.popover!=null&&(ot("beforetoggle",e),ot("toggle",e)),s.onScroll!=null&&ot("scroll",e),s.onScrollEnd!=null&&ot("scrollend",e),s.onClick!=null&&(e.onclick=Ie),e=!0):e=!1,e||pi(t,!0)}function fc(t){for(Qt=t.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:_e=!1;return;case 27:case 3:_e=!0;return;default:Qt=Qt.return}}function En(t){if(t!==Qt)return!1;if(!ft)return fc(t),ft=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Co(t.type,t.memoizedProps)),n=!n),n&&Ut&&pi(t),fc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ut=Xh(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ut=Xh(t)}else e===27?(e=Ut,Mi(t.type)?(t=Uo,Uo=null,Ut=t):Ut=e):Ut=Qt?Re(t.stateNode.nextSibling):null;return!0}function ji(){Ut=Qt=null,ft=!1}function nr(){var t=yi;return t!==null&&(ce===null?ce=t:ce.push.apply(ce,t),yi=null),t}function os(t){yi===null?yi=[t]:yi.push(t)}var sr=T(null),Ii=null,$e=null;function vi(t,e,n){q(sr,e._currentValue),e._currentValue=n}function Pe(t){t._currentValue=sr.current,Y(sr)}function lr(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function ar(t,e,n,s){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var o=r.dependencies;if(o!==null){var h=r.child;o=o.firstContext;t:for(;o!==null;){var p=o;o=r;for(var S=0;S<e.length;S++)if(p.context===e[S]){o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),lr(o.return,n,t),s||(h=null);break t}o=p.next}}else if(r.tag===18){if(h=r.return,h===null)throw Error(a(341));h.lanes|=n,o=h.alternate,o!==null&&(o.lanes|=n),lr(h,n,t),h=null}else h=r.child;if(h!==null)h.return=r;else for(h=r;h!==null;){if(h===t){h=null;break}if(r=h.sibling,r!==null){r.return=h.return,h=r;break}h=h.return}r=h}}function Tn(t,e,n,s){t=null;for(var r=e,o=!1;r!==null;){if(!o){if((r.flags&524288)!==0)o=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var h=r.alternate;if(h===null)throw Error(a(387));if(h=h.memoizedProps,h!==null){var p=r.type;me(r.pendingProps.value,h.value)||(t!==null?t.push(p):t=[p])}}else if(r===pt.current){if(h=r.alternate,h===null)throw Error(a(387));h.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Ls):t=[Ls])}r=r.return}t!==null&&ar(e,t,n,s),e.flags|=262144}function fl(t){for(t=t.firstContext;t!==null;){if(!me(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ji(t){Ii=t,$e=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function jt(t){return hc(Ii,t)}function hl(t,e){return Ii===null&&Ji(t),hc(t,e)}function hc(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},$e===null){if(t===null)throw Error(a(308));$e=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else $e=$e.next=e;return n}var Jg=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Wg=c.unstable_scheduleCallback,Kg=c.unstable_NormalPriority,Xt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rr(){return{controller:new Jg,data:new Map,refCount:0}}function us(t){t.refCount--,t.refCount===0&&Wg(Kg,function(){t.controller.abort()})}var cs=null,or=0,An=0,wn=null;function $g(t,e){if(cs===null){var n=cs=[];or=0,An=fo(),wn={status:"pending",value:void 0,then:function(s){n.push(s)}}}return or++,e.then(dc,dc),e}function dc(){if(--or===0&&cs!==null){wn!==null&&(wn.status="fulfilled");var t=cs;cs=null,An=0,wn=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Pg(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var gc=D.S;D.S=function(t,e){$f=he(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&$g(t,e),gc!==null&&gc(t,e)};var Wi=T(null);function ur(){var t=Wi.current;return t!==null?t:wt.pooledCache}function dl(t,e){e===null?q(Wi,Wi.current):q(Wi,e.pool)}function mc(){var t=ur();return t===null?null:{parent:Xt._currentValue,pool:t}}var Un=Error(a(460)),cr=Error(a(474)),gl=Error(a(542)),ml={then:function(){}};function yc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pc(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ie,Ie),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,bc(t),t;default:if(typeof e.status=="string")e.then(Ie,Ie);else{if(t=wt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=s}},function(s){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,bc(t),t}throw $i=e,Un}}function Ki(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?($i=n,Un):n}}var $i=null;function vc(){if($i===null)throw Error(a(459));var t=$i;return $i=null,t}function bc(t){if(t===Un||t===gl)throw Error(a(483))}var xn=null,fs=0;function yl(t){var e=fs;return fs+=1,xn===null&&(xn=[]),pc(xn,t,e)}function hs(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function pl(t,e){throw e.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(e),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Sc(t){function e(w,E){if(t){var x=w.deletions;x===null?(w.deletions=[E],w.flags|=16):x.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function s(w){for(var E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function r(w,E){return w=We(w,E),w.index=0,w.sibling=null,w}function o(w,E,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<E?(w.flags|=67108866,E):x):(w.flags|=67108866,E)):(w.flags|=1048576,E)}function h(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function p(w,E,x,L){return E===null||E.tag!==6?(E=$a(x,w.mode,L),E.return=w,E):(E=r(E,x),E.return=w,E)}function S(w,E,x,L){var Q=x.type;return Q===B?O(w,E,x.props.children,L,x.key):E!==null&&(E.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===zt&&Ki(Q)===E.type)?(E=r(E,x.props),hs(E,x),E.return=w,E):(E=ul(x.type,x.key,x.props,null,w.mode,L),hs(E,x),E.return=w,E)}function _(w,E,x,L){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=Pa(x,w.mode,L),E.return=w,E):(E=r(E,x.children||[]),E.return=w,E)}function O(w,E,x,L,Q){return E===null||E.tag!==7?(E=Qi(x,w.mode,L,Q),E.return=w,E):(E=r(E,x),E.return=w,E)}function N(w,E,x){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=$a(""+E,w.mode,x),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case A:return x=ul(E.type,E.key,E.props,null,w.mode,x),hs(x,E),x.return=w,x;case z:return E=Pa(E,w.mode,x),E.return=w,E;case zt:return E=Ki(E),N(w,E,x)}if(De(E)||se(E))return E=Qi(E,w.mode,x,null),E.return=w,E;if(typeof E.then=="function")return N(w,yl(E),x);if(E.$$typeof===F)return N(w,hl(w,E),x);pl(w,E)}return null}function R(w,E,x,L){var Q=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return Q!==null?null:p(w,E,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case A:return x.key===Q?S(w,E,x,L):null;case z:return x.key===Q?_(w,E,x,L):null;case zt:return x=Ki(x),R(w,E,x,L)}if(De(x)||se(x))return Q!==null?null:O(w,E,x,L,null);if(typeof x.then=="function")return R(w,E,yl(x),L);if(x.$$typeof===F)return R(w,E,hl(w,x),L);pl(w,x)}return null}function M(w,E,x,L,Q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return w=w.get(x)||null,p(E,w,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return w=w.get(L.key===null?x:L.key)||null,S(E,w,L,Q);case z:return w=w.get(L.key===null?x:L.key)||null,_(E,w,L,Q);case zt:return L=Ki(L),M(w,E,x,L,Q)}if(De(L)||se(L))return w=w.get(x)||null,O(E,w,L,Q,null);if(typeof L.then=="function")return M(w,E,x,yl(L),Q);if(L.$$typeof===F)return M(w,E,x,hl(E,L),Q);pl(E,L)}return null}function G(w,E,x,L){for(var Q=null,gt=null,Z=E,nt=E=0,ct=null;Z!==null&&nt<x.length;nt++){Z.index>nt?(ct=Z,Z=null):ct=Z.sibling;var mt=R(w,Z,x[nt],L);if(mt===null){Z===null&&(Z=ct);break}t&&Z&&mt.alternate===null&&e(w,Z),E=o(mt,E,nt),gt===null?Q=mt:gt.sibling=mt,gt=mt,Z=ct}if(nt===x.length)return n(w,Z),ft&&Ke(w,nt),Q;if(Z===null){for(;nt<x.length;nt++)Z=N(w,x[nt],L),Z!==null&&(E=o(Z,E,nt),gt===null?Q=Z:gt.sibling=Z,gt=Z);return ft&&Ke(w,nt),Q}for(Z=s(Z);nt<x.length;nt++)ct=M(Z,w,nt,x[nt],L),ct!==null&&(t&&ct.alternate!==null&&Z.delete(ct.key===null?nt:ct.key),E=o(ct,E,nt),gt===null?Q=ct:gt.sibling=ct,gt=ct);return t&&Z.forEach(function(Ni){return e(w,Ni)}),ft&&Ke(w,nt),Q}function I(w,E,x,L){if(x==null)throw Error(a(151));for(var Q=null,gt=null,Z=E,nt=E=0,ct=null,mt=x.next();Z!==null&&!mt.done;nt++,mt=x.next()){Z.index>nt?(ct=Z,Z=null):ct=Z.sibling;var Ni=R(w,Z,mt.value,L);if(Ni===null){Z===null&&(Z=ct);break}t&&Z&&Ni.alternate===null&&e(w,Z),E=o(Ni,E,nt),gt===null?Q=Ni:gt.sibling=Ni,gt=Ni,Z=ct}if(mt.done)return n(w,Z),ft&&Ke(w,nt),Q;if(Z===null){for(;!mt.done;nt++,mt=x.next())mt=N(w,mt.value,L),mt!==null&&(E=o(mt,E,nt),gt===null?Q=mt:gt.sibling=mt,gt=mt);return ft&&Ke(w,nt),Q}for(Z=s(Z);!mt.done;nt++,mt=x.next())mt=M(Z,w,nt,mt.value,L),mt!==null&&(t&&mt.alternate!==null&&Z.delete(mt.key===null?nt:mt.key),E=o(mt,E,nt),gt===null?Q=mt:gt.sibling=mt,gt=mt);return t&&Z.forEach(function(cm){return e(w,cm)}),ft&&Ke(w,nt),Q}function Tt(w,E,x,L){if(typeof x=="object"&&x!==null&&x.type===B&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case A:t:{for(var Q=x.key;E!==null;){if(E.key===Q){if(Q=x.type,Q===B){if(E.tag===7){n(w,E.sibling),L=r(E,x.props.children),L.return=w,w=L;break t}}else if(E.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===zt&&Ki(Q)===E.type){n(w,E.sibling),L=r(E,x.props),hs(L,x),L.return=w,w=L;break t}n(w,E);break}else e(w,E);E=E.sibling}x.type===B?(L=Qi(x.props.children,w.mode,L,x.key),L.return=w,w=L):(L=ul(x.type,x.key,x.props,null,w.mode,L),hs(L,x),L.return=w,w=L)}return h(w);case z:t:{for(Q=x.key;E!==null;){if(E.key===Q)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(w,E.sibling),L=r(E,x.children||[]),L.return=w,w=L;break t}else{n(w,E);break}else e(w,E);E=E.sibling}L=Pa(x,w.mode,L),L.return=w,w=L}return h(w);case zt:return x=Ki(x),Tt(w,E,x,L)}if(De(x))return G(w,E,x,L);if(se(x)){if(Q=se(x),typeof Q!="function")throw Error(a(150));return x=Q.call(x),I(w,E,x,L)}if(typeof x.then=="function")return Tt(w,E,yl(x),L);if(x.$$typeof===F)return Tt(w,E,hl(w,x),L);pl(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,E!==null&&E.tag===6?(n(w,E.sibling),L=r(E,x),L.return=w,w=L):(n(w,E),L=$a(x,w.mode,L),L.return=w,w=L),h(w)):n(w,E)}return function(w,E,x,L){try{fs=0;var Q=Tt(w,E,x,L);return xn=null,Q}catch(Z){if(Z===Un||Z===gl)throw Z;var gt=ye(29,Z,null,w.mode);return gt.lanes=L,gt.return=w,gt}finally{}}}var Pi=Sc(!0),Cc=Sc(!1),bi=!1;function fr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hr(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Si(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ci(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(yt&2)!==0){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=ol(t),sc(t,null,n),e}return rl(t,s,e,n),ol(t)}function ds(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,hu(t,n)}}function dr(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?r=o=h:o=o.next=h,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var gr=!1;function gs(){if(gr){var t=wn;if(t!==null)throw t}}function ms(t,e,n,s){gr=!1;var r=t.updateQueue;bi=!1;var o=r.firstBaseUpdate,h=r.lastBaseUpdate,p=r.shared.pending;if(p!==null){r.shared.pending=null;var S=p,_=S.next;S.next=null,h===null?o=_:h.next=_,h=S;var O=t.alternate;O!==null&&(O=O.updateQueue,p=O.lastBaseUpdate,p!==h&&(p===null?O.firstBaseUpdate=_:p.next=_,O.lastBaseUpdate=S))}if(o!==null){var N=r.baseState;h=0,O=_=S=null,p=o;do{var R=p.lane&-536870913,M=R!==p.lane;if(M?(ut&R)===R:(s&R)===R){R!==0&&R===An&&(gr=!0),O!==null&&(O=O.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});t:{var G=t,I=p;R=e;var Tt=n;switch(I.tag){case 1:if(G=I.payload,typeof G=="function"){N=G.call(Tt,N,R);break t}N=G;break t;case 3:G.flags=G.flags&-65537|128;case 0:if(G=I.payload,R=typeof G=="function"?G.call(Tt,N,R):G,R==null)break t;N=v({},N,R);break t;case 2:bi=!0}}R=p.callback,R!==null&&(t.flags|=64,M&&(t.flags|=8192),M=r.callbacks,M===null?r.callbacks=[R]:M.push(R))}else M={lane:R,tag:p.tag,payload:p.payload,callback:p.callback,next:null},O===null?(_=O=M,S=N):O=O.next=M,h|=R;if(p=p.next,p===null){if(p=r.shared.pending,p===null)break;M=p,p=M.next,M.next=null,r.lastBaseUpdate=M,r.shared.pending=null}}while(!0);O===null&&(S=N),r.baseState=S,r.firstBaseUpdate=_,r.lastBaseUpdate=O,o===null&&(r.shared.lanes=0),Ui|=h,t.lanes=h,t.memoizedState=N}}function Ec(t,e){if(typeof t!="function")throw Error(a(191,t));t.call(e)}function Tc(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Ec(n[t],e)}var _n=T(null),vl=T(0);function Ac(t,e){t=oi,q(vl,t),q(_n,e),oi=t|e.baseLanes}function mr(){q(vl,oi),q(_n,_n.current)}function yr(){oi=vl.current,Y(_n),Y(vl)}var pe=T(null),ze=null;function Ei(t){var e=t.alternate;q(Lt,Lt.current&1),q(pe,t),ze===null&&(e===null||_n.current!==null||e.memoizedState!==null)&&(ze=t)}function pr(t){q(Lt,Lt.current),q(pe,t),ze===null&&(ze=t)}function wc(t){t.tag===22?(q(Lt,Lt.current),q(pe,t),ze===null&&(ze=t)):Ti()}function Ti(){q(Lt,Lt.current),q(pe,pe.current)}function ve(t){Y(pe),ze===t&&(ze=null),Y(Lt)}var Lt=T(0);function bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ao(n)||wo(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ti=0,it=null,Ct=null,Yt=null,Sl=!1,zn=!1,tn=!1,Cl=0,ys=0,Rn=null,t0=0;function Bt(){throw Error(a(321))}function vr(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!me(t[n],e[n]))return!1;return!0}function br(t,e,n,s,r,o){return ti=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,D.H=t===null||t.memoizedState===null?uf:Dr,tn=!1,o=n(s,r),tn=!1,zn&&(o=xc(e,n,s,r)),Uc(t),o}function Uc(t){D.H=bs;var e=Ct!==null&&Ct.next!==null;if(ti=0,Yt=Ct=it=null,Sl=!1,ys=0,Rn=null,e)throw Error(a(300));t===null||Ht||(t=t.dependencies,t!==null&&fl(t)&&(Ht=!0))}function xc(t,e,n,s){it=t;var r=0;do{if(zn&&(Rn=null),ys=0,zn=!1,25<=r)throw Error(a(301));if(r+=1,Yt=Ct=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}D.H=cf,o=e(n,s)}while(zn);return o}function e0(){var t=D.H,e=t.useState()[0];return e=typeof e.then=="function"?ps(e):e,t=t.useState()[0],(Ct!==null?Ct.memoizedState:null)!==t&&(it.flags|=1024),e}function Sr(){var t=Cl!==0;return Cl=0,t}function Cr(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Er(t){if(Sl){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Sl=!1}ti=0,Yt=Ct=it=null,zn=!1,ys=Cl=0,Rn=null}function ie(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?it.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Nt(){if(Ct===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Yt===null?it.memoizedState:Yt.next;if(e!==null)Yt=e,Ct=t;else{if(t===null)throw it.alternate===null?Error(a(467)):Error(a(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Yt===null?it.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function El(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ps(t){var e=ys;return ys+=1,Rn===null&&(Rn=[]),t=pc(Rn,t,e),e=it,(Yt===null?e.memoizedState:Yt.next)===null&&(e=e.alternate,D.H=e===null||e.memoizedState===null?uf:Dr),t}function Tl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ps(t);if(t.$$typeof===F)return jt(t)}throw Error(a(438,String(t)))}function Tr(t){var e=null,n=it.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=it.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=El(),it.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=Rt;return e.index++,n}function ei(t,e){return typeof e=="function"?e(t):e}function Al(t){var e=Nt();return Ar(e,Ct,t)}function Ar(t,e,n){var s=t.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=n;var r=t.baseQueue,o=s.pending;if(o!==null){if(r!==null){var h=r.next;r.next=o.next,o.next=h}e.baseQueue=r=o,s.pending=null}if(o=t.baseState,r===null)t.memoizedState=o;else{e=r.next;var p=h=null,S=null,_=e,O=!1;do{var N=_.lane&-536870913;if(N!==_.lane?(ut&N)===N:(ti&N)===N){var R=_.revertLane;if(R===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),N===An&&(O=!0);else if((ti&R)===R){_=_.next,R===An&&(O=!0);continue}else N={lane:0,revertLane:_.revertLane,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},S===null?(p=S=N,h=o):S=S.next=N,it.lanes|=R,Ui|=R;N=_.action,tn&&n(o,N),o=_.hasEagerState?_.eagerState:n(o,N)}else R={lane:N,revertLane:_.revertLane,gesture:_.gesture,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},S===null?(p=S=R,h=o):S=S.next=R,it.lanes|=N,Ui|=N;_=_.next}while(_!==null&&_!==e);if(S===null?h=o:S.next=p,!me(o,t.memoizedState)&&(Ht=!0,O&&(n=wn,n!==null)))throw n;t.memoizedState=o,t.baseState=h,t.baseQueue=S,s.lastRenderedState=o}return r===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function wr(t){var e=Nt(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var h=r=r.next;do o=t(o,h.action),h=h.next;while(h!==r);me(o,e.memoizedState)||(Ht=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,s]}function _c(t,e,n){var s=it,r=Nt(),o=ft;if(o){if(n===void 0)throw Error(a(407));n=n()}else n=e();var h=!me((Ct||r).memoizedState,n);if(h&&(r.memoizedState=n,Ht=!0),r=r.queue,_r(Mc.bind(null,s,r,t),[t]),r.getSnapshot!==e||h||Yt!==null&&Yt.memoizedState.tag&1){if(s.flags|=2048,Mn(9,{destroy:void 0},Rc.bind(null,s,r,n,e),null),wt===null)throw Error(a(349));o||(ti&127)!==0||zc(s,e,n)}return n}function zc(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e=El(),it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rc(t,e,n,s){e.value=n,e.getSnapshot=s,Bc(e)&&Oc(t)}function Mc(t,e,n){return n(function(){Bc(e)&&Oc(t)})}function Bc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!me(t,n)}catch{return!0}}function Oc(t){var e=Zi(t,2);e!==null&&fe(e,t,2)}function Ur(t){var e=ie();if(typeof t=="function"){var n=t;if(t=n(),tn){hi(!0);try{n()}finally{hi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:t},e}function Dc(t,e,n,s){return t.baseState=n,Ar(t,Ct,typeof s=="function"?s:ei)}function i0(t,e,n,s,r){if(xl(t))throw Error(a(485));if(t=e.action,t!==null){var o={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){o.listeners.push(h)}};D.T!==null?n(!0):o.isTransition=!1,s(o),n=e.pending,n===null?(o.next=e.pending=o,Lc(e,o)):(o.next=n.next,e.pending=n.next=o)}}function Lc(t,e){var n=e.action,s=e.payload,r=t.state;if(e.isTransition){var o=D.T,h={};D.T=h;try{var p=n(r,s),S=D.S;S!==null&&S(h,p),Nc(t,e,p)}catch(_){xr(t,e,_)}finally{o!==null&&h.types!==null&&(o.types=h.types),D.T=o}}else try{o=n(r,s),Nc(t,e,o)}catch(_){xr(t,e,_)}}function Nc(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Xc(t,e,s)},function(s){return xr(t,e,s)}):Xc(t,e,n)}function Xc(t,e,n){e.status="fulfilled",e.value=n,Yc(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Lc(t,n)))}function xr(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,Yc(e),e=e.next;while(e!==s)}t.action=null}function Yc(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Hc(t,e){return e}function qc(t,e){if(ft){var n=wt.formState;if(n!==null){t:{var s=it;if(ft){if(Ut){e:{for(var r=Ut,o=_e;r.nodeType!==8;){if(!o){r=null;break e}if(r=Re(r.nextSibling),r===null){r=null;break e}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){Ut=Re(r.nextSibling),s=r.data==="F!";break t}}pi(s)}s=!1}s&&(e=n[0])}}return n=ie(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:e},n.queue=s,n=af.bind(null,it,s),s.dispatch=n,s=Ur(!1),o=Or.bind(null,it,!1,s.queue),s=ie(),r={state:e,dispatch:null,action:t,pending:null},s.queue=r,n=i0.bind(null,it,r,o,n),r.dispatch=n,s.memoizedState=t,[e,n,!1]}function kc(t){var e=Nt();return Fc(e,Ct,t)}function Fc(t,e,n){if(e=Ar(t,e,Hc)[0],t=Al(ei)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=ps(e)}catch(h){throw h===Un?gl:h}else s=e;e=Nt();var r=e.queue,o=r.dispatch;return n!==e.memoizedState&&(it.flags|=2048,Mn(9,{destroy:void 0},n0.bind(null,r,n),null)),[s,o,t]}function n0(t,e){t.action=e}function Gc(t){var e=Nt(),n=Ct;if(n!==null)return Fc(e,n,t);Nt(),e=e.memoizedState,n=Nt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Mn(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=it.updateQueue,e===null&&(e=El(),it.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function Vc(){return Nt().memoizedState}function wl(t,e,n,s){var r=ie();it.flags|=t,r.memoizedState=Mn(1|e,{destroy:void 0},n,s===void 0?null:s)}function Ul(t,e,n,s){var r=Nt();s=s===void 0?null:s;var o=r.memoizedState.inst;Ct!==null&&s!==null&&vr(s,Ct.memoizedState.deps)?r.memoizedState=Mn(e,o,n,s):(it.flags|=t,r.memoizedState=Mn(1|e,o,n,s))}function Zc(t,e){wl(8390656,8,t,e)}function _r(t,e){Ul(2048,8,t,e)}function s0(t){it.flags|=4;var e=it.updateQueue;if(e===null)e=El(),it.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Qc(t){var e=Nt().memoizedState;return s0({ref:e,nextImpl:t}),function(){if((yt&2)!==0)throw Error(a(440));return e.impl.apply(void 0,arguments)}}function jc(t,e){return Ul(4,2,t,e)}function Ic(t,e){return Ul(4,4,t,e)}function Jc(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wc(t,e,n){n=n!=null?n.concat([t]):null,Ul(4,4,Jc.bind(null,e,t),n)}function zr(){}function Kc(t,e){var n=Nt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&vr(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function $c(t,e){var n=Nt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&vr(e,s[1]))return s[0];if(s=t(),tn){hi(!0);try{t()}finally{hi(!1)}}return n.memoizedState=[s,e],s}function Rr(t,e,n){return n===void 0||(ti&1073741824)!==0&&(ut&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=th(),it.lanes|=t,Ui|=t,n)}function Pc(t,e,n,s){return me(n,e)?n:_n.current!==null?(t=Rr(t,n,s),me(t,e)||(Ht=!0),t):(ti&42)===0||(ti&1073741824)!==0&&(ut&261930)===0?(Ht=!0,t.memoizedState=n):(t=th(),it.lanes|=t,Ui|=t,e)}function tf(t,e,n,s,r){var o=H.p;H.p=o!==0&&8>o?o:8;var h=D.T,p={};D.T=p,Or(t,!1,e,n);try{var S=r(),_=D.S;if(_!==null&&_(p,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var O=Pg(S,s);vs(t,e,O,Ce(t))}else vs(t,e,s,Ce(t))}catch(N){vs(t,e,{then:function(){},status:"rejected",reason:N},Ce())}finally{H.p=o,h!==null&&p.types!==null&&(h.types=p.types),D.T=h}}function l0(){}function Mr(t,e,n,s){if(t.tag!==5)throw Error(a(476));var r=ef(t).queue;tf(t,r,e,J,n===null?l0:function(){return nf(t),n(s)})}function ef(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:J},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function nf(t){var e=ef(t);e.next===null&&(e=t.alternate.memoizedState),vs(t,e.next.queue,{},Ce())}function Br(){return jt(Ls)}function sf(){return Nt().memoizedState}function lf(){return Nt().memoizedState}function a0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ce();t=Si(n);var s=Ci(e,t,n);s!==null&&(fe(s,e,n),ds(s,e,n)),e={cache:rr()},t.payload=e;return}e=e.return}}function r0(t,e,n){var s=Ce();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},xl(t)?rf(e,n):(n=Wa(t,e,n,s),n!==null&&(fe(n,t,s),of(n,e,s)))}function af(t,e,n){var s=Ce();vs(t,e,n,s)}function vs(t,e,n,s){var r={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(xl(t))rf(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var h=e.lastRenderedState,p=o(h,n);if(r.hasEagerState=!0,r.eagerState=p,me(p,h))return rl(t,e,r,0),wt===null&&al(),!1}catch{}finally{}if(n=Wa(t,e,r,s),n!==null)return fe(n,t,s),of(n,e,s),!0}return!1}function Or(t,e,n,s){if(s={lane:2,revertLane:fo(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},xl(t)){if(e)throw Error(a(479))}else e=Wa(t,n,s,2),e!==null&&fe(e,t,2)}function xl(t){var e=t.alternate;return t===it||e!==null&&e===it}function rf(t,e){zn=Sl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function of(t,e,n){if((n&4194048)!==0){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,hu(t,n)}}var bs={readContext:jt,use:Tl,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};bs.useEffectEvent=Bt;var uf={readContext:jt,use:Tl,useCallback:function(t,e){return ie().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Zc,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,wl(4194308,4,Jc.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wl(4194308,4,t,e)},useInsertionEffect:function(t,e){wl(4,2,t,e)},useMemo:function(t,e){var n=ie();e=e===void 0?null:e;var s=t();if(tn){hi(!0);try{t()}finally{hi(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=ie();if(n!==void 0){var r=n(e);if(tn){hi(!0);try{n(e)}finally{hi(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=r0.bind(null,it,t),[s.memoizedState,t]},useRef:function(t){var e=ie();return t={current:t},e.memoizedState=t},useState:function(t){t=Ur(t);var e=t.queue,n=af.bind(null,it,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:zr,useDeferredValue:function(t,e){var n=ie();return Rr(n,t,e)},useTransition:function(){var t=Ur(!1);return t=tf.bind(null,it,t.queue,!0,!1),ie().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=it,r=ie();if(ft){if(n===void 0)throw Error(a(407));n=n()}else{if(n=e(),wt===null)throw Error(a(349));(ut&127)!==0||zc(s,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Zc(Mc.bind(null,s,o,t),[t]),s.flags|=2048,Mn(9,{destroy:void 0},Rc.bind(null,s,o,n,e),null),n},useId:function(){var t=ie(),e=wt.identifierPrefix;if(ft){var n=qe,s=He;n=(s&~(1<<32-ge(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Cl++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=t0++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Br,useFormState:qc,useActionState:qc,useOptimistic:function(t){var e=ie();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Or.bind(null,it,!0,n),n.dispatch=e,[t,e]},useMemoCache:Tr,useCacheRefresh:function(){return ie().memoizedState=a0.bind(null,it)},useEffectEvent:function(t){var e=ie(),n={impl:t};return e.memoizedState=n,function(){if((yt&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}},Dr={readContext:jt,use:Tl,useCallback:Kc,useContext:jt,useEffect:_r,useImperativeHandle:Wc,useInsertionEffect:jc,useLayoutEffect:Ic,useMemo:$c,useReducer:Al,useRef:Vc,useState:function(){return Al(ei)},useDebugValue:zr,useDeferredValue:function(t,e){var n=Nt();return Pc(n,Ct.memoizedState,t,e)},useTransition:function(){var t=Al(ei)[0],e=Nt().memoizedState;return[typeof t=="boolean"?t:ps(t),e]},useSyncExternalStore:_c,useId:sf,useHostTransitionStatus:Br,useFormState:kc,useActionState:kc,useOptimistic:function(t,e){var n=Nt();return Dc(n,Ct,t,e)},useMemoCache:Tr,useCacheRefresh:lf};Dr.useEffectEvent=Qc;var cf={readContext:jt,use:Tl,useCallback:Kc,useContext:jt,useEffect:_r,useImperativeHandle:Wc,useInsertionEffect:jc,useLayoutEffect:Ic,useMemo:$c,useReducer:wr,useRef:Vc,useState:function(){return wr(ei)},useDebugValue:zr,useDeferredValue:function(t,e){var n=Nt();return Ct===null?Rr(n,t,e):Pc(n,Ct.memoizedState,t,e)},useTransition:function(){var t=wr(ei)[0],e=Nt().memoizedState;return[typeof t=="boolean"?t:ps(t),e]},useSyncExternalStore:_c,useId:sf,useHostTransitionStatus:Br,useFormState:Gc,useActionState:Gc,useOptimistic:function(t,e){var n=Nt();return Ct!==null?Dc(n,Ct,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Tr,useCacheRefresh:lf};cf.useEffectEvent=Qc;function Lr(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:v({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nr={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ce(),r=Si(s);r.payload=e,n!=null&&(r.callback=n),e=Ci(t,r,s),e!==null&&(fe(e,t,s),ds(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ce(),r=Si(s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ci(t,r,s),e!==null&&(fe(e,t,s),ds(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ce(),s=Si(n);s.tag=2,e!=null&&(s.callback=e),e=Ci(t,s,n),e!==null&&(fe(e,t,n),ds(e,t,n))}};function ff(t,e,n,s,r,o,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,h):e.prototype&&e.prototype.isPureReactComponent?!ls(n,s)||!ls(r,o):!0}function hf(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Nr.enqueueReplaceState(e,e.state,null)}function en(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=v({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function df(t){ll(t)}function gf(t){console.error(t)}function mf(t){ll(t)}function _l(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function yf(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Xr(t,e,n){return n=Si(n),n.tag=3,n.payload={element:null},n.callback=function(){_l(t,e)},n}function pf(t){return t=Si(t),t.tag=3,t}function vf(t,e,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=s.value;t.payload=function(){return r(o)},t.callback=function(){yf(e,n,s)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(t.callback=function(){yf(e,n,s),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var p=s.stack;this.componentDidCatch(s.value,{componentStack:p!==null?p:""})})}function o0(t,e,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Tn(e,n,r,!0),n=pe.current,n!==null){switch(n.tag){case 31:case 13:return ze===null?ql():n.alternate===null&&Ot===0&&(Ot=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===ml?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),oo(t,s,r)),!1;case 22:return n.flags|=65536,s===ml?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),oo(t,s,r)),!1}throw Error(a(435,n.tag))}return oo(t,s,r),ql(),!1}if(ft)return e=pe.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==ir&&(t=Error(a(422),{cause:s}),os(we(t,n)))):(s!==ir&&(e=Error(a(423),{cause:s}),os(we(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,s=we(s,n),r=Xr(t.stateNode,s,r),dr(t,r),Ot!==4&&(Ot=2)),!1;var o=Error(a(520),{cause:s});if(o=we(o,n),xs===null?xs=[o]:xs.push(o),Ot!==4&&(Ot=2),e===null)return!0;s=we(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Xr(n.stateNode,s,t),dr(n,t),!1;case 1:if(e=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(xi===null||!xi.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,r=pf(r),vf(r,t,n,s),dr(n,r),!1}n=n.return}while(n!==null);return!1}var Yr=Error(a(461)),Ht=!1;function It(t,e,n,s){e.child=t===null?Cc(e,null,n,s):Pi(e,t.child,n,s)}function bf(t,e,n,s,r){n=n.render;var o=e.ref;if("ref"in s){var h={};for(var p in s)p!=="ref"&&(h[p]=s[p])}else h=s;return Ji(e),s=br(t,e,n,h,o,r),p=Sr(),t!==null&&!Ht?(Cr(t,e,r),ii(t,e,r)):(ft&&p&&tr(e),e.flags|=1,It(t,e,s,r),e.child)}function Sf(t,e,n,s,r){if(t===null){var o=n.type;return typeof o=="function"&&!Ka(o)&&o.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=o,Cf(t,e,o,s,r)):(t=ul(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!Qr(t,r)){var h=o.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(h,s)&&t.ref===e.ref)return ii(t,e,r)}return e.flags|=1,t=We(o,s),t.ref=e.ref,t.return=e,e.child=t}function Cf(t,e,n,s,r){if(t!==null){var o=t.memoizedProps;if(ls(o,s)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=s=o,Qr(t,r))(t.flags&131072)!==0&&(Ht=!0);else return e.lanes=t.lanes,ii(t,e,r)}return Hr(t,e,n,s,r)}function Ef(t,e,n,s){var r=s.children,o=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((e.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~o}else s=0,e.child=null;return Tf(t,e,o,n,s)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&dl(e,o!==null?o.cachePool:null),o!==null?Ac(e,o):mr(),wc(e);else return s=e.lanes=536870912,Tf(t,e,o!==null?o.baseLanes|n:n,n,s)}else o!==null?(dl(e,o.cachePool),Ac(e,o),Ti(),e.memoizedState=null):(t!==null&&dl(e,null),mr(),Ti());return It(t,e,r,n),e.child}function Ss(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Tf(t,e,n,s,r){var o=ur();return o=o===null?null:{parent:Xt._currentValue,pool:o},e.memoizedState={baseLanes:n,cachePool:o},t!==null&&dl(e,null),mr(),wc(e),t!==null&&Tn(t,e,s,!0),e.childLanes=r,null}function zl(t,e){return e=Ml({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Af(t,e,n){return Pi(e,t.child,null,n),t=zl(e,e.pendingProps),t.flags|=2,ve(e),e.memoizedState=null,t}function u0(t,e,n){var s=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ft){if(s.mode==="hidden")return t=zl(e,s),e.lanes=536870912,Ss(null,t);if(pr(e),(t=Ut)?(t=Nh(t,_e),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:mi!==null?{id:He,overflow:qe}:null,retryLane:536870912,hydrationErrors:null},n=ac(t),n.return=e,e.child=n,Qt=e,Ut=null)):t=null,t===null)throw pi(e);return e.lanes=536870912,null}return zl(e,s)}var o=t.memoizedState;if(o!==null){var h=o.dehydrated;if(pr(e),r)if(e.flags&256)e.flags&=-257,e=Af(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(a(558));else if(Ht||Tn(t,e,n,!1),r=(n&t.childLanes)!==0,Ht||r){if(s=wt,s!==null&&(h=du(s,n),h!==0&&h!==o.retryLane))throw o.retryLane=h,Zi(t,h),fe(s,t,h),Yr;ql(),e=Af(t,e,n)}else t=o.treeContext,Ut=Re(h.nextSibling),Qt=e,ft=!0,yi=null,_e=!1,t!==null&&uc(e,t),e=zl(e,s),e.flags|=4096;return e}return t=We(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Rl(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(a(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Hr(t,e,n,s,r){return Ji(e),n=br(t,e,n,s,void 0,r),s=Sr(),t!==null&&!Ht?(Cr(t,e,r),ii(t,e,r)):(ft&&s&&tr(e),e.flags|=1,It(t,e,n,r),e.child)}function wf(t,e,n,s,r,o){return Ji(e),e.updateQueue=null,n=xc(e,s,n,r),Uc(t),s=Sr(),t!==null&&!Ht?(Cr(t,e,o),ii(t,e,o)):(ft&&s&&tr(e),e.flags|=1,It(t,e,n,o),e.child)}function Uf(t,e,n,s,r){if(Ji(e),e.stateNode===null){var o=bn,h=n.contextType;typeof h=="object"&&h!==null&&(o=jt(h)),o=new n(s,o),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Nr,e.stateNode=o,o._reactInternals=e,o=e.stateNode,o.props=s,o.state=e.memoizedState,o.refs={},fr(e),h=n.contextType,o.context=typeof h=="object"&&h!==null?jt(h):bn,o.state=e.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Lr(e,n,h,s),o.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(h=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),h!==o.state&&Nr.enqueueReplaceState(o,o.state,null),ms(e,s,o,r),gs(),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){o=e.stateNode;var p=e.memoizedProps,S=en(n,p);o.props=S;var _=o.context,O=n.contextType;h=bn,typeof O=="object"&&O!==null&&(h=jt(O));var N=n.getDerivedStateFromProps;O=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=e.pendingProps!==p,O||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||_!==h)&&hf(e,o,s,h),bi=!1;var R=e.memoizedState;o.state=R,ms(e,s,o,r),gs(),_=e.memoizedState,p||R!==_||bi?(typeof N=="function"&&(Lr(e,n,N,s),_=e.memoizedState),(S=bi||ff(e,n,S,s,R,_,h))?(O||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=_),o.props=s,o.state=_,o.context=h,s=S):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,hr(t,e),h=e.memoizedProps,O=en(n,h),o.props=O,N=e.pendingProps,R=o.context,_=n.contextType,S=bn,typeof _=="object"&&_!==null&&(S=jt(_)),p=n.getDerivedStateFromProps,(_=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(h!==N||R!==S)&&hf(e,o,s,S),bi=!1,R=e.memoizedState,o.state=R,ms(e,s,o,r),gs();var M=e.memoizedState;h!==N||R!==M||bi||t!==null&&t.dependencies!==null&&fl(t.dependencies)?(typeof p=="function"&&(Lr(e,n,p,s),M=e.memoizedState),(O=bi||ff(e,n,O,s,R,M,S)||t!==null&&t.dependencies!==null&&fl(t.dependencies))?(_||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,M,S),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,M,S)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||h===t.memoizedProps&&R===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&R===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=M),o.props=s,o.state=M,o.context=S,s=O):(typeof o.componentDidUpdate!="function"||h===t.memoizedProps&&R===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&R===t.memoizedState||(e.flags|=1024),s=!1)}return o=s,Rl(t,e),s=(e.flags&128)!==0,o||s?(o=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:o.render(),e.flags|=1,t!==null&&s?(e.child=Pi(e,t.child,null,r),e.child=Pi(e,null,n,r)):It(t,e,n,r),e.memoizedState=o.state,t=e.child):t=ii(t,e,r),t}function xf(t,e,n,s){return ji(),e.flags|=256,It(t,e,n,s),e.child}var qr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kr(t){return{baseLanes:t,cachePool:mc()}}function Fr(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Se),t}function _f(t,e,n){var s=e.pendingProps,r=!1,o=(e.flags&128)!==0,h;if((h=o)||(h=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),h&&(r=!0,e.flags&=-129),h=(e.flags&32)!==0,e.flags&=-33,t===null){if(ft){if(r?Ei(e):Ti(),(t=Ut)?(t=Nh(t,_e),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:mi!==null?{id:He,overflow:qe}:null,retryLane:536870912,hydrationErrors:null},n=ac(t),n.return=e,e.child=n,Qt=e,Ut=null)):t=null,t===null)throw pi(e);return wo(t)?e.lanes=32:e.lanes=536870912,null}var p=s.children;return s=s.fallback,r?(Ti(),r=e.mode,p=Ml({mode:"hidden",children:p},r),s=Qi(s,r,n,null),p.return=e,s.return=e,p.sibling=s,e.child=p,s=e.child,s.memoizedState=kr(n),s.childLanes=Fr(t,h,n),e.memoizedState=qr,Ss(null,s)):(Ei(e),Gr(e,p))}var S=t.memoizedState;if(S!==null&&(p=S.dehydrated,p!==null)){if(o)e.flags&256?(Ei(e),e.flags&=-257,e=Vr(t,e,n)):e.memoizedState!==null?(Ti(),e.child=t.child,e.flags|=128,e=null):(Ti(),p=s.fallback,r=e.mode,s=Ml({mode:"visible",children:s.children},r),p=Qi(p,r,n,null),p.flags|=2,s.return=e,p.return=e,s.sibling=p,e.child=s,Pi(e,t.child,null,n),s=e.child,s.memoizedState=kr(n),s.childLanes=Fr(t,h,n),e.memoizedState=qr,e=Ss(null,s));else if(Ei(e),wo(p)){if(h=p.nextSibling&&p.nextSibling.dataset,h)var _=h.dgst;h=_,s=Error(a(419)),s.stack="",s.digest=h,os({value:s,source:null,stack:null}),e=Vr(t,e,n)}else if(Ht||Tn(t,e,n,!1),h=(n&t.childLanes)!==0,Ht||h){if(h=wt,h!==null&&(s=du(h,n),s!==0&&s!==S.retryLane))throw S.retryLane=s,Zi(t,s),fe(h,t,s),Yr;Ao(p)||ql(),e=Vr(t,e,n)}else Ao(p)?(e.flags|=192,e.child=t.child,e=null):(t=S.treeContext,Ut=Re(p.nextSibling),Qt=e,ft=!0,yi=null,_e=!1,t!==null&&uc(e,t),e=Gr(e,s.children),e.flags|=4096);return e}return r?(Ti(),p=s.fallback,r=e.mode,S=t.child,_=S.sibling,s=We(S,{mode:"hidden",children:s.children}),s.subtreeFlags=S.subtreeFlags&65011712,_!==null?p=We(_,p):(p=Qi(p,r,n,null),p.flags|=2),p.return=e,s.return=e,s.sibling=p,e.child=s,Ss(null,s),s=e.child,p=t.child.memoizedState,p===null?p=kr(n):(r=p.cachePool,r!==null?(S=Xt._currentValue,r=r.parent!==S?{parent:S,pool:S}:r):r=mc(),p={baseLanes:p.baseLanes|n,cachePool:r}),s.memoizedState=p,s.childLanes=Fr(t,h,n),e.memoizedState=qr,Ss(t.child,s)):(Ei(e),n=t.child,t=n.sibling,n=We(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(h=e.deletions,h===null?(e.deletions=[t],e.flags|=16):h.push(t)),e.child=n,e.memoizedState=null,n)}function Gr(t,e){return e=Ml({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Ml(t,e){return t=ye(22,t,null,e),t.lanes=0,t}function Vr(t,e,n){return Pi(e,t.child,null,n),t=Gr(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zf(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),lr(t.return,e,n)}function Zr(t,e,n,s,r,o){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r,treeForkCount:o}:(h.isBackwards=e,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=r,h.treeForkCount=o)}function Rf(t,e,n){var s=e.pendingProps,r=s.revealOrder,o=s.tail;s=s.children;var h=Lt.current,p=(h&2)!==0;if(p?(h=h&1|2,e.flags|=128):h&=1,q(Lt,h),It(t,e,s,n),s=ft?rs:0,!p&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zf(t,n,e);else if(t.tag===19)zf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&bl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Zr(e,!1,r,n,o,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&bl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Zr(e,!0,n,null,o,s);break;case"together":Zr(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ui|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Tn(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(a(153));if(e.child!==null){for(t=e.child,n=We(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=We(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qr(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&fl(t)))}function c0(t,e,n){switch(e.tag){case 3:ee(e,e.stateNode.containerInfo),vi(e,Xt,t.memoizedState.cache),ji();break;case 27:case 5:Qn(e);break;case 4:ee(e,e.stateNode.containerInfo);break;case 10:vi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,pr(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ei(e),e.flags|=128,null):(n&e.child.childLanes)!==0?_f(t,e,n):(Ei(e),t=ii(t,e,n),t!==null?t.sibling:null);Ei(e);break;case 19:var r=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Tn(t,e,n,!1),s=(n&e.childLanes)!==0),r){if(s)return Rf(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),q(Lt,Lt.current),s)break;return null;case 22:return e.lanes=0,Ef(t,e,n,e.pendingProps);case 24:vi(e,Xt,t.memoizedState.cache)}return ii(t,e,n)}function Mf(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Ht=!0;else{if(!Qr(t,n)&&(e.flags&128)===0)return Ht=!1,c0(t,e,n);Ht=(t.flags&131072)!==0}else Ht=!1,ft&&(e.flags&1048576)!==0&&oc(e,rs,e.index);switch(e.lanes=0,e.tag){case 16:t:{var s=e.pendingProps;if(t=Ki(e.elementType),e.type=t,typeof t=="function")Ka(t)?(s=en(t,s),e.tag=1,e=Uf(null,e,t,s,n)):(e.tag=0,e=Hr(null,e,t,s,n));else{if(t!=null){var r=t.$$typeof;if(r===P){e.tag=11,e=bf(null,e,t,s,n);break t}else if(r===tt){e.tag=14,e=Sf(null,e,t,s,n);break t}}throw e=Qe(t)||t,Error(a(306,e,""))}}return e;case 0:return Hr(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,r=en(s,e.pendingProps),Uf(t,e,s,r,n);case 3:t:{if(ee(e,e.stateNode.containerInfo),t===null)throw Error(a(387));s=e.pendingProps;var o=e.memoizedState;r=o.element,hr(t,e),ms(e,s,null,n);var h=e.memoizedState;if(s=h.cache,vi(e,Xt,s),s!==o.cache&&ar(e,[Xt],n,!0),gs(),s=h.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:h.cache},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){e=xf(t,e,s,n);break t}else if(s!==r){r=we(Error(a(424)),e),os(r),e=xf(t,e,s,n);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ut=Re(t.firstChild),Qt=e,ft=!0,yi=null,_e=!0,n=Cc(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ji(),s===r){e=ii(t,e,n);break t}It(t,e,s,n)}e=e.child}return e;case 26:return Rl(t,e),t===null?(n=Fh(e.type,null,e.pendingProps,null))?e.memoizedState=n:ft||(n=e.type,t=e.pendingProps,s=jl(at.current).createElement(n),s[Zt]=e,s[le]=t,Jt(s,n,t),Gt(s),e.stateNode=s):e.memoizedState=Fh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Qn(e),t===null&&ft&&(s=e.stateNode=Hh(e.type,e.pendingProps,at.current),Qt=e,_e=!0,r=Ut,Mi(e.type)?(Uo=r,Ut=Re(s.firstChild)):Ut=r),It(t,e,e.pendingProps.children,n),Rl(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ft&&((r=s=Ut)&&(s=q0(s,e.type,e.pendingProps,_e),s!==null?(e.stateNode=s,Qt=e,Ut=Re(s.firstChild),_e=!1,r=!0):r=!1),r||pi(e)),Qn(e),r=e.type,o=e.pendingProps,h=t!==null?t.memoizedProps:null,s=o.children,Co(r,o)?s=null:h!==null&&Co(r,h)&&(e.flags|=32),e.memoizedState!==null&&(r=br(t,e,e0,null,null,n),Ls._currentValue=r),Rl(t,e),It(t,e,s,n),e.child;case 6:return t===null&&ft&&((t=n=Ut)&&(n=k0(n,e.pendingProps,_e),n!==null?(e.stateNode=n,Qt=e,Ut=null,t=!0):t=!1),t||pi(e)),null;case 13:return _f(t,e,n);case 4:return ee(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Pi(e,null,s,n):It(t,e,s,n),e.child;case 11:return bf(t,e,e.type,e.pendingProps,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,vi(e,e.type,s.value),It(t,e,s.children,n),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,Ji(e),r=jt(r),s=s(r),e.flags|=1,It(t,e,s,n),e.child;case 14:return Sf(t,e,e.type,e.pendingProps,n);case 15:return Cf(t,e,e.type,e.pendingProps,n);case 19:return Rf(t,e,n);case 31:return u0(t,e,n);case 22:return Ef(t,e,n,e.pendingProps);case 24:return Ji(e),s=jt(Xt),t===null?(r=ur(),r===null&&(r=wt,o=rr(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=n),r=o),e.memoizedState={parent:s,cache:r},fr(e),vi(e,Xt,r)):((t.lanes&n)!==0&&(hr(t,e),ms(e,null,null,n),gs()),r=t.memoizedState,o=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),vi(e,Xt,s)):(s=o.cache,vi(e,Xt,s),s!==r.cache&&ar(e,[Xt],n,!0))),It(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(a(156,e.tag))}function ni(t){t.flags|=4}function jr(t,e,n,s,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(sh())t.flags|=8192;else throw $i=ml,cr}else t.flags&=-16777217}function Bf(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!jh(e))if(sh())t.flags|=8192;else throw $i=ml,cr}function Bl(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?cu():536870912,t.lanes|=e,Ln|=e)}function Cs(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function f0(t,e,n){var s=e.pendingProps;switch(er(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return xt(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Pe(Xt),Dt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(En(e)?ni(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,nr())),xt(e),null;case 26:var r=e.type,o=e.memoizedState;return t===null?(ni(e),o!==null?(xt(e),Bf(e,o)):(xt(e),jr(e,r,null,s,n))):o?o!==t.memoizedState?(ni(e),xt(e),Bf(e,o)):(xt(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&ni(e),xt(e),jr(e,r,t,s,n)),null;case 27:if(Gs(e),n=at.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&ni(e);else{if(!s){if(e.stateNode===null)throw Error(a(166));return xt(e),null}t=V.current,En(e)?cc(e):(t=Hh(r,s,n),e.stateNode=t,ni(e))}return xt(e),null;case 5:if(Gs(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&ni(e);else{if(!s){if(e.stateNode===null)throw Error(a(166));return xt(e),null}if(o=V.current,En(e))cc(e);else{var h=jl(at.current);switch(o){case 1:o=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":o=h.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof s.is=="string"?h.createElement("select",{is:s.is}):h.createElement("select"),s.multiple?o.multiple=!0:s.size&&(o.size=s.size);break;default:o=typeof s.is=="string"?h.createElement(r,{is:s.is}):h.createElement(r)}}o[Zt]=e,o[le]=s;t:for(h=e.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break t;for(;h.sibling===null;){if(h.return===null||h.return===e)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}e.stateNode=o;t:switch(Jt(o,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&ni(e)}}return xt(e),jr(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&ni(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(a(166));if(t=at.current,En(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,r=Qt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}t[Zt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||_h(t.nodeValue,n)),t||pi(e,!0)}else t=jl(t).createTextNode(s),t[Zt]=e,e.stateNode=t}return xt(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=En(e),n!==null){if(t===null){if(!s)throw Error(a(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Zt]=e}else ji(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;xt(e),t=!1}else n=nr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(ve(e),e):(ve(e),null);if((e.flags&128)!==0)throw Error(a(558))}return xt(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=En(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(a(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));r[Zt]=e}else ji(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;xt(e),r=!1}else r=nr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(ve(e),e):(ve(e),null)}return ve(e),(e.flags&128)!==0?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Bl(e,e.updateQueue),xt(e),null);case 4:return Dt(),t===null&&yo(e.stateNode.containerInfo),xt(e),null;case 10:return Pe(e.type),xt(e),null;case 19:if(Y(Lt),s=e.memoizedState,s===null)return xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cs(s,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=bl(t),o!==null){for(e.flags|=128,Cs(s,!1),t=o.updateQueue,e.updateQueue=t,Bl(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)lc(n,t),n=n.sibling;return q(Lt,Lt.current&1|2),ft&&Ke(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&he()>Xl&&(e.flags|=128,r=!0,Cs(s,!1),e.lanes=4194304)}else{if(!r)if(t=bl(o),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Bl(e,t),Cs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ft)return xt(e),null}else 2*he()-s.renderingStartTime>Xl&&n!==536870912&&(e.flags|=128,r=!0,Cs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=he(),t.sibling=null,n=Lt.current,q(Lt,r?n&1|2:n&1),ft&&Ke(e,s.treeForkCount),t):(xt(e),null);case 22:case 23:return ve(e),yr(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?(n&536870912)!==0&&(e.flags&128)===0&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),n=e.updateQueue,n!==null&&Bl(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Y(Wi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Pe(Xt),xt(e),null;case 25:return null;case 30:return null}throw Error(a(156,e.tag))}function h0(t,e){switch(er(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pe(Xt),Dt(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Gs(e),null;case 31:if(e.memoizedState!==null){if(ve(e),e.alternate===null)throw Error(a(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(ve(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(a(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(Lt),null;case 4:return Dt(),null;case 10:return Pe(e.type),null;case 22:case 23:return ve(e),yr(),t!==null&&Y(Wi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Pe(Xt),null;case 25:return null;default:return null}}function Of(t,e){switch(er(e),e.tag){case 3:Pe(Xt),Dt();break;case 26:case 27:case 5:Gs(e);break;case 4:Dt();break;case 31:e.memoizedState!==null&&ve(e);break;case 13:ve(e);break;case 19:Y(Lt);break;case 10:Pe(e.type);break;case 22:case 23:ve(e),yr(),t!==null&&Y(Wi);break;case 24:Pe(Xt)}}function Es(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&t)===t){s=void 0;var o=n.create,h=n.inst;s=o(),h.destroy=s}n=n.next}while(n!==r)}}catch(p){bt(e,e.return,p)}}function Ai(t,e,n){try{var s=e.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var o=r.next;s=o;do{if((s.tag&t)===t){var h=s.inst,p=h.destroy;if(p!==void 0){h.destroy=void 0,r=e;var S=n,_=p;try{_()}catch(O){bt(r,S,O)}}}s=s.next}while(s!==o)}}catch(O){bt(e,e.return,O)}}function Df(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Tc(e,n)}catch(s){bt(t,t.return,s)}}}function Lf(t,e,n){n.props=en(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){bt(t,e,s)}}function Ts(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){bt(t,e,r)}}function ke(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){bt(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function Nf(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break t;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){bt(t,t.return,r)}}function Ir(t,e,n){try{var s=t.stateNode;D0(s,t.type,n,e),s[le]=e}catch(r){bt(t,t.return,r)}}function Xf(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Mi(t.type)||t.tag===4}function Jr(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Xf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Mi(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wr(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ie));else if(s!==4&&(s===27&&Mi(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Wr(t,e,n),t=t.sibling;t!==null;)Wr(t,e,n),t=t.sibling}function Ol(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Mi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}function Yf(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Jt(e,s,n),e[Zt]=t,e[le]=n}catch(o){bt(t,t.return,o)}}var si=!1,qt=!1,Kr=!1,Hf=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function d0(t,e){if(t=t.containerInfo,bo=ta,t=Wu(t),Va(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break t}var h=0,p=-1,S=-1,_=0,O=0,N=t,R=null;e:for(;;){for(var M;N!==n||r!==0&&N.nodeType!==3||(p=h+r),N!==o||s!==0&&N.nodeType!==3||(S=h+s),N.nodeType===3&&(h+=N.nodeValue.length),(M=N.firstChild)!==null;)R=N,N=M;for(;;){if(N===t)break e;if(R===n&&++_===r&&(p=h),R===o&&++O===s&&(S=h),(M=N.nextSibling)!==null)break;N=R,R=N.parentNode}N=M}n=p===-1||S===-1?null:{start:p,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(So={focusedElem:t,selectionRange:n},ta=!1,Vt=e;Vt!==null;)if(e=Vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Vt=t;else for(;Vt!==null;){switch(e=Vt,o=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&o!==null){t=void 0,n=e,r=o.memoizedProps,o=o.memoizedState,s=n.stateNode;try{var G=en(n.type,r);t=s.getSnapshotBeforeUpdate(G,o),s.__reactInternalSnapshotBeforeUpdate=t}catch(I){bt(n,n.return,I)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)To(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":To(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=e.sibling,t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function qf(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ai(t,n),s&4&&Es(5,n);break;case 1:if(ai(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(h){bt(n,n.return,h)}else{var r=en(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(h){bt(n,n.return,h)}}s&64&&Df(n),s&512&&Ts(n,n.return);break;case 3:if(ai(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Tc(t,e)}catch(h){bt(n,n.return,h)}}break;case 27:e===null&&s&4&&Yf(n);case 26:case 5:ai(t,n),e===null&&s&4&&Nf(n),s&512&&Ts(n,n.return);break;case 12:ai(t,n);break;case 31:ai(t,n),s&4&&Gf(t,n);break;case 13:ai(t,n),s&4&&Vf(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=E0.bind(null,n),F0(t,n))));break;case 22:if(s=n.memoizedState!==null||si,!s){e=e!==null&&e.memoizedState!==null||qt,r=si;var o=qt;si=s,(qt=e)&&!o?ri(t,n,(n.subtreeFlags&8772)!==0):ai(t,n),si=r,qt=o}break;case 30:break;default:ai(t,n)}}function kf(t){var e=t.alternate;e!==null&&(t.alternate=null,kf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&xa(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,re=!1;function li(t,e,n){for(n=n.child;n!==null;)Ff(t,e,n),n=n.sibling}function Ff(t,e,n){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(jn,n)}catch{}switch(n.tag){case 26:qt||ke(n,e),li(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qt||ke(n,e);var s=_t,r=re;Mi(n.type)&&(_t=n.stateNode,re=!1),li(t,e,n),Bs(n.stateNode),_t=s,re=r;break;case 5:qt||ke(n,e);case 6:if(s=_t,r=re,_t=null,li(t,e,n),_t=s,re=r,_t!==null)if(re)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(n.stateNode)}catch(o){bt(n,e,o)}else try{_t.removeChild(n.stateNode)}catch(o){bt(n,e,o)}break;case 18:_t!==null&&(re?(t=_t,Dh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Gn(t)):Dh(_t,n.stateNode));break;case 4:s=_t,r=re,_t=n.stateNode.containerInfo,re=!0,li(t,e,n),_t=s,re=r;break;case 0:case 11:case 14:case 15:Ai(2,n,e),qt||Ai(4,n,e),li(t,e,n);break;case 1:qt||(ke(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&Lf(n,e,s)),li(t,e,n);break;case 21:li(t,e,n);break;case 22:qt=(s=qt)||n.memoizedState!==null,li(t,e,n),qt=s;break;default:li(t,e,n)}}function Gf(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Gn(t)}catch(n){bt(e,e.return,n)}}}function Vf(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gn(t)}catch(n){bt(e,e.return,n)}}function g0(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Hf),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Hf),e;default:throw Error(a(435,t.tag))}}function Dl(t,e){var n=g0(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var r=T0.bind(null,t,s);s.then(r,r)}})}function oe(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],o=t,h=e,p=h;t:for(;p!==null;){switch(p.tag){case 27:if(Mi(p.type)){_t=p.stateNode,re=!1;break t}break;case 5:_t=p.stateNode,re=!1;break t;case 3:case 4:_t=p.stateNode.containerInfo,re=!0;break t}p=p.return}if(_t===null)throw Error(a(160));Ff(o,h,r),_t=null,re=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Zf(e,t),e=e.sibling}var Ne=null;function Zf(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:oe(e,t),ue(t),s&4&&(Ai(3,t,t.return),Es(3,t),Ai(5,t,t.return));break;case 1:oe(e,t),ue(t),s&512&&(qt||n===null||ke(n,n.return)),s&64&&si&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=Ne;if(oe(e,t),ue(t),s&512&&(qt||n===null||ke(n,n.return)),s&4){var o=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){t:{s=t.type,n=t.memoizedProps,r=r.ownerDocument||r;e:switch(s){case"title":o=r.getElementsByTagName("title")[0],(!o||o[Wn]||o[Zt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(s),r.head.insertBefore(o,r.querySelector("head > title"))),Jt(o,s,n),o[Zt]=t,Gt(o),s=o;break t;case"link":var h=Zh("link","href",r).get(s+(n.href||""));if(h){for(var p=0;p<h.length;p++)if(o=h[p],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(p,1);break e}}o=r.createElement(s),Jt(o,s,n),r.head.appendChild(o);break;case"meta":if(h=Zh("meta","content",r).get(s+(n.content||""))){for(p=0;p<h.length;p++)if(o=h[p],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(p,1);break e}}o=r.createElement(s),Jt(o,s,n),r.head.appendChild(o);break;default:throw Error(a(468,s))}o[Zt]=t,Gt(o),s=o}t.stateNode=s}else Qh(r,t.type,t.stateNode);else t.stateNode=Vh(r,s,t.memoizedProps);else o!==s?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,s===null?Qh(r,t.type,t.stateNode):Vh(r,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Ir(t,t.memoizedProps,n.memoizedProps)}break;case 27:oe(e,t),ue(t),s&512&&(qt||n===null||ke(n,n.return)),n!==null&&s&4&&Ir(t,t.memoizedProps,n.memoizedProps);break;case 5:if(oe(e,t),ue(t),s&512&&(qt||n===null||ke(n,n.return)),t.flags&32){r=t.stateNode;try{hn(r,"")}catch(G){bt(t,t.return,G)}}s&4&&t.stateNode!=null&&(r=t.memoizedProps,Ir(t,r,n!==null?n.memoizedProps:r)),s&1024&&(Kr=!0);break;case 6:if(oe(e,t),ue(t),s&4){if(t.stateNode===null)throw Error(a(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(G){bt(t,t.return,G)}}break;case 3:if(Wl=null,r=Ne,Ne=Il(e.containerInfo),oe(e,t),Ne=r,ue(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Gn(e.containerInfo)}catch(G){bt(t,t.return,G)}Kr&&(Kr=!1,Qf(t));break;case 4:s=Ne,Ne=Il(t.stateNode.containerInfo),oe(e,t),ue(t),Ne=s;break;case 12:oe(e,t),ue(t);break;case 31:oe(e,t),ue(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Dl(t,s)));break;case 13:oe(e,t),ue(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Nl=he()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Dl(t,s)));break;case 22:r=t.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,_=si,O=qt;if(si=_||r,qt=O||S,oe(e,t),qt=O,si=_,ue(t),s&8192)t:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||S||si||qt||nn(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){S=n=e;try{if(o=S.stateNode,r)h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{p=S.stateNode;var N=S.memoizedProps.style,R=N!=null&&N.hasOwnProperty("display")?N.display:null;p.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(G){bt(S,S.return,G)}}}else if(e.tag===6){if(n===null){S=e;try{S.stateNode.nodeValue=r?"":S.memoizedProps}catch(G){bt(S,S.return,G)}}}else if(e.tag===18){if(n===null){S=e;try{var M=S.stateNode;r?Lh(M,!0):Lh(S.stateNode,!1)}catch(G){bt(S,S.return,G)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Dl(t,n))));break;case 19:oe(e,t),ue(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Dl(t,s)));break;case 30:break;case 21:break;default:oe(e,t),ue(t)}}function ue(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(Xf(s)){n=s;break}s=s.return}if(n==null)throw Error(a(160));switch(n.tag){case 27:var r=n.stateNode,o=Jr(t);Ol(t,o,r);break;case 5:var h=n.stateNode;n.flags&32&&(hn(h,""),n.flags&=-33);var p=Jr(t);Ol(t,p,h);break;case 3:case 4:var S=n.stateNode.containerInfo,_=Jr(t);Wr(t,_,S);break;default:throw Error(a(161))}}catch(O){bt(t,t.return,O)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Qf(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ai(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)qf(t,e.alternate,e),e=e.sibling}function nn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ai(4,e,e.return),nn(e);break;case 1:ke(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Lf(e,e.return,n),nn(e);break;case 27:Bs(e.stateNode);case 26:case 5:ke(e,e.return),nn(e);break;case 22:e.memoizedState===null&&nn(e);break;case 30:nn(e);break;default:nn(e)}t=t.sibling}}function ri(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,r=t,o=e,h=o.flags;switch(o.tag){case 0:case 11:case 15:ri(r,o,n),Es(4,o);break;case 1:if(ri(r,o,n),s=o,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(_){bt(s,s.return,_)}if(s=o,r=s.updateQueue,r!==null){var p=s.stateNode;try{var S=r.shared.hiddenCallbacks;if(S!==null)for(r.shared.hiddenCallbacks=null,r=0;r<S.length;r++)Ec(S[r],p)}catch(_){bt(s,s.return,_)}}n&&h&64&&Df(o),Ts(o,o.return);break;case 27:Yf(o);case 26:case 5:ri(r,o,n),n&&s===null&&h&4&&Nf(o),Ts(o,o.return);break;case 12:ri(r,o,n);break;case 31:ri(r,o,n),n&&h&4&&Gf(r,o);break;case 13:ri(r,o,n),n&&h&4&&Vf(r,o);break;case 22:o.memoizedState===null&&ri(r,o,n),Ts(o,o.return);break;case 30:break;default:ri(r,o,n)}e=e.sibling}}function $r(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&us(n))}function Pr(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&us(t))}function Xe(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jf(t,e,n,s),e=e.sibling}function jf(t,e,n,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Xe(t,e,n,s),r&2048&&Es(9,e);break;case 1:Xe(t,e,n,s);break;case 3:Xe(t,e,n,s),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&us(t)));break;case 12:if(r&2048){Xe(t,e,n,s),t=e.stateNode;try{var o=e.memoizedProps,h=o.id,p=o.onPostCommit;typeof p=="function"&&p(h,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){bt(e,e.return,S)}}else Xe(t,e,n,s);break;case 31:Xe(t,e,n,s);break;case 13:Xe(t,e,n,s);break;case 23:break;case 22:o=e.stateNode,h=e.alternate,e.memoizedState!==null?o._visibility&2?Xe(t,e,n,s):As(t,e):o._visibility&2?Xe(t,e,n,s):(o._visibility|=2,Bn(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),r&2048&&$r(h,e);break;case 24:Xe(t,e,n,s),r&2048&&Pr(e.alternate,e);break;default:Xe(t,e,n,s)}}function Bn(t,e,n,s,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var o=t,h=e,p=n,S=s,_=h.flags;switch(h.tag){case 0:case 11:case 15:Bn(o,h,p,S,r),Es(8,h);break;case 23:break;case 22:var O=h.stateNode;h.memoizedState!==null?O._visibility&2?Bn(o,h,p,S,r):As(o,h):(O._visibility|=2,Bn(o,h,p,S,r)),r&&_&2048&&$r(h.alternate,h);break;case 24:Bn(o,h,p,S,r),r&&_&2048&&Pr(h.alternate,h);break;default:Bn(o,h,p,S,r)}e=e.sibling}}function As(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,r=s.flags;switch(s.tag){case 22:As(n,s),r&2048&&$r(s.alternate,s);break;case 24:As(n,s),r&2048&&Pr(s.alternate,s);break;default:As(n,s)}e=e.sibling}}var ws=8192;function On(t,e,n){if(t.subtreeFlags&ws)for(t=t.child;t!==null;)If(t,e,n),t=t.sibling}function If(t,e,n){switch(t.tag){case 26:On(t,e,n),t.flags&ws&&t.memoizedState!==null&&tm(n,Ne,t.memoizedState,t.memoizedProps);break;case 5:On(t,e,n);break;case 3:case 4:var s=Ne;Ne=Il(t.stateNode.containerInfo),On(t,e,n),Ne=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=ws,ws=16777216,On(t,e,n),ws=s):On(t,e,n));break;default:On(t,e,n)}}function Jf(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Us(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Vt=s,Kf(s,t)}Jf(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wf(t),t=t.sibling}function Wf(t){switch(t.tag){case 0:case 11:case 15:Us(t),t.flags&2048&&Ai(9,t,t.return);break;case 3:Us(t);break;case 12:Us(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ll(t)):Us(t);break;default:Us(t)}}function Ll(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Vt=s,Kf(s,t)}Jf(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ai(8,e,e.return),Ll(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ll(e));break;default:Ll(e)}t=t.sibling}}function Kf(t,e){for(;Vt!==null;){var n=Vt;switch(n.tag){case 0:case 11:case 15:Ai(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:us(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Vt=s;else t:for(n=t;Vt!==null;){s=Vt;var r=s.sibling,o=s.return;if(kf(s),s===n){Vt=null;break t}if(r!==null){r.return=o,Vt=r;break t}Vt=o}}}var m0={getCacheForType:function(t){var e=jt(Xt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return jt(Xt).controller.signal}},y0=typeof WeakMap=="function"?WeakMap:Map,yt=0,wt=null,rt=null,ut=0,vt=0,be=null,wi=!1,Dn=!1,to=!1,oi=0,Ot=0,Ui=0,sn=0,eo=0,Se=0,Ln=0,xs=null,ce=null,io=!1,Nl=0,$f=0,Xl=1/0,Yl=null,xi=null,Ft=0,_i=null,Nn=null,ui=0,no=0,so=null,Pf=null,_s=0,lo=null;function Ce(){return(yt&2)!==0&&ut!==0?ut&-ut:D.T!==null?fo():gu()}function th(){if(Se===0)if((ut&536870912)===0||ft){var t=Qs;Qs<<=1,(Qs&3932160)===0&&(Qs=262144),Se=t}else Se=536870912;return t=pe.current,t!==null&&(t.flags|=32),Se}function fe(t,e,n){(t===wt&&(vt===2||vt===9)||t.cancelPendingCommit!==null)&&(Xn(t,0),zi(t,ut,Se,!1)),Jn(t,n),((yt&2)===0||t!==wt)&&(t===wt&&((yt&2)===0&&(sn|=n),Ot===4&&zi(t,ut,Se,!1)),Fe(t))}function eh(t,e,n){if((yt&6)!==0)throw Error(a(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||In(t,e),r=s?b0(t,e):ro(t,e,!0),o=s;do{if(r===0){Dn&&!s&&zi(t,e,0,!1);break}else{if(n=t.current.alternate,o&&!p0(n)){r=ro(t,e,!1),o=!1;continue}if(r===2){if(o=e,t.errorRecoveryDisabledLanes&o)var h=0;else h=t.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){e=h;t:{var p=t;r=xs;var S=p.current.memoizedState.isDehydrated;if(S&&(Xn(p,h).flags|=256),h=ro(p,h,!1),h!==2){if(to&&!S){p.errorRecoveryDisabledLanes|=o,sn|=o,r=4;break t}o=ce,ce=r,o!==null&&(ce===null?ce=o:ce.push.apply(ce,o))}r=h}if(o=!1,r!==2)continue}}if(r===1){Xn(t,0),zi(t,e,0,!0);break}t:{switch(s=t,o=r,o){case 0:case 1:throw Error(a(345));case 4:if((e&4194048)!==e)break;case 6:zi(s,e,Se,!wi);break t;case 2:ce=null;break;case 3:case 5:break;default:throw Error(a(329))}if((e&62914560)===e&&(r=Nl+300-he(),10<r)){if(zi(s,e,Se,!wi),Is(s,0,!0)!==0)break t;ui=e,s.timeoutHandle=Bh(ih.bind(null,s,n,ce,Yl,io,e,Se,sn,Ln,wi,o,"Throttled",-0,0),r);break t}ih(s,n,ce,Yl,io,e,Se,sn,Ln,wi,o,null,-0,0)}}break}while(!0);Fe(t)}function ih(t,e,n,s,r,o,h,p,S,_,O,N,R,M){if(t.timeoutHandle=-1,N=e.subtreeFlags,N&8192||(N&16785408)===16785408){N={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ie},If(e,o,N);var G=(o&62914560)===o?Nl-he():(o&4194048)===o?$f-he():0;if(G=em(N,G),G!==null){ui=o,t.cancelPendingCommit=G(ch.bind(null,t,e,o,n,s,r,h,p,S,O,N,null,R,M)),zi(t,o,h,!_);return}}ch(t,e,o,n,s,r,h,p,S)}function p0(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],o=r.getSnapshot;r=r.value;try{if(!me(o(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zi(t,e,n,s){e&=~eo,e&=~sn,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var o=31-ge(r),h=1<<o;s[o]=-1,r&=~h}n!==0&&fu(t,n,e)}function Hl(){return(yt&6)===0?(zs(0),!1):!0}function ao(){if(rt!==null){if(vt===0)var t=rt.return;else t=rt,$e=Ii=null,Er(t),xn=null,fs=0,t=rt;for(;t!==null;)Of(t.alternate,t),t=t.return;rt=null}}function Xn(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,X0(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ui=0,ao(),wt=t,rt=n=We(t.current,null),ut=e,vt=0,be=null,wi=!1,Dn=In(t,e),to=!1,Ln=Se=eo=sn=Ui=Ot=0,ce=xs=null,io=!1,(e&8)!==0&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var r=31-ge(s),o=1<<r;e|=t[r],s&=~o}return oi=e,al(),n}function nh(t,e){it=null,D.H=bs,e===Un||e===gl?(e=vc(),vt=3):e===cr?(e=vc(),vt=4):vt=e===Yr?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,be=e,rt===null&&(Ot=1,_l(t,we(e,t.current)))}function sh(){var t=pe.current;return t===null?!0:(ut&4194048)===ut?ze===null:(ut&62914560)===ut||(ut&536870912)!==0?t===ze:!1}function lh(){var t=D.H;return D.H=bs,t===null?bs:t}function ah(){var t=D.A;return D.A=m0,t}function ql(){Ot=4,wi||(ut&4194048)!==ut&&pe.current!==null||(Dn=!0),(Ui&134217727)===0&&(sn&134217727)===0||wt===null||zi(wt,ut,Se,!1)}function ro(t,e,n){var s=yt;yt|=2;var r=lh(),o=ah();(wt!==t||ut!==e)&&(Yl=null,Xn(t,e)),e=!1;var h=Ot;t:do try{if(vt!==0&&rt!==null){var p=rt,S=be;switch(vt){case 8:ao(),h=6;break t;case 3:case 2:case 9:case 6:pe.current===null&&(e=!0);var _=vt;if(vt=0,be=null,Yn(t,p,S,_),n&&Dn){h=0;break t}break;default:_=vt,vt=0,be=null,Yn(t,p,S,_)}}v0(),h=Ot;break}catch(O){nh(t,O)}while(!0);return e&&t.shellSuspendCounter++,$e=Ii=null,yt=s,D.H=r,D.A=o,rt===null&&(wt=null,ut=0,al()),h}function v0(){for(;rt!==null;)rh(rt)}function b0(t,e){var n=yt;yt|=2;var s=lh(),r=ah();wt!==t||ut!==e?(Yl=null,Xl=he()+500,Xn(t,e)):Dn=In(t,e);t:do try{if(vt!==0&&rt!==null){e=rt;var o=be;e:switch(vt){case 1:vt=0,be=null,Yn(t,e,o,1);break;case 2:case 9:if(yc(o)){vt=0,be=null,oh(e);break}e=function(){vt!==2&&vt!==9||wt!==t||(vt=7),Fe(t)},o.then(e,e);break t;case 3:vt=7;break t;case 4:vt=5;break t;case 7:yc(o)?(vt=0,be=null,oh(e)):(vt=0,be=null,Yn(t,e,o,7));break;case 5:var h=null;switch(rt.tag){case 26:h=rt.memoizedState;case 5:case 27:var p=rt;if(h?jh(h):p.stateNode.complete){vt=0,be=null;var S=p.sibling;if(S!==null)rt=S;else{var _=p.return;_!==null?(rt=_,kl(_)):rt=null}break e}}vt=0,be=null,Yn(t,e,o,5);break;case 6:vt=0,be=null,Yn(t,e,o,6);break;case 8:ao(),Ot=6;break t;default:throw Error(a(462))}}S0();break}catch(O){nh(t,O)}while(!0);return $e=Ii=null,D.H=s,D.A=r,yt=n,rt!==null?0:(wt=null,ut=0,al(),Ot)}function S0(){for(;rt!==null&&!Gd();)rh(rt)}function rh(t){var e=Mf(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?kl(t):rt=e}function oh(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=wf(n,e,e.pendingProps,e.type,void 0,ut);break;case 11:e=wf(n,e,e.pendingProps,e.type.render,e.ref,ut);break;case 5:Er(e);default:Of(n,e),e=rt=lc(e,oi),e=Mf(n,e,oi)}t.memoizedProps=t.pendingProps,e===null?kl(t):rt=e}function Yn(t,e,n,s){$e=Ii=null,Er(e),xn=null,fs=0;var r=e.return;try{if(o0(t,r,e,n,ut)){Ot=1,_l(t,we(n,t.current)),rt=null;return}}catch(o){if(r!==null)throw rt=r,o;Ot=1,_l(t,we(n,t.current)),rt=null;return}e.flags&32768?(ft||s===1?t=!0:Dn||(ut&536870912)!==0?t=!1:(wi=t=!0,(s===2||s===9||s===3||s===6)&&(s=pe.current,s!==null&&s.tag===13&&(s.flags|=16384))),uh(e,t)):kl(e)}function kl(t){var e=t;do{if((e.flags&32768)!==0){uh(e,wi);return}t=e.return;var n=f0(e.alternate,e,oi);if(n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);Ot===0&&(Ot=5)}function uh(t,e){do{var n=h0(t.alternate,t);if(n!==null){n.flags&=32767,rt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){rt=t;return}rt=t=n}while(t!==null);Ot=6,rt=null}function ch(t,e,n,s,r,o,h,p,S){t.cancelPendingCommit=null;do Fl();while(Ft!==0);if((yt&6)!==0)throw Error(a(327));if(e!==null){if(e===t.current)throw Error(a(177));if(o=e.lanes|e.childLanes,o|=Ja,Pd(t,n,o,h,p,S),t===wt&&(rt=wt=null,ut=0),Nn=e,_i=t,ui=n,no=o,so=r,Pf=s,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,A0(Vs,function(){return mh(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||s){s=D.T,D.T=null,r=H.p,H.p=2,h=yt,yt|=4;try{d0(t,e,n)}finally{yt=h,H.p=r,D.T=s}}Ft=1,fh(),hh(),dh()}}function fh(){if(Ft===1){Ft=0;var t=_i,e=Nn,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=D.T,D.T=null;var s=H.p;H.p=2;var r=yt;yt|=4;try{Zf(e,t);var o=So,h=Wu(t.containerInfo),p=o.focusedElem,S=o.selectionRange;if(h!==p&&p&&p.ownerDocument&&Ju(p.ownerDocument.documentElement,p)){if(S!==null&&Va(p)){var _=S.start,O=S.end;if(O===void 0&&(O=_),"selectionStart"in p)p.selectionStart=_,p.selectionEnd=Math.min(O,p.value.length);else{var N=p.ownerDocument||document,R=N&&N.defaultView||window;if(R.getSelection){var M=R.getSelection(),G=p.textContent.length,I=Math.min(S.start,G),Tt=S.end===void 0?I:Math.min(S.end,G);!M.extend&&I>Tt&&(h=Tt,Tt=I,I=h);var w=Iu(p,I),E=Iu(p,Tt);if(w&&E&&(M.rangeCount!==1||M.anchorNode!==w.node||M.anchorOffset!==w.offset||M.focusNode!==E.node||M.focusOffset!==E.offset)){var x=N.createRange();x.setStart(w.node,w.offset),M.removeAllRanges(),I>Tt?(M.addRange(x),M.extend(E.node,E.offset)):(x.setEnd(E.node,E.offset),M.addRange(x))}}}}for(N=[],M=p;M=M.parentNode;)M.nodeType===1&&N.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<N.length;p++){var L=N[p];L.element.scrollLeft=L.left,L.element.scrollTop=L.top}}ta=!!bo,So=bo=null}finally{yt=r,H.p=s,D.T=n}}t.current=e,Ft=2}}function hh(){if(Ft===2){Ft=0;var t=_i,e=Nn,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=D.T,D.T=null;var s=H.p;H.p=2;var r=yt;yt|=4;try{qf(t,e.alternate,e)}finally{yt=r,H.p=s,D.T=n}}Ft=3}}function dh(){if(Ft===4||Ft===3){Ft=0,Vd();var t=_i,e=Nn,n=ui,s=Pf;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Ft=5:(Ft=0,Nn=_i=null,gh(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(xi=null),wa(n),e=e.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(jn,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=D.T,r=H.p,H.p=2,D.T=null;try{for(var o=t.onRecoverableError,h=0;h<s.length;h++){var p=s[h];o(p.value,{componentStack:p.stack})}}finally{D.T=e,H.p=r}}(ui&3)!==0&&Fl(),Fe(t),r=t.pendingLanes,(n&261930)!==0&&(r&42)!==0?t===lo?_s++:(_s=0,lo=t):_s=0,zs(0)}}function gh(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,us(e)))}function Fl(){return fh(),hh(),dh(),mh()}function mh(){if(Ft!==5)return!1;var t=_i,e=no;no=0;var n=wa(ui),s=D.T,r=H.p;try{H.p=32>n?32:n,D.T=null,n=so,so=null;var o=_i,h=ui;if(Ft=0,Nn=_i=null,ui=0,(yt&6)!==0)throw Error(a(331));var p=yt;if(yt|=4,Wf(o.current),jf(o,o.current,h,n),yt=p,zs(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(jn,o)}catch{}return!0}finally{H.p=r,D.T=s,gh(t,e)}}function yh(t,e,n){e=we(n,e),e=Xr(t.stateNode,e,2),t=Ci(t,e,2),t!==null&&(Jn(t,2),Fe(t))}function bt(t,e,n){if(t.tag===3)yh(t,t,n);else for(;e!==null;){if(e.tag===3){yh(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(xi===null||!xi.has(s))){t=we(n,t),n=pf(2),s=Ci(e,n,2),s!==null&&(vf(n,s,e,t),Jn(s,2),Fe(s));break}}e=e.return}}function oo(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new y0;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(to=!0,r.add(n),t=C0.bind(null,t,e,n),e.then(t,t))}function C0(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,wt===t&&(ut&n)===n&&(Ot===4||Ot===3&&(ut&62914560)===ut&&300>he()-Nl?(yt&2)===0&&Xn(t,0):eo|=n,Ln===ut&&(Ln=0)),Fe(t)}function ph(t,e){e===0&&(e=cu()),t=Zi(t,e),t!==null&&(Jn(t,e),Fe(t))}function E0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ph(t,n)}function T0(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(e),ph(t,n)}function A0(t,e){return Ca(t,e)}var Gl=null,Hn=null,uo=!1,Vl=!1,co=!1,Ri=0;function Fe(t){t!==Hn&&t.next===null&&(Hn===null?Gl=Hn=t:Hn=Hn.next=t),Vl=!0,uo||(uo=!0,U0())}function zs(t,e){if(!co&&Vl){co=!0;do for(var n=!1,s=Gl;s!==null;){if(t!==0){var r=s.pendingLanes;if(r===0)var o=0;else{var h=s.suspendedLanes,p=s.pingedLanes;o=(1<<31-ge(42|t)+1)-1,o&=r&~(h&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Ch(s,o))}else o=ut,o=Is(s,s===wt?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(o&3)===0||In(s,o)||(n=!0,Ch(s,o));s=s.next}while(n);co=!1}}function w0(){vh()}function vh(){Vl=uo=!1;var t=0;Ri!==0&&N0()&&(t=Ri);for(var e=he(),n=null,s=Gl;s!==null;){var r=s.next,o=bh(s,e);o===0?(s.next=null,n===null?Gl=r:n.next=r,r===null&&(Hn=n)):(n=s,(t!==0||(o&3)!==0)&&(Vl=!0)),s=r}Ft!==0&&Ft!==5||zs(t),Ri!==0&&(Ri=0)}function bh(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var h=31-ge(o),p=1<<h,S=r[h];S===-1?((p&n)===0||(p&s)!==0)&&(r[h]=$d(p,e)):S<=e&&(t.expiredLanes|=p),o&=~p}if(e=wt,n=ut,n=Is(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(vt===2||vt===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Ea(s),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||In(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Ea(s),wa(n)){case 2:case 8:n=ou;break;case 32:n=Vs;break;case 268435456:n=uu;break;default:n=Vs}return s=Sh.bind(null,t),n=Ca(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Ea(s),t.callbackPriority=2,t.callbackNode=null,2}function Sh(t,e){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Fl()&&t.callbackNode!==n)return null;var s=ut;return s=Is(t,t===wt?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(eh(t,s,e),bh(t,he()),t.callbackNode!=null&&t.callbackNode===n?Sh.bind(null,t):null)}function Ch(t,e){if(Fl())return null;eh(t,e,!0)}function U0(){Y0(function(){(yt&6)!==0?Ca(ru,w0):vh()})}function fo(){if(Ri===0){var t=An;t===0&&(t=Zs,Zs<<=1,(Zs&261888)===0&&(Zs=256)),Ri=t}return Ri}function Eh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:$s(""+t)}function Th(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function x0(t,e,n,s,r){if(e==="submit"&&n&&n.stateNode===r){var o=Eh((r[le]||null).action),h=s.submitter;h&&(e=(e=h[le]||null)?Eh(e.formAction):h.getAttribute("formAction"),e!==null&&(o=e,h=null));var p=new il("action","action",null,s,r);t.push({event:p,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ri!==0){var S=h?Th(r,h):new FormData(r);Mr(n,{pending:!0,data:S,method:r.method,action:o},null,S)}}else typeof o=="function"&&(p.preventDefault(),S=h?Th(r,h):new FormData(r),Mr(n,{pending:!0,data:S,method:r.method,action:o},o,S))},currentTarget:r}]})}}for(var ho=0;ho<Ia.length;ho++){var go=Ia[ho],_0=go.toLowerCase(),z0=go[0].toUpperCase()+go.slice(1);Le(_0,"on"+z0)}Le(Pu,"onAnimationEnd"),Le(tc,"onAnimationIteration"),Le(ec,"onAnimationStart"),Le("dblclick","onDoubleClick"),Le("focusin","onFocus"),Le("focusout","onBlur"),Le(Zg,"onTransitionRun"),Le(Qg,"onTransitionStart"),Le(jg,"onTransitionCancel"),Le(ic,"onTransitionEnd"),cn("onMouseEnter",["mouseout","mouseover"]),cn("onMouseLeave",["mouseout","mouseover"]),cn("onPointerEnter",["pointerout","pointerover"]),cn("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rs));function Ah(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;t:{var o=void 0;if(e)for(var h=s.length-1;0<=h;h--){var p=s[h],S=p.instance,_=p.currentTarget;if(p=p.listener,S!==o&&r.isPropagationStopped())break t;o=p,r.currentTarget=_;try{o(r)}catch(O){ll(O)}r.currentTarget=null,o=S}else for(h=0;h<s.length;h++){if(p=s[h],S=p.instance,_=p.currentTarget,p=p.listener,S!==o&&r.isPropagationStopped())break t;o=p,r.currentTarget=_;try{o(r)}catch(O){ll(O)}r.currentTarget=null,o=S}}}}function ot(t,e){var n=e[Ua];n===void 0&&(n=e[Ua]=new Set);var s=t+"__bubble";n.has(s)||(wh(e,t,2,!1),n.add(s))}function mo(t,e,n){var s=0;e&&(s|=4),wh(n,t,s,e)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function yo(t){if(!t[Zl]){t[Zl]=!0,pu.forEach(function(n){n!=="selectionchange"&&(R0.has(n)||mo(n,!1,t),mo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zl]||(e[Zl]=!0,mo("selectionchange",!1,e))}}function wh(t,e,n,s){switch(td(e)){case 2:var r=sm;break;case 8:r=lm;break;default:r=Mo}n=r.bind(null,e,n,t),r=void 0,!La||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function po(t,e,n,s,r){var o=s;if((e&1)===0&&(e&2)===0&&s!==null)t:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var p=s.stateNode.containerInfo;if(p===r)break;if(h===4)for(h=s.return;h!==null;){var S=h.tag;if((S===3||S===4)&&h.stateNode.containerInfo===r)return;h=h.return}for(;p!==null;){if(h=rn(p),h===null)return;if(S=h.tag,S===5||S===6||S===26||S===27){s=o=h;continue t}p=p.parentNode}}s=s.return}zu(function(){var _=o,O=Oa(n),N=[];t:{var R=nc.get(t);if(R!==void 0){var M=il,G=t;switch(t){case"keypress":if(tl(n)===0)break t;case"keydown":case"keyup":M=Tg;break;case"focusin":G="focus",M=Ha;break;case"focusout":G="blur",M=Ha;break;case"beforeblur":case"afterblur":M=Ha;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=Ug;break;case Pu:case tc:case ec:M=gg;break;case ic:M=_g;break;case"scroll":case"scrollend":M=ug;break;case"wheel":M=Rg;break;case"copy":case"cut":case"paste":M=yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Du;break;case"toggle":case"beforetoggle":M=Bg}var I=(e&4)!==0,Tt=!I&&(t==="scroll"||t==="scrollend"),w=I?R!==null?R+"Capture":null:R;I=[];for(var E=_,x;E!==null;){var L=E;if(x=L.stateNode,L=L.tag,L!==5&&L!==26&&L!==27||x===null||w===null||(L=$n(E,w),L!=null&&I.push(Ms(E,L,x))),Tt)break;E=E.return}0<I.length&&(R=new M(R,G,null,n,O),N.push({event:R,listeners:I}))}}if((e&7)===0){t:{if(R=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",R&&n!==Ba&&(G=n.relatedTarget||n.fromElement)&&(rn(G)||G[an]))break t;if((M||R)&&(R=O.window===O?O:(R=O.ownerDocument)?R.defaultView||R.parentWindow:window,M?(G=n.relatedTarget||n.toElement,M=_,G=G?rn(G):null,G!==null&&(Tt=f(G),I=G.tag,G!==Tt||I!==5&&I!==27&&I!==6)&&(G=null)):(M=null,G=_),M!==G)){if(I=Bu,L="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(I=Du,L="onPointerLeave",w="onPointerEnter",E="pointer"),Tt=M==null?R:Kn(M),x=G==null?R:Kn(G),R=new I(L,E+"leave",M,n,O),R.target=Tt,R.relatedTarget=x,L=null,rn(O)===_&&(I=new I(w,E+"enter",G,n,O),I.target=x,I.relatedTarget=Tt,L=I),Tt=L,M&&G)e:{for(I=M0,w=M,E=G,x=0,L=w;L;L=I(L))x++;L=0;for(var Q=E;Q;Q=I(Q))L++;for(;0<x-L;)w=I(w),x--;for(;0<L-x;)E=I(E),L--;for(;x--;){if(w===E||E!==null&&w===E.alternate){I=w;break e}w=I(w),E=I(E)}I=null}else I=null;M!==null&&Uh(N,R,M,I,!1),G!==null&&Tt!==null&&Uh(N,Tt,G,I,!0)}}t:{if(R=_?Kn(_):window,M=R.nodeName&&R.nodeName.toLowerCase(),M==="select"||M==="input"&&R.type==="file")var gt=Fu;else if(qu(R))if(Gu)gt=Fg;else{gt=qg;var Z=Hg}else M=R.nodeName,!M||M.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?_&&Ma(_.elementType)&&(gt=Fu):gt=kg;if(gt&&(gt=gt(t,_))){ku(N,gt,n,O);break t}Z&&Z(t,R,_),t==="focusout"&&_&&R.type==="number"&&_.memoizedProps.value!=null&&Ra(R,"number",R.value)}switch(Z=_?Kn(_):window,t){case"focusin":(qu(Z)||Z.contentEditable==="true")&&(yn=Z,Za=_,as=null);break;case"focusout":as=Za=yn=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,Ku(N,n,O);break;case"selectionchange":if(Vg)break;case"keydown":case"keyup":Ku(N,n,O)}var nt;if(ka)t:{switch(t){case"compositionstart":var ct="onCompositionStart";break t;case"compositionend":ct="onCompositionEnd";break t;case"compositionupdate":ct="onCompositionUpdate";break t}ct=void 0}else mn?Yu(t,n)&&(ct="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(ct="onCompositionStart");ct&&(Lu&&n.locale!=="ko"&&(mn||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&mn&&(nt=Ru()):(gi=O,Na="value"in gi?gi.value:gi.textContent,mn=!0)),Z=Ql(_,ct),0<Z.length&&(ct=new Ou(ct,t,null,n,O),N.push({event:ct,listeners:Z}),nt?ct.data=nt:(nt=Hu(n),nt!==null&&(ct.data=nt)))),(nt=Dg?Lg(t,n):Ng(t,n))&&(ct=Ql(_,"onBeforeInput"),0<ct.length&&(Z=new Ou("onBeforeInput","beforeinput",null,n,O),N.push({event:Z,listeners:ct}),Z.data=nt)),x0(N,t,_,n,O)}Ah(N,e)})}function Ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ql(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=$n(t,n),r!=null&&s.unshift(Ms(t,r,o)),r=$n(t,e),r!=null&&s.push(Ms(t,r,o))),t.tag===3)return s;t=t.return}return[]}function M0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Uh(t,e,n,s,r){for(var o=e._reactName,h=[];n!==null&&n!==s;){var p=n,S=p.alternate,_=p.stateNode;if(p=p.tag,S!==null&&S===s)break;p!==5&&p!==26&&p!==27||_===null||(S=_,r?(_=$n(n,o),_!=null&&h.unshift(Ms(n,_,S))):r||(_=$n(n,o),_!=null&&h.push(Ms(n,_,S)))),n=n.return}h.length!==0&&t.push({event:e,listeners:h})}var B0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function xh(t){return(typeof t=="string"?t:""+t).replace(B0,`
`).replace(O0,"")}function _h(t,e){return e=xh(e),xh(t)===e}function Et(t,e,n,s,r,o){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||hn(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&hn(t,""+s);break;case"className":Ws(t,"class",s);break;case"tabIndex":Ws(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(t,n,s);break;case"style":xu(t,s,o);break;case"data":if(e!=="object"){Ws(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=$s(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(e!=="input"&&Et(t,e,"name",r.name,r,null),Et(t,e,"formEncType",r.formEncType,r,null),Et(t,e,"formMethod",r.formMethod,r,null),Et(t,e,"formTarget",r.formTarget,r,null)):(Et(t,e,"encType",r.encType,r,null),Et(t,e,"method",r.method,r,null),Et(t,e,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=$s(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Ie);break;case"onScroll":s!=null&&ot("scroll",t);break;case"onScrollEnd":s!=null&&ot("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(a(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=$s(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":ot("beforetoggle",t),ot("toggle",t),Js(t,"popover",s);break;case"xlinkActuate":je(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":je(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":je(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":je(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":je(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":je(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":je(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":je(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":je(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Js(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=rg.get(n)||n,Js(t,n,s))}}function vo(t,e,n,s,r,o){switch(n){case"style":xu(t,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(a(60));t.innerHTML=n}}break;case"children":typeof s=="string"?hn(t,s):(typeof s=="number"||typeof s=="bigint")&&hn(t,""+s);break;case"onScroll":s!=null&&ot("scroll",t);break;case"onScrollEnd":s!=null&&ot("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Ie);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vu.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),o=t[le]||null,o=o!=null?o[n]:null,typeof o=="function"&&t.removeEventListener(e,o,r),typeof s=="function")){typeof o!="function"&&o!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,r);break t}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Js(t,n,s)}}}function Jt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",t),ot("load",t);var s=!1,r=!1,o;for(o in n)if(n.hasOwnProperty(o)){var h=n[o];if(h!=null)switch(o){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,e));default:Et(t,e,o,h,n,null)}}r&&Et(t,e,"srcSet",n.srcSet,n,null),s&&Et(t,e,"src",n.src,n,null);return;case"input":ot("invalid",t);var p=o=h=r=null,S=null,_=null;for(s in n)if(n.hasOwnProperty(s)){var O=n[s];if(O!=null)switch(s){case"name":r=O;break;case"type":h=O;break;case"checked":S=O;break;case"defaultChecked":_=O;break;case"value":o=O;break;case"defaultValue":p=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,e));break;default:Et(t,e,s,O,n,null)}}Tu(t,o,p,S,_,h,r,!1);return;case"select":ot("invalid",t),s=h=o=null;for(r in n)if(n.hasOwnProperty(r)&&(p=n[r],p!=null))switch(r){case"value":o=p;break;case"defaultValue":h=p;break;case"multiple":s=p;default:Et(t,e,r,p,n,null)}e=o,n=h,t.multiple=!!s,e!=null?fn(t,!!s,e,!1):n!=null&&fn(t,!!s,n,!0);return;case"textarea":ot("invalid",t),o=r=s=null;for(h in n)if(n.hasOwnProperty(h)&&(p=n[h],p!=null))switch(h){case"value":s=p;break;case"defaultValue":r=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(a(91));break;default:Et(t,e,h,p,n,null)}wu(t,s,r,o);return;case"option":for(S in n)if(n.hasOwnProperty(S)&&(s=n[S],s!=null))switch(S){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Et(t,e,S,s,n,null)}return;case"dialog":ot("beforetoggle",t),ot("toggle",t),ot("cancel",t),ot("close",t);break;case"iframe":case"object":ot("load",t);break;case"video":case"audio":for(s=0;s<Rs.length;s++)ot(Rs[s],t);break;case"image":ot("error",t),ot("load",t);break;case"details":ot("toggle",t);break;case"embed":case"source":case"link":ot("error",t),ot("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in n)if(n.hasOwnProperty(_)&&(s=n[_],s!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,e));default:Et(t,e,_,s,n,null)}return;default:if(Ma(e)){for(O in n)n.hasOwnProperty(O)&&(s=n[O],s!==void 0&&vo(t,e,O,s,n,void 0));return}}for(p in n)n.hasOwnProperty(p)&&(s=n[p],s!=null&&Et(t,e,p,s,n,null))}function D0(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,h=null,p=null,S=null,_=null,O=null;for(M in n){var N=n[M];if(n.hasOwnProperty(M)&&N!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":S=N;default:s.hasOwnProperty(M)||Et(t,e,M,null,s,N)}}for(var R in s){var M=s[R];if(N=n[R],s.hasOwnProperty(R)&&(M!=null||N!=null))switch(R){case"type":o=M;break;case"name":r=M;break;case"checked":_=M;break;case"defaultChecked":O=M;break;case"value":h=M;break;case"defaultValue":p=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(a(137,e));break;default:M!==N&&Et(t,e,R,M,s,N)}}za(t,h,p,S,_,O,o,r);return;case"select":M=h=p=R=null;for(o in n)if(S=n[o],n.hasOwnProperty(o)&&S!=null)switch(o){case"value":break;case"multiple":M=S;default:s.hasOwnProperty(o)||Et(t,e,o,null,s,S)}for(r in s)if(o=s[r],S=n[r],s.hasOwnProperty(r)&&(o!=null||S!=null))switch(r){case"value":R=o;break;case"defaultValue":p=o;break;case"multiple":h=o;default:o!==S&&Et(t,e,r,o,s,S)}e=p,n=h,s=M,R!=null?fn(t,!!n,R,!1):!!s!=!!n&&(e!=null?fn(t,!!n,e,!0):fn(t,!!n,n?[]:"",!1));return;case"textarea":M=R=null;for(p in n)if(r=n[p],n.hasOwnProperty(p)&&r!=null&&!s.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Et(t,e,p,null,s,r)}for(h in s)if(r=s[h],o=n[h],s.hasOwnProperty(h)&&(r!=null||o!=null))switch(h){case"value":R=r;break;case"defaultValue":M=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(a(91));break;default:r!==o&&Et(t,e,h,r,s,o)}Au(t,R,M);return;case"option":for(var G in n)if(R=n[G],n.hasOwnProperty(G)&&R!=null&&!s.hasOwnProperty(G))switch(G){case"selected":t.selected=!1;break;default:Et(t,e,G,null,s,R)}for(S in s)if(R=s[S],M=n[S],s.hasOwnProperty(S)&&R!==M&&(R!=null||M!=null))switch(S){case"selected":t.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Et(t,e,S,R,s,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)R=n[I],n.hasOwnProperty(I)&&R!=null&&!s.hasOwnProperty(I)&&Et(t,e,I,null,s,R);for(_ in s)if(R=s[_],M=n[_],s.hasOwnProperty(_)&&R!==M&&(R!=null||M!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(137,e));break;default:Et(t,e,_,R,s,M)}return;default:if(Ma(e)){for(var Tt in n)R=n[Tt],n.hasOwnProperty(Tt)&&R!==void 0&&!s.hasOwnProperty(Tt)&&vo(t,e,Tt,void 0,s,R);for(O in s)R=s[O],M=n[O],!s.hasOwnProperty(O)||R===M||R===void 0&&M===void 0||vo(t,e,O,R,s,M);return}}for(var w in n)R=n[w],n.hasOwnProperty(w)&&R!=null&&!s.hasOwnProperty(w)&&Et(t,e,w,null,s,R);for(N in s)R=s[N],M=n[N],!s.hasOwnProperty(N)||R===M||R==null&&M==null||Et(t,e,N,R,s,M)}function zh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var r=n[s],o=r.transferSize,h=r.initiatorType,p=r.duration;if(o&&p&&zh(h)){for(h=0,p=r.responseEnd,s+=1;s<n.length;s++){var S=n[s],_=S.startTime;if(_>p)break;var O=S.transferSize,N=S.initiatorType;O&&zh(N)&&(S=S.responseEnd,h+=O*(S<p?1:(p-_)/(S-_)))}if(--s,e+=8*(o+h)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var bo=null,So=null;function jl(t){return t.nodeType===9?t:t.ownerDocument}function Rh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mh(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Co(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eo=null;function N0(){var t=window.event;return t&&t.type==="popstate"?t===Eo?!1:(Eo=t,!0):(Eo=null,!1)}var Bh=typeof setTimeout=="function"?setTimeout:void 0,X0=typeof clearTimeout=="function"?clearTimeout:void 0,Oh=typeof Promise=="function"?Promise:void 0,Y0=typeof queueMicrotask=="function"?queueMicrotask:typeof Oh<"u"?function(t){return Oh.resolve(null).then(t).catch(H0)}:Bh;function H0(t){setTimeout(function(){throw t})}function Mi(t){return t==="head"}function Dh(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(r),Gn(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")Bs(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Bs(n);for(var o=n.firstChild;o;){var h=o.nextSibling,p=o.nodeName;o[Wn]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=h}}else n==="body"&&Bs(t.ownerDocument.body);n=r}while(n);Gn(e)}function Lh(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function To(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":To(n),xa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function q0(t,e,n,s){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Wn])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(o=t.getAttribute("rel"),o==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(o!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(o=t.getAttribute("src"),(o!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===o)return t}else return t;if(t=Re(t.nextSibling),t===null)break}return null}function k0(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Re(t.nextSibling),t===null))return null;return t}function Nh(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Re(t.nextSibling),t===null))return null;return t}function Ao(t){return t.data==="$?"||t.data==="$~"}function wo(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function F0(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Re(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Uo=null;function Xh(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Re(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Yh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Hh(t,e,n){switch(e=jl(n),t){case"html":if(t=e.documentElement,!t)throw Error(a(452));return t;case"head":if(t=e.head,!t)throw Error(a(453));return t;case"body":if(t=e.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Bs(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);xa(t)}var Me=new Map,qh=new Set;function Il(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ci=H.d;H.d={f:G0,r:V0,D:Z0,C:Q0,L:j0,m:I0,X:W0,S:J0,M:K0};function G0(){var t=ci.f(),e=Hl();return t||e}function V0(t){var e=on(t);e!==null&&e.tag===5&&e.type==="form"?nf(e):ci.r(t)}var qn=typeof document>"u"?null:document;function kh(t,e,n){var s=qn;if(s&&typeof e=="string"&&e){var r=Te(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),qh.has(r)||(qh.add(r),t={rel:t,crossOrigin:n,href:e},s.querySelector(r)===null&&(e=s.createElement("link"),Jt(e,"link",t),Gt(e),s.head.appendChild(e)))}}function Z0(t){ci.D(t),kh("dns-prefetch",t,null)}function Q0(t,e){ci.C(t,e),kh("preconnect",t,e)}function j0(t,e,n){ci.L(t,e,n);var s=qn;if(s&&t&&e){var r='link[rel="preload"][as="'+Te(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Te(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Te(n.imageSizes)+'"]')):r+='[href="'+Te(t)+'"]';var o=r;switch(e){case"style":o=kn(t);break;case"script":o=Fn(t)}Me.has(o)||(t=v({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Me.set(o,t),s.querySelector(r)!==null||e==="style"&&s.querySelector(Os(o))||e==="script"&&s.querySelector(Ds(o))||(e=s.createElement("link"),Jt(e,"link",t),Gt(e),s.head.appendChild(e)))}}function I0(t,e){ci.m(t,e);var n=qn;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Te(s)+'"][href="'+Te(t)+'"]',o=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Fn(t)}if(!Me.has(o)&&(t=v({rel:"modulepreload",href:t},e),Me.set(o,t),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ds(o)))return}s=n.createElement("link"),Jt(s,"link",t),Gt(s),n.head.appendChild(s)}}}function J0(t,e,n){ci.S(t,e,n);var s=qn;if(s&&t){var r=un(s).hoistableStyles,o=kn(t);e=e||"default";var h=r.get(o);if(!h){var p={loading:0,preload:null};if(h=s.querySelector(Os(o)))p.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Me.get(o))&&xo(t,n);var S=h=s.createElement("link");Gt(S),Jt(S,"link",t),S._p=new Promise(function(_,O){S.onload=_,S.onerror=O}),S.addEventListener("load",function(){p.loading|=1}),S.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Jl(h,e,s)}h={type:"stylesheet",instance:h,count:1,state:p},r.set(o,h)}}}function W0(t,e){ci.X(t,e);var n=qn;if(n&&t){var s=un(n).hoistableScripts,r=Fn(t),o=s.get(r);o||(o=n.querySelector(Ds(r)),o||(t=v({src:t,async:!0},e),(e=Me.get(r))&&_o(t,e),o=n.createElement("script"),Gt(o),Jt(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(r,o))}}function K0(t,e){ci.M(t,e);var n=qn;if(n&&t){var s=un(n).hoistableScripts,r=Fn(t),o=s.get(r);o||(o=n.querySelector(Ds(r)),o||(t=v({src:t,async:!0,type:"module"},e),(e=Me.get(r))&&_o(t,e),o=n.createElement("script"),Gt(o),Jt(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(r,o))}}function Fh(t,e,n,s){var r=(r=at.current)?Il(r):null;if(!r)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=kn(n.href),n=un(r).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=kn(n.href);var o=un(r).hoistableStyles,h=o.get(t);if(h||(r=r.ownerDocument||r,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,h),(o=r.querySelector(Os(t)))&&!o._p&&(h.instance=o,h.state.loading=5),Me.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Me.set(t,n),o||$0(r,t,n,h.state))),e&&s===null)throw Error(a(528,""));return h}if(e&&s!==null)throw Error(a(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Fn(n),n=un(r).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function kn(t){return'href="'+Te(t)+'"'}function Os(t){return'link[rel="stylesheet"]['+t+"]"}function Gh(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function $0(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Jt(e,"link",n),Gt(e),t.head.appendChild(e))}function Fn(t){return'[src="'+Te(t)+'"]'}function Ds(t){return"script[async]"+t}function Vh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+Te(n.href)+'"]');if(s)return e.instance=s,Gt(s),s;var r=v({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Gt(s),Jt(s,"style",r),Jl(s,n.precedence,t),e.instance=s;case"stylesheet":r=kn(n.href);var o=t.querySelector(Os(r));if(o)return e.state.loading|=4,e.instance=o,Gt(o),o;s=Gh(n),(r=Me.get(r))&&xo(s,r),o=(t.ownerDocument||t).createElement("link"),Gt(o);var h=o;return h._p=new Promise(function(p,S){h.onload=p,h.onerror=S}),Jt(o,"link",s),e.state.loading|=4,Jl(o,n.precedence,t),e.instance=o;case"script":return o=Fn(n.src),(r=t.querySelector(Ds(o)))?(e.instance=r,Gt(r),r):(s=n,(r=Me.get(o))&&(s=v({},n),_o(s,r)),t=t.ownerDocument||t,r=t.createElement("script"),Gt(r),Jt(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(a(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(s=e.instance,e.state.loading|=4,Jl(s,n.precedence,t));return e.instance}function Jl(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,o=r,h=0;h<s.length;h++){var p=s[h];if(p.dataset.precedence===e)o=p;else if(o!==r)break}o?o.parentNode.insertBefore(t,o.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function xo(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function _o(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Wl=null;function Zh(t,e,n){if(Wl===null){var s=new Map,r=Wl=new Map;r.set(n,s)}else r=Wl,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var o=n[r];if(!(o[Wn]||o[Zt]||t==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var h=o.getAttribute(e)||"";h=t+h;var p=s.get(h);p?p.push(o):s.set(h,[o])}}return s}function Qh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function P0(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function jh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tm(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=kn(s.href),o=e.querySelector(Os(r));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Kl.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=o,Gt(o);return}o=e.ownerDocument||e,s=Gh(s),(r=Me.get(r))&&xo(s,r),o=o.createElement("link"),Gt(o);var h=o;h._p=new Promise(function(p,S){h.onload=p,h.onerror=S}),Jt(o,"link",s),n.instance=o}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=Kl.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var zo=0;function em(t,e){return t.stylesheets&&t.count===0&&Pl(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Pl(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4+e);0<t.imgBytes&&zo===0&&(zo=62500*L0());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Pl(t,t.stylesheets),t.unsuspend)){var o=t.unsuspend;t.unsuspend=null,o()}},(t.imgBytes>zo?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $l=null;function Pl(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$l=new Map,e.forEach(im,t),$l=null,Kl.call(t))}function im(t,e){if(!(e.state.loading&4)){var n=$l.get(t);if(n)var s=n.get(null);else{n=new Map,$l.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var h=r[o];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),s=h)}s&&n.set(null,s)}r=e.instance,h=r.getAttribute("data-precedence"),o=n.get(h)||s,o===s&&n.set(null,r),n.set(h,r),this.count++,s=Kl.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),o?o.parentNode.insertBefore(r,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Ls={$$typeof:F,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function nm(t,e,n,s,r,o,h,p,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ta(0),this.hiddenUpdates=Ta(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Ih(t,e,n,s,r,o,h,p,S,_,O,N){return t=new nm(t,e,n,h,S,_,O,N,p),e=1,o===!0&&(e|=24),o=ye(3,null,null,e),t.current=o,o.stateNode=t,e=rr(),e.refCount++,t.pooledCache=e,e.refCount++,o.memoizedState={element:s,isDehydrated:n,cache:e},fr(o),t}function Jh(t){return t?(t=bn,t):bn}function Wh(t,e,n,s,r,o){r=Jh(r),s.context===null?s.context=r:s.pendingContext=r,s=Si(e),s.payload={element:n},o=o===void 0?null:o,o!==null&&(s.callback=o),n=Ci(t,s,e),n!==null&&(fe(n,t,e),ds(n,t,e))}function Kh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ro(t,e){Kh(t,e),(t=t.alternate)&&Kh(t,e)}function $h(t){if(t.tag===13||t.tag===31){var e=Zi(t,67108864);e!==null&&fe(e,t,67108864),Ro(t,67108864)}}function Ph(t){if(t.tag===13||t.tag===31){var e=Ce();e=Aa(e);var n=Zi(t,e);n!==null&&fe(n,t,e),Ro(t,e)}}var ta=!0;function sm(t,e,n,s){var r=D.T;D.T=null;var o=H.p;try{H.p=2,Mo(t,e,n,s)}finally{H.p=o,D.T=r}}function lm(t,e,n,s){var r=D.T;D.T=null;var o=H.p;try{H.p=8,Mo(t,e,n,s)}finally{H.p=o,D.T=r}}function Mo(t,e,n,s){if(ta){var r=Bo(s);if(r===null)po(t,e,s,ea,n),ed(t,s);else if(rm(r,t,e,n,s))s.stopPropagation();else if(ed(t,s),e&4&&-1<am.indexOf(t)){for(;r!==null;){var o=on(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var h=qi(o.pendingLanes);if(h!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;h;){var S=1<<31-ge(h);p.entanglements[1]|=S,h&=~S}Fe(o),(yt&6)===0&&(Xl=he()+500,zs(0))}}break;case 31:case 13:p=Zi(o,2),p!==null&&fe(p,o,2),Hl(),Ro(o,2)}if(o=Bo(s),o===null&&po(t,e,s,ea,n),o===r)break;r=o}r!==null&&s.stopPropagation()}else po(t,e,s,null,n)}}function Bo(t){return t=Oa(t),Oo(t)}var ea=null;function Oo(t){if(ea=null,t=rn(t),t!==null){var e=f(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=d(e),t!==null)return t;t=null}else if(n===31){if(t=m(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ea=t,null}function td(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zd()){case ru:return 2;case ou:return 8;case Vs:case Qd:return 32;case uu:return 268435456;default:return 32}default:return 32}}var Do=!1,Bi=null,Oi=null,Di=null,Ns=new Map,Xs=new Map,Li=[],am="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ed(t,e){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Ns.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(e.pointerId)}}function Ys(t,e,n,s,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},e!==null&&(e=on(e),e!==null&&$h(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rm(t,e,n,s,r){switch(e){case"focusin":return Bi=Ys(Bi,t,e,n,s,r),!0;case"dragenter":return Oi=Ys(Oi,t,e,n,s,r),!0;case"mouseover":return Di=Ys(Di,t,e,n,s,r),!0;case"pointerover":var o=r.pointerId;return Ns.set(o,Ys(Ns.get(o)||null,t,e,n,s,r)),!0;case"gotpointercapture":return o=r.pointerId,Xs.set(o,Ys(Xs.get(o)||null,t,e,n,s,r)),!0}return!1}function id(t){var e=rn(t.target);if(e!==null){var n=f(e);if(n!==null){if(e=n.tag,e===13){if(e=d(n),e!==null){t.blockedOn=e,mu(t.priority,function(){Ph(n)});return}}else if(e===31){if(e=m(n),e!==null){t.blockedOn=e,mu(t.priority,function(){Ph(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bo(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Ba=s,n.target.dispatchEvent(s),Ba=null}else return e=on(n),e!==null&&$h(e),t.blockedOn=n,!1;e.shift()}return!0}function nd(t,e,n){ia(t)&&n.delete(e)}function om(){Do=!1,Bi!==null&&ia(Bi)&&(Bi=null),Oi!==null&&ia(Oi)&&(Oi=null),Di!==null&&ia(Di)&&(Di=null),Ns.forEach(nd),Xs.forEach(nd)}function na(t,e){t.blockedOn===e&&(t.blockedOn=null,Do||(Do=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,om)))}var sa=null;function sd(t){sa!==t&&(sa=t,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){sa===t&&(sa=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],r=t[e+2];if(typeof s!="function"){if(Oo(s||n)===null)continue;break}var o=on(n);o!==null&&(t.splice(e,3),e-=3,Mr(o,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Gn(t){function e(S){return na(S,t)}Bi!==null&&na(Bi,t),Oi!==null&&na(Oi,t),Di!==null&&na(Di,t),Ns.forEach(e),Xs.forEach(e);for(var n=0;n<Li.length;n++){var s=Li[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)id(n),n.blockedOn===null&&Li.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],o=n[s+1],h=r[le]||null;if(typeof o=="function")h||sd(n);else if(h){var p=null;if(o&&o.hasAttribute("formAction")){if(r=o,h=o[le]||null)p=h.formAction;else if(Oo(r)!==null)continue}else p=h.action;typeof p=="function"?n[s+1]=p:(n.splice(s,3),s-=3),sd(n)}}}function ld(){function t(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(h){return r=h})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Lo(t){this._internalRoot=t}la.prototype.render=Lo.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(a(409));var n=e.current,s=Ce();Wh(n,s,t,e,null,null)},la.prototype.unmount=Lo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wh(t.current,2,null,t,null,null),Hl(),e[an]=null}};function la(t){this._internalRoot=t}la.prototype.unstable_scheduleHydration=function(t){if(t){var e=gu();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Li.length&&e!==0&&e<Li[n].priority;n++);Li.splice(n,0,t),n===0&&id(t)}};var ad=i.version;if(ad!=="19.2.0")throw Error(a(527,ad,"19.2.0"));H.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(e),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var um={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{jn=aa.inject(um),de=aa}catch{}}return qs.createRoot=function(t,e){if(!u(t))throw Error(a(299));var n=!1,s="",r=df,o=gf,h=mf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(o=e.onCaughtError),e.onRecoverableError!==void 0&&(h=e.onRecoverableError)),e=Ih(t,1,!1,null,null,n,s,null,r,o,h,ld),t[an]=e.current,yo(t),new Lo(e)},qs.hydrateRoot=function(t,e,n){if(!u(t))throw Error(a(299));var s=!1,r="",o=df,h=gf,p=mf,S=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),e=Ih(t,1,!0,e,n??null,s,r,S,o,h,p,ld),e.context=Jh(null),n=e.current,s=Ce(),s=Aa(s),r=Si(s),r.callback=null,Ci(n,r,s),n=s,e.current.lanes=n,Jn(e,n),Fe(e),t[an]=e.current,yo(t),new la(e)},qs.version="19.2.0",qs}var yd;function Cm(){if(yd)return Xo.exports;yd=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(i){console.error(i)}}return c(),Xo.exports=Sm(),Xo.exports}var Em=Cm(),ra=Po(),lt=(c=>(c[c.Keyboard=0]="Keyboard",c[c.Mouse=1]="Mouse",c[c.Gamepad=2]="Gamepad",c[c.Touch=3]="Touch",c[c.TVRemote=4]="TVRemote",c))(lt||{}),ga=(c=>(c[c.KeyA=0]="KeyA",c[c.KeyB=1]="KeyB",c[c.KeyC=2]="KeyC",c[c.KeyD=3]="KeyD",c[c.KeyE=4]="KeyE",c[c.KeyF=5]="KeyF",c[c.KeyG=6]="KeyG",c[c.KeyH=7]="KeyH",c[c.KeyI=8]="KeyI",c[c.KeyJ=9]="KeyJ",c[c.KeyK=10]="KeyK",c[c.KeyL=11]="KeyL",c[c.KeyM=12]="KeyM",c[c.KeyN=13]="KeyN",c[c.KeyO=14]="KeyO",c[c.KeyP=15]="KeyP",c[c.KeyQ=16]="KeyQ",c[c.KeyR=17]="KeyR",c[c.KeyS=18]="KeyS",c[c.KeyT=19]="KeyT",c[c.KeyU=20]="KeyU",c[c.KeyV=21]="KeyV",c[c.KeyW=22]="KeyW",c[c.KeyX=23]="KeyX",c[c.KeyY=24]="KeyY",c[c.KeyZ=25]="KeyZ",c[c.Digit0=26]="Digit0",c[c.Digit1=27]="Digit1",c[c.Digit2=28]="Digit2",c[c.Digit3=29]="Digit3",c[c.Digit4=30]="Digit4",c[c.Digit5=31]="Digit5",c[c.Digit6=32]="Digit6",c[c.Digit7=33]="Digit7",c[c.Digit8=34]="Digit8",c[c.Digit9=35]="Digit9",c[c.ArrowUp=36]="ArrowUp",c[c.ArrowDown=37]="ArrowDown",c[c.ArrowLeft=38]="ArrowLeft",c[c.ArrowRight=39]="ArrowRight",c[c.Space=40]="Space",c[c.Enter=41]="Enter",c[c.Escape=42]="Escape",c[c.Backspace=43]="Backspace",c[c.Tab=44]="Tab",c[c.ShiftLeft=45]="ShiftLeft",c[c.ShiftRight=46]="ShiftRight",c[c.ControlLeft=47]="ControlLeft",c[c.ControlRight=48]="ControlRight",c[c.AltLeft=49]="AltLeft",c[c.AltRight=50]="AltRight",c[c.MetaLeft=51]="MetaLeft",c[c.MetaRight=52]="MetaRight",c[c.CapsLock=53]="CapsLock",c[c.Delete=54]="Delete",c[c.Insert=55]="Insert",c[c.Home=56]="Home",c[c.End=57]="End",c[c.PageUp=58]="PageUp",c[c.PageDown=59]="PageDown",c[c.F1=60]="F1",c[c.F2=61]="F2",c[c.F3=62]="F3",c[c.F4=63]="F4",c[c.F5=64]="F5",c[c.F6=65]="F6",c[c.F7=66]="F7",c[c.F8=67]="F8",c[c.F9=68]="F9",c[c.F10=69]="F10",c[c.F11=70]="F11",c[c.F12=71]="F12",c[c.Minus=72]="Minus",c[c.Equal=73]="Equal",c[c.BracketLeft=74]="BracketLeft",c[c.BracketRight=75]="BracketRight",c[c.Backslash=76]="Backslash",c[c.Semicolon=77]="Semicolon",c[c.Quote=78]="Quote",c[c.Comma=79]="Comma",c[c.Period=80]="Period",c[c.Slash=81]="Slash",c[c.Backquote=82]="Backquote",c[c.Numpad0=91]="Numpad0",c[c.Numpad1=92]="Numpad1",c[c.Numpad2=93]="Numpad2",c[c.Numpad3=94]="Numpad3",c[c.Numpad4=95]="Numpad4",c[c.Numpad5=96]="Numpad5",c[c.Numpad6=97]="Numpad6",c[c.Numpad7=98]="Numpad7",c[c.Numpad8=99]="Numpad8",c[c.Numpad9=100]="Numpad9",c[c.NumpadAdd=101]="NumpadAdd",c[c.NumpadSubtract=102]="NumpadSubtract",c[c.NumpadMultiply=103]="NumpadMultiply",c[c.NumpadDivide=104]="NumpadDivide",c[c.NumpadDecimal=105]="NumpadDecimal",c[c.NumpadEnter=106]="NumpadEnter",c[c.NumLock=107]="NumLock",c[c.PrintScreen=111]="PrintScreen",c[c.ScrollLock=112]="ScrollLock",c[c.Pause=113]="Pause",c[c.ContextMenu=114]="ContextMenu",c))(ga||{}),Ge=(c=>(c[c.LeftButton=0]="LeftButton",c[c.MiddleButton=1]="MiddleButton",c[c.RightButton=2]="RightButton",c[c.Button4=3]="Button4",c[c.Button5=4]="Button5",c[c.PositionX=100]="PositionX",c[c.PositionY=101]="PositionY",c[c.DeltaX=102]="DeltaX",c[c.DeltaY=103]="DeltaY",c[c.WheelDeltaY=104]="WheelDeltaY",c[c.WheelDeltaX=105]="WheelDeltaX",c))(Ge||{});function wd(c){switch(c.device){case lt.Keyboard:return!0;case lt.Mouse:return c.input<100;case lt.Gamepad:return c.input<100;case lt.Touch:return c.input<100;case lt.TVRemote:return c.input<100;default:return!1}}function Tm(c){return!wd(c)}class K{constructor(i=0,l=0){U(this,"x");U(this,"y");this.x=i,this.y=l}static zero(){return new K(0,0)}static one(){return new K(1,1)}static up(){return new K(0,-1)}static down(){return new K(0,1)}static left(){return new K(-1,0)}static right(){return new K(1,0)}add(i){return new K(this.x+i.x,this.y+i.y)}subtract(i){return new K(this.x-i.x,this.y-i.y)}multiply(i){return new K(this.x*i,this.y*i)}divide(i){if(i===0)throw new Error("Division by zero");return new K(this.x/i,this.y/i)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){const i=this.length();return i===0?K.zero():this.divide(i)}distance(i){return this.subtract(i).length()}distanceSquared(i){return this.subtract(i).lengthSquared()}dot(i){return this.x*i.x+this.y*i.y}cross(i){return this.x*i.y-this.y*i.x}angle(){return Math.atan2(this.y,this.x)}angleTo(i){return Math.atan2(i.y-this.y,i.x-this.x)}rotate(i){const l=Math.cos(i),a=Math.sin(i);return new K(this.x*l-this.y*a,this.x*a+this.y*l)}lerp(i,l){return new K(this.x+(i.x-this.x)*l,this.y+(i.y-this.y)*l)}clone(){return new K(this.x,this.y)}equals(i){return this.x===i.x&&this.y===i.y}toString(){return`Vector2(${this.x}, ${this.y})`}toArray(){return[this.x,this.y]}set(i,l){return this.x=i,this.y=l,this}copy(i){return this.x=i.x,this.y=i.y,this}addInPlace(i){return this.x+=i.x,this.y+=i.y,this}subtractInPlace(i){return this.x-=i.x,this.y-=i.y,this}multiplyInPlace(i){return this.x*=i,this.y*=i,this}divideInPlace(i){if(i===0)throw new Error("Division by zero");return this.x/=i,this.y/=i,this}normalizeInPlace(){const i=this.length();return i===0?(this.x=0,this.y=0):(this.x/=i,this.y/=i),this}}var Be=(c=>(c[c.Disconnected=0]="Disconnected",c[c.Connecting=1]="Connecting",c[c.Connected=2]="Connected",c[c.Reconnecting=3]="Reconnecting",c[c.Error=4]="Error",c))(Be||{});class Ud{constructor(i=0,l=60,a=40){U(this,"id");U(this,"origin");U(this,"size");U(this,"previousOrigin",new K(0,0));U(this,"previousSize",new K(0,0));U(this,"toDraw",[]);if(i<0||i>255)throw new Error(`Display ID must be between 0 and 255, got ${i}`);if(l<1||l>256)throw new Error(`Display sizeX must be between 1 and 256, got ${l}`);if(a<1||a>256)throw new Error(`Display sizeY must be between 1 and 256, got ${a}`);this.id=i,this.origin=new K(0,0),this.size=new K(l,a),this.toDraw=new Array(this.size.x*this.size.y).fill(null).map(()=>({charCode:0,fgColorCode:0,bgColorCode:0}))}getId(){return this.id}getOrigin(){return this.origin}setOrigin(i){this.origin=i}moveOrigin(i,l){this.origin.x+=i,this.origin.y+=l}hasOriginChanged(){return this.origin.x!==this.previousOrigin.x||this.origin.y!==this.previousOrigin.y}hasSizeChanged(){return this.size.x!==this.previousSize.x||this.size.y!==this.previousSize.y}hasChanged(){return this.hasOriginChanged()||this.hasSizeChanged()}resetChangeTracking(){this.previousOrigin.x=this.origin.x,this.previousOrigin.y=this.origin.y,this.previousSize.x=this.size.x,this.previousSize.y=this.size.y}getSize(){return this.size}setSize(i){if(i.x<1||i.x>256)throw new Error(`Display sizeX must be between 1 and 256, got ${i.x}`);if(i.y<1||i.y>256)throw new Error(`Display sizeY must be between 1 and 256, got ${i.y}`);this.size=i,this.toDraw=new Array(this.size.x*this.size.y).fill(null).map(()=>({charCode:0,fgColorCode:0,bgColorCode:0}))}getLayers(){return console.warn("Display.getLayers() est dprci - les layers sont au niveau User"),[]}addLayer(i){throw new Error("Display.addLayer() est dprci - utiliser user.addLayer()  la place")}removeLayer(i){throw new Error("Display.removeLayer() est dprci - utiliser user.removeLayer()  la place")}clearLayers(){throw new Error("Display.clearLayers() est dprci - utiliser user.clearLayers()  la place")}}const W=256,pd=65536,fi=255,Am=6,wm=6,Um=7,xm=5,_m=3,zm=1,Rm=6,Mm=4,Bm=5,Om=2,Dm=8,Lm=7,Nm=7,Xm=8,Ym=10,Hm=6,qm=3,km=6,Fm=4,Gm=3,Vm=3,Zm=4,Qm=5,jm=4,Im=2,Jm=5,Wm=3;class xd{constructor(i=65536){U(this,"data");U(this,"size");this.size=i,this.data=new Uint8Array(i*3),this.clear()}clear(){for(let i=0;i<this.size;i++){const l=i*3;this.data[l]=0,this.data[l+1]=fi,this.data[l+2]=fi}}set(i,l,a,u){const f=i*3;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=u}get(i){const l=i*3;return{charCode:this.data[l],fgColorCode:this.data[l+1],bgColorCode:this.data[l+2]}}getCharCode(i){return this.data[i*3]}getFgColorCode(i){return this.data[i*3+1]}getBgColorCode(i){return this.data[i*3+2]}getRawData(){return this.data}getSize(){return this.size}}class Km{constructor(i){U(this,"data");U(this,"size");this.size=i,this.data=new Uint8Array(i)}clear(){this.data.fill(0)}set(i,l){this.data[i]=l}get(i){return this.data[i]}getRawData(){return this.data}getSize(){return this.size}}var $t=(c=>(c[c.Rectangle=1]="Rectangle",c[c.Circle=2]="Circle",c[c.Line=3]="Line",c[c.Ellipse=4]="Ellipse",c[c.Triangle=5]="Triangle",c))($t||{}),Zo=(c=>(c.ADD="add",c.SET="set",c))(Zo||{});class $m{rasterizeOrders(i,l,a="add",u){a==="set"&&this.clearBuffer(l);for(const f of i)this.rasterizeOrder(f,l,u)}clearBuffer(i){i.clear()}rasterizeOrder(i,l,a){switch(i.type){case 1:this.rasterizeChar(i,l);break;case 2:this.rasterizeText(i,l);break;case 3:this.rasterizeSubFrame(i,l);break;case 4:this.rasterizeSubFrameMultiColor(i,l);break;case 5:this.rasterizeFullFrame(i,l);break;case 6:this.rasterizeFullFrameMultiColor(i,l);break;case 7:this.rasterizeSprite(i,l,a);break;case 8:this.rasterizeSpriteMultiColor(i,l,a);break;case 9:this.rasterizeColorMap(i,l);break;case 10:this.rasterizeShape(i,l);break;case 11:this.rasterizeDotCloud(i,l);break;case 12:this.rasterizeDotCloudMultiColor(i,l);break;case 13:this.rasterizeSpriteCloud(i,l,a);break;case 14:this.rasterizeSpriteCloudMultiColor(i,l,a);break;case 15:this.rasterizeSpriteCloudVaried(i,l,a);break;case 16:this.rasterizeSpriteCloudVariedMultiColor(i,l,a);break;case 19:this.rasterizeClear(i,l);break;case 20:this.rasterizeFillChar(i,l);break;case 21:this.rasterizeFillSprite(i,l,a);break;case 22:this.rasterizeFillSpriteMultiColor(i,l,a);break}}rasterizeChar(i,l){const{posX:a,posY:u,charCode:f,bgColorCode:d,fgColorCode:m}=i;if(!this.isInBounds(a,u))return;const y=u*W+a;l.set(y,f,m,d)}rasterizeText(i,l){const{posX:a,posY:u,text:f,bgColorCode:d,fgColorCode:m}=i;if(this.isInBounds(a,u))for(let y=0;y<f.length;y++){const g=a+y;if(g>=W)break;const b=u*W+g;l.set(b,f.charCodeAt(y),m,d)}}rasterizeSubFrame(i,l){const{posX:a,posY:u,sizeX:f,sizeY:d,frame:m,bgColorCode:y,fgColorCode:g}=i;for(let b=0;b<d;b++){const v=u+b;if(!(v<0||v>=W))for(let C=0;C<f;C++){const A=a+C;if(A<0||A>=W)continue;const z=b*f+C;if(z>=m.length)break;const B=v*W+A;l.set(B,m[z],g,y)}}}rasterizeSubFrameMultiColor(i,l){const{posX:a,posY:u,sizeX:f,sizeY:d,frame:m}=i;for(let y=0;y<d;y++){const g=u+y;if(!(g<0||g>=W))for(let b=0;b<f;b++){const v=a+b;if(v<0||v>=W)continue;const C=y*f+b;if(C>=m.length)break;const A=m[C],z=g*W+v;l.set(z,A.charCode,A.fgColorCode,A.bgColorCode)}}}rasterizeFullFrame(i,l){const{frame:a,bgColorCode:u,fgColorCode:f}=i;for(let d=0;d<pd&&d<a.length;d++)l.set(d,a[d],f,u)}rasterizeFullFrameMultiColor(i,l){const{frame:a}=i;for(let u=0;u<pd&&u<a.length;u++){const f=a[u];l.set(u,f.charCode,f.fgColorCode,f.bgColorCode)}}rasterizeColorMap(i,l){const{posX:a,posY:u,sizeX:f,sizeY:d,colorData:m}=i;for(let y=0;y<d;y++){const g=u+y;if(!(g<0||g>=W))for(let b=0;b<f;b++){const v=a+b;if(v<0||v>=W)continue;const C=y*f+b;if(C>=m.length)break;const A=g*W+v,z=m[C],B=l.getCharCode(A);l.set(A,B,z.fgColorCode,z.bgColorCode)}}}rasterizeShape(i,l){const{shapeType:a,shapeData:u}=i;switch(a){case $t.Rectangle:this.rasterizeRectangle(u,l);break;case $t.Circle:this.rasterizeCircle(u,l);break;case $t.Line:this.rasterizeLine(u,l);break;case $t.Ellipse:this.rasterizeEllipse(u,l);break;case $t.Triangle:this.rasterizeTriangle(u,l);break}}rasterizeRectangle(i,l){const{posX:a,posY:u,width:f,height:d,filled:m,charCode:y,bgColorCode:g,fgColorCode:b}=i;if(m)for(let v=0;v<d;v++){const C=u+v;if(!(C<0||C>=W))for(let A=0;A<f;A++){const z=a+A;if(z<0||z>=W)continue;const B=C*W+z;l.set(B,y,b,g)}}else{for(let v=0;v<f;v++)this.setCell(a+v,u,y,g,b,l),this.setCell(a+v,u+d-1,y,g,b,l);for(let v=0;v<d;v++)this.setCell(a,u+v,y,g,b,l),this.setCell(a+f-1,u+v,y,g,b,l)}}rasterizeCircle(i,l){const{centerX:a,centerY:u,radius:f,filled:d,charCode:m,bgColorCode:y,fgColorCode:g}=i;if(d)for(let b=-f;b<=f;b++){const v=u+b;if(!(v<0||v>=W))for(let C=-f;C<=f;C++){const A=a+C;if(!(A<0||A>=W)&&C*C+b*b<=f*f){const z=v*W+A;l.set(z,m,g,y)}}}else{let b=f,v=0,C=0;for(;b>=v;)this.setCell(a+b,u+v,m,y,g,l),this.setCell(a+v,u+b,m,y,g,l),this.setCell(a-v,u+b,m,y,g,l),this.setCell(a-b,u+v,m,y,g,l),this.setCell(a-b,u-v,m,y,g,l),this.setCell(a-v,u-b,m,y,g,l),this.setCell(a+v,u-b,m,y,g,l),this.setCell(a+b,u-v,m,y,g,l),C<=0&&(v+=1,C+=2*v+1),C>0&&(b-=1,C-=2*b+1)}}rasterizeLine(i,l){const{x1:a,y1:u,x2:f,y2:d,charCode:m,bgColorCode:y,fgColorCode:g}=i,b=Math.abs(f-a),v=Math.abs(d-u),C=a<f?1:-1,A=u<d?1:-1;let z=b-v,B=a,X=u;for(;this.setCell(B,X,m,y,g,l),!(B===f&&X===d);){const k=2*z;k>-v&&(z-=v,B+=C),k<b&&(z+=b,X+=A)}}rasterizeEllipse(i,l){const{centerX:a,centerY:u,radiusX:f,radiusY:d,filled:m,charCode:y,bgColorCode:g,fgColorCode:b}=i;if(m)for(let v=-d;v<=d;v++){const C=u+v;if(!(C<0||C>=W))for(let A=-f;A<=f;A++){const z=a+A;if(z<0||z>=W)continue;if(A*A/(f*f)+v*v/(d*d)<=1){const X=C*W+z;l.set(X,y,b,g)}}}else{const v=Math.max(f,d)*8;for(let C=0;C<v;C++){const A=2*Math.PI*C/v,z=Math.round(a+f*Math.cos(A)),B=Math.round(u+d*Math.sin(A));this.setCell(z,B,y,g,b,l)}}}rasterizeTriangle(i,l){const{x1:a,y1:u,x2:f,y2:d,x3:m,y3:y,filled:g,charCode:b,bgColorCode:v,fgColorCode:C}=i;if(g){const A=[{x:a,y:u},{x:f,y:d},{x:m,y}].sort((F,P)=>F.y-P.y),[z,B,X]=A,k=(F,P,dt)=>{const Mt=Math.round(Math.min(P,dt)),tt=Math.round(Math.max(P,dt));for(let zt=Mt;zt<=tt;zt++)if(zt>=0&&zt<W&&F>=0&&F<W){const Pt=F*W+zt;l.set(Pt,b,C,v)}},j=(F,P,dt,Mt,tt)=>Mt===P?dt:dt+(F-P)*(tt-dt)/(Mt-P);for(let F=z.y;F<=B.y;F++){const P=j(F,z.y,z.x,X.y,X.x),dt=j(F,z.y,z.x,B.y,B.x);k(F,P,dt)}for(let F=B.y+1;F<=X.y;F++){const P=j(F,z.y,z.x,X.y,X.x),dt=j(F,B.y,B.x,X.y,X.x);k(F,P,dt)}}else this.drawLineSegment(a,u,f,d,b,v,C,l),this.drawLineSegment(f,d,m,y,b,v,C,l),this.drawLineSegment(m,y,a,u,b,v,C,l)}drawLineSegment(i,l,a,u,f,d,m,y){const g=Math.abs(a-i),b=Math.abs(u-l),v=i<a?1:-1,C=l<u?1:-1;let A=g-b,z=i,B=l;for(;this.setCell(z,B,f,d,m,y),!(z===a&&B===u);){const X=2*A;X>-b&&(A-=b,z+=v),X<g&&(A+=g,B+=C)}}rasterizeDotCloud(i,l){const{charCode:a,bgColorCode:u,fgColorCode:f,positions:d}=i;for(const m of d)this.setCell(m.posX,m.posY,a,u,f,l)}rasterizeDotCloudMultiColor(i,l){const{dots:a}=i;for(const u of a)this.setCell(u.posX,u.posY,u.charCode,u.bgColorCode,u.fgColorCode,l)}rasterizeClear(i,l){const{charCode:a,bgColorCode:u,fgColorCode:f}=i;for(let d=0;d<l.getSize();d++)l.set(d,a,f,u)}rasterizeFillChar(i,l){const{patternWidth:a,patternHeight:u,pattern:f,bgColorCode:d,fgColorCode:m}=i;for(let y=0;y<W;y++)for(let g=0;g<W;g++){const b=g%a,C=y%u*a+b;if(C<f.length){const A=y*W+g;l.set(A,f[C],m,d)}}}rasterizeSprite(i,l,a){if(!a)return;const{posX:u,posY:f,spriteIndex:d,bgColorCode:m,fgColorCode:y}=i,g=a.getUnicolorSprite(d);if(!g)return;const b=g.data;for(let v=0;v<g.sizeY;v++)for(let C=0;C<g.sizeX;C++){const A=u+C,z=f+v;if(!this.isInBounds(A,z))continue;const B=v*g.sizeX+C,X=b.get(B);X===0||X===32||this.setCell(A,z,X,m,y,l)}}rasterizeSpriteMultiColor(i,l,a){if(!a)return;const{posX:u,posY:f,spriteIndex:d}=i,m=a.getMulticolorSprite(d);if(!m)return;const y=m.data;for(let g=0;g<m.sizeY;g++)for(let b=0;b<m.sizeX;b++){const v=u+b,C=f+g;if(!this.isInBounds(v,C))continue;const A=g*m.sizeX+b,z=y.getCharCode(A),B=y.getFgColorCode(A),X=y.getBgColorCode(A);z===0||z===32||this.setCell(v,C,z,X,B,l)}}rasterizeSpriteCloud(i,l,a){if(!a)return;const{spriteIndex:u,bgColorCode:f,fgColorCode:d,positions:m}=i,y=a.getUnicolorSprite(u);if(y)for(const g of m){const b=y.data;for(let v=0;v<y.sizeY;v++)for(let C=0;C<y.sizeX;C++){const A=g.posX+C,z=g.posY+v;if(!this.isInBounds(A,z))continue;const B=v*y.sizeX+C,X=b.get(B);X===0||X===32||this.setCell(A,z,X,f,d,l)}}}rasterizeSpriteCloudMultiColor(i,l,a){if(!a)return;const{spriteIndex:u,positions:f}=i,d=a.getMulticolorSprite(u);if(d)for(const m of f){const y=d.data;for(let g=0;g<d.sizeY;g++)for(let b=0;b<d.sizeX;b++){const v=m.posX+b,C=m.posY+g;if(!this.isInBounds(v,C))continue;const A=g*d.sizeX+b,z=y.getCharCode(A),B=y.getFgColorCode(A),X=y.getBgColorCode(A);z===0||z===32||this.setCell(v,C,z,X,B,l)}}}rasterizeSpriteCloudVaried(i,l,a){if(!a)return;const{sprites:u}=i;for(const f of u){const d=a.getUnicolorSprite(f.spriteIndex);if(!d)continue;const m=d.data;for(let y=0;y<d.sizeY;y++)for(let g=0;g<d.sizeX;g++){const b=f.posX+g,v=f.posY+y;if(!this.isInBounds(b,v))continue;const C=y*d.sizeX+g,A=m.get(C);A===0||A===32||this.setCell(b,v,A,f.bgColorCode,f.fgColorCode,l)}}}rasterizeSpriteCloudVariedMultiColor(i,l,a){if(!a)return;const{sprites:u}=i;for(const f of u){const d=a.getMulticolorSprite(f.spriteIndex);if(!d)continue;const m=d.data;for(let y=0;y<d.sizeY;y++)for(let g=0;g<d.sizeX;g++){const b=f.posX+g,v=f.posY+y;if(!this.isInBounds(b,v))continue;const C=y*d.sizeX+g,A=m.getCharCode(C),z=m.getFgColorCode(C),B=m.getBgColorCode(C);A===0||A===32||this.setCell(b,v,A,B,z,l)}}}rasterizeFillSprite(i,l,a){if(!a)return;const{spriteIndex:u,bgColorCode:f,fgColorCode:d}=i,m=a.getUnicolorSprite(u);if(!m)return;const y=m.data;for(let g=0;g<W;g++)for(let b=0;b<W;b++){const v=b%m.sizeX,A=g%m.sizeY*m.sizeX+v,z=y.get(A);if(z===0||z===32)continue;const B=g*W+b;l.set(B,z,d,f)}}rasterizeFillSpriteMultiColor(i,l,a){if(!a)return;const{spriteIndex:u}=i,f=a.getMulticolorSprite(u);if(!f)return;const d=f.data;for(let m=0;m<W;m++)for(let y=0;y<W;y++){const g=y%f.sizeX,v=m%f.sizeY*f.sizeX+g,C=d.getCharCode(v),A=d.getFgColorCode(v),z=d.getBgColorCode(v);if(C===0||C===32)continue;const B=m*W+y;l.set(B,C,A,z)}}setCell(i,l,a,u,f,d){if(!this.isInBounds(i,l))return;const m=l*W+i;d.set(m,a,f,u)}isInBounds(i,l){return i>=0&&i<W&&l>=0&&l<W}}const Vn=class Vn{constructor(i,l,a=!1){U(this,"id",0);U(this,"origin");U(this,"orders",[]);U(this,"zOrder",0);U(this,"data");U(this,"isStatic",!1);U(this,"hasSentStatic",!1);U(this,"spriteRegistry");U(this,"mode","server");U(this,"previousOrigin");U(this,"previousZOrder");U(this,"enabled",!0);U(this,"useSetMode",!1);U(this,"needsCommit",!1);this.origin=i,this.zOrder=l,this.isStatic=a,this.data=new xd(256*256),this.previousOrigin=new K(i.x,i.y),this.previousZOrder=l}setMode(i){this.mode=i}setSpriteRegistry(i){this.spriteRegistry=i}getOrders(){return this.orders}addOrders(i){this.orders.push(...i),this.useSetMode=!1,(this.mode==="client"||this.mode==="standalone")&&Vn.rasterizer.rasterizeOrders(i,this.data,Zo.ADD,this.spriteRegistry),this.isStatic&&(this.hasSentStatic=!1)}setOrders(i){this.orders=i,this.useSetMode=!0,(this.mode==="client"||this.mode==="standalone")&&Vn.rasterizer.rasterizeOrders(i,this.data,Zo.SET,this.spriteRegistry),this.isStatic&&(this.hasSentStatic=!1)}clearOrders(){this.orders=[],(this.mode==="client"||this.mode==="standalone")&&Vn.rasterizer.clearBuffer(this.data),this.isStatic&&(this.hasSentStatic=!1)}getOrigin(){return this.origin}setOrigin(i){this.origin=i}getZOrder(){return this.zOrder}setZOrder(i){this.zOrder=i}getId(){return this.id}setId(i){this.id=i}getData(){return this.data}getCellAt(i,l){return i<0||i>=256||l<0||l>=256?null:this.data.get(l*256+i)}setStatic(i){this.isStatic=i,i||(this.hasSentStatic=!1)}getStatic(){return this.isStatic}markStaticSent(){this.isStatic&&(this.hasSentStatic=!0)}hasBeenSent(){return this.hasSentStatic}forceResend(){this.hasSentStatic=!1}setEnabled(i){this.enabled=i}isEnabled(){return this.enabled}hasOriginChanged(){return this.origin.x!==this.previousOrigin.x||this.origin.y!==this.previousOrigin.y}hasZOrderChanged(){return this.zOrder!==this.previousZOrder}calculateUpdateFlags(){if(!this.enabled)return 0;let i=1;return this.useSetMode&&(i|=2),this.hasOriginChanged()&&(i|=4),this.hasZOrderChanged()&&(i|=8),(this.orders.length>0||this.needsCommit&&this.useSetMode)&&(i|=4),i}resetChangeTracking(){this.previousOrigin.x=this.origin.x,this.previousOrigin.y=this.origin.y,this.previousZOrder=this.zOrder}commit(){this.needsCommit=!0}getNeedsCommit(){return this.needsCommit}resetCommit(){this.needsCommit=!1}};U(Vn,"rasterizer",new $m);let ne=Vn;class Pm{constructor(){U(this,"axes",new Map);U(this,"buttons",new Map);U(this,"axisNameToId",new Map);U(this,"buttonNameToId",new Map);U(this,"version",1)}defineAxis(i,l,a=[],u=-1,f=1,d=0){if(i<0||i>255)throw new Error(`Axis bindingId must be between 0 and 255, got ${i}`);if(this.axes.has(i))throw new Error(`Axis bindingId ${i} is already defined`);if(this.axisNameToId.has(l)){const y=this.axisNameToId.get(l);throw new Error(`Axis name "${l}" is already defined with bindingId ${y}`)}const m={bindingId:i,name:l,min:u,max:f,defaultValue:d,sources:a};this.axes.set(i,m),this.axisNameToId.set(l,i),this.version++}defineButton(i,l,a=[],u=!1){if(i<0||i>255)throw new Error(`Button bindingId must be between 0 and 255, got ${i}`);if(this.buttons.has(i))throw new Error(`Button bindingId ${i} is already defined`);if(this.buttonNameToId.has(l)){const d=this.buttonNameToId.get(l);throw new Error(`Button name "${l}" is already defined with bindingId ${d}`)}const f={bindingId:i,name:l,defaultValue:u,sources:a};this.buttons.set(i,f),this.buttonNameToId.set(l,i),this.version++}evaluateAxis(i,l){const a=this.axes.get(i);if(!a)return 0;let u=0;for(const d of a.sources){let y=l.get(d.sourceId)??0;const g=d.deadzone??0;Math.abs(y)<g?y=0:y=(y>0?1:-1)*((Math.abs(y)-g)/(1-g));const b=d.scale??1;y*=b;const v=d.sensitivity??1;y*=v,d.invert&&(y=-y),u+=y}return Math.max(a.min,Math.min(a.max,u))}evaluateButton(i,l){const a=this.buttons.get(i);if(!a)return!1;for(const u of a.sources)if(l.get(u.sourceId)??!1)return!0;return!1}toLoadPacket(){const i={type:"input-binding",version:this.version,axes:Array.from(this.axes.values()),buttons:Array.from(this.buttons.values())};return JSON.stringify(i)}toLoadPacketObject(){return{type:"input-binding",version:this.version,axes:Array.from(this.axes.values()),buttons:Array.from(this.buttons.values())}}getAxisBindingId(i){return this.axisNameToId.get(i)??null}getButtonBindingId(i){return this.buttonNameToId.get(i)??null}getAxisName(i){var l;return((l=this.axes.get(i))==null?void 0:l.name)??null}getButtonName(i){var l;return((l=this.buttons.get(i))==null?void 0:l.name)??null}getAxisBinding(i){return this.axes.get(i)??null}getButtonBinding(i){return this.buttons.get(i)??null}hasAxis(i){return this.axes.has(i)}hasButton(i){return this.buttons.has(i)}getAxisCount(){return this.axes.size}getButtonCount(){return this.buttons.size}getAllAxes(){return Array.from(this.axes.values())}getAllButtons(){return Array.from(this.buttons.values())}getVersion(){return this.version}removeAxis(i){const l=this.axes.get(i);return l?(this.axes.delete(i),this.axisNameToId.delete(l.name),this.version++,!0):!1}removeButton(i){const l=this.buttons.get(i);return l?(this.buttons.delete(i),this.buttonNameToId.delete(l.name),this.version++,!0):!1}clearAxes(){this.axes.clear(),this.axisNameToId.clear(),this.version++}clearButtons(){this.buttons.clear(),this.buttonNameToId.clear(),this.version++}clear(){this.axes.clear(),this.axisNameToId.clear(),this.buttons.clear(),this.buttonNameToId.clear(),this.version=1}toString(){let i=`InputBindingRegistry (version ${this.version})
`;return i+=`Axes (${this.axes.size}):
`,this.axes.forEach(l=>{i+=`  [${l.bindingId}] ${l.name}: `,i+=`${l.min} to ${l.max} (default: ${l.defaultValue})
`}),i+=`Buttons (${this.buttons.size}):
`,this.buttons.forEach(l=>{i+=`  [${l.bindingId}] ${l.name}: `,i+=`(default: ${l.defaultValue})
`}),i}}function ty(c=0n){return{tick:c,axes:new Map,buttons:new Map,displayId:0,mouseX:0,mouseY:0,mouseOverDisplay:!1}}function ey(c){return c/127}function iy(c){return c===0?0:Math.ceil(c/8)}function ny(c,i){const l=i.getAllAxes().length,a=i.getAllButtons().length,u=iy(a),f=8+l+u+4;if(c.length<f)throw new Error(`Invalid compressed input packet: expected at least ${f} bytes (${l} axes + ${a} buttons), got ${c.length}`);const d=new DataView(c.buffer,c.byteOffset,c.byteLength);let m=0;const y=ty();y.tick=d.getBigUint64(m,!0),m+=8;for(let b=0;b<l;b++){const v=c[m],C=v>127?v-256:v,A=ey(C);y.axes.set(b,A),m+=1}for(let b=0;b<u;b++){const v=c[m];for(let C=0;C<8;C++){const A=b*8+C;if(A<a){const z=(v&1<<C)!==0;y.buttons.set(A,z)}}m+=1}y.displayId=c[m],m+=1,y.mouseX=c[m],m+=1,y.mouseY=c[m],m+=1;const g=c[m];return y.mouseOverDisplay=(g&1)!==0,m+=1,y}class sy{constructor(i,l){U(this,"enabled",!1);U(this,"currentStats",null);U(this,"_userId");U(this,"_userName");this._userId=i,this._userName=l}setEnabled(i){this.enabled=i,i||(this.currentStats=null)}isEnabled(){return this.enabled}get userId(){var i;return((i=this.currentStats)==null?void 0:i.userId)??this._userId}get userName(){var i;return((i=this.currentStats)==null?void 0:i.userName)??this._userName}get tick(){var i;return((i=this.currentStats)==null?void 0:i.tick)??0}get timestamp(){var i;return((i=this.currentStats)==null?void 0:i.timestamp)??0}get displayCount(){var i;return((i=this.currentStats)==null?void 0:i.displayCount)??0}get totalDisplayArea(){var i;return((i=this.currentStats)==null?void 0:i.totalDisplayArea)??0}get totalLayers(){var i;return((i=this.currentStats)==null?void 0:i.totalLayers)??0}get visibleLayers(){var i;return((i=this.currentStats)==null?void 0:i.visibleLayers)??0}get staticLayers(){var i;return((i=this.currentStats)==null?void 0:i.staticLayers)??0}get dynamicLayers(){var i;return((i=this.currentStats)==null?void 0:i.dynamicLayers)??0}get totalOrders(){var i;return((i=this.currentStats)==null?void 0:i.totalOrders)??0}get ordersByLayer(){var i;return((i=this.currentStats)==null?void 0:i.ordersByLayer)??new Map}get staticPacketSize(){var i;return((i=this.currentStats)==null?void 0:i.staticPacketSize)??0}get dynamicPacketSize(){var i;return((i=this.currentStats)==null?void 0:i.dynamicPacketSize)??0}get totalPacketSize(){var i;return((i=this.currentStats)==null?void 0:i.totalPacketSize)??0}get compressedPacketSize(){return Math.round(this.totalPacketSize*.25)}get hasInput(){var i;return((i=this.currentStats)==null?void 0:i.hasInput)??!1}get axisCount(){var i;return((i=this.currentStats)==null?void 0:i.axisCount)??0}get buttonCount(){var i;return((i=this.currentStats)==null?void 0:i.buttonCount)??0}startTick(i){this.enabled&&(this.currentStats={userId:this._userId,userName:this._userName,tick:i,timestamp:Date.now(),displayCount:0,totalDisplayArea:0,totalLayers:0,visibleLayers:0,staticLayers:0,dynamicLayers:0,totalOrders:0,ordersByLayer:new Map,staticPacketSize:0,dynamicPacketSize:0,totalPacketSize:0,hasInput:!1,axisCount:0,buttonCount:0})}recordDisplays(i,l){!this.enabled||!this.currentStats||(this.currentStats.displayCount=i,this.currentStats.totalDisplayArea=l)}recordLayers(i,l,a,u){!this.enabled||!this.currentStats||(this.currentStats.totalLayers=i,this.currentStats.visibleLayers=l,this.currentStats.staticLayers=a,this.currentStats.dynamicLayers=u)}recordLayerOrders(i,l){!this.enabled||!this.currentStats||(this.currentStats.totalOrders+=l,this.currentStats.ordersByLayer.set(i,l))}recordPacketSizes(i,l){!this.enabled||!this.currentStats||(this.currentStats.staticPacketSize=i,this.currentStats.dynamicPacketSize=l,this.currentStats.totalPacketSize=i+l)}recordInput(i,l,a){!this.enabled||!this.currentStats||(this.currentStats.hasInput=i,this.currentStats.axisCount=l,this.currentStats.buttonCount=a)}endTick(){}reset(){this.currentStats=null}}class ly{constructor(i,l,a){U(this,"displays",[]);U(this,"layers",[]);U(this,"spriteRegistry");U(this,"mode");U(this,"axes",new Map);U(this,"buttons",new Map);U(this,"mouseX",0);U(this,"mouseY",0);U(this,"mouseOver",!1);U(this,"mouseDisplayId",0);U(this,"inputBindings",new Pm);U(this,"stats");this.id=i,this.name=l,this.mode=a,this.stats=new sy(i,l)}setSpriteRegistry(i){this.spriteRegistry=i;for(const l of this.layers)l.setSpriteRegistry(i)}getDisplays(){return this.displays}addDisplay(i){this.displays.push(i)}removeDisplay(i){const l=this.displays.indexOf(i);return l!==-1?(this.displays.splice(l,1),!0):!1}clearDisplays(){this.displays=[]}getLayers(){return this.layers}addLayer(i){i.setMode(this.mode),this.layers.push(i),this.spriteRegistry&&i.setSpriteRegistry(this.spriteRegistry)}removeLayer(i){const l=this.layers.indexOf(i);return l!==-1?(this.layers.splice(l,1),!0):!1}clearLayers(){this.layers=[]}setMousePosition(i,l,a=!0){this.mouseX=Math.max(0,Math.min(255,i)),this.mouseY=Math.max(0,Math.min(255,l)),this.mouseOver=a}setAxis(i,l){const a=Math.max(-1,Math.min(1,l));this.axes.set(i,a)}getAxis(i){return this.axes.get(i)??0}setButton(i,l){this.buttons.set(i,l)}getButton(i){return this.buttons.get(i)??!1}getAxisNames(){return Array.from(this.axes.keys())}getButtonNames(){return Array.from(this.buttons.keys())}clearAxes(){this.axes.clear()}clearButtons(){this.buttons.clear()}getMouseDisplayInfo(){if(!this.mouseOver||this.displays.length===0)return null;const i=this.displays[0],l=0,a=this.mouseX,u=this.mouseY,f=i.getOrigin(),d=f.x+a,m=f.y+u;return{displayId:l,localX:a,localY:u,worldX:d,worldY:m}}getIsMouseOnADisplay(){return this.mouseOver}getMouseDisplayHover(){const i=this.getMouseDisplayInfo();return i?i.displayId:null}findLayerById(i){return this.layers.find(l=>l.getId()===i)??null}applyUpdate(i){this.updateDisplaysFromPacket(i.displays),this.updateLayersFromPacket(i.layers)}updateDisplaysFromPacket(i){for(const l of i){let a=this.displays[l.id];if(!a){for(a=new Ud(l.id,l.sizeX,l.sizeY);this.displays.length<=l.id;)this.displays.push(null);this.displays[l.id]=a}a.setOrigin(new K(l.originX,l.originY)),a.setSize(new K(l.sizeX,l.sizeY))}}updateLayersFromPacket(i){for(const l of i){let a=this.findLayerById(l.id);a||(a=new ne(new K(l.originX,l.originY),l.zIndex,!1),a.setId(l.id),a.setMode(this.mode),this.spriteRegistry&&a.setSpriteRegistry(this.spriteRegistry),this.addLayer(a)),l.updateFlags&1&&a.setOrigin(new K(l.originX,l.originY)),l.updateFlags&2&&a.setZOrder(l.zIndex),l.updateFlags&4&&a.setOrders(l.orders)}}defineAxisBinding(i,l,a=[],u=-1,f=1,d=0){this.inputBindings.defineAxis(i,l,a,u,f,d)}defineButtonBinding(i,l,a=[],u=!1){this.inputBindings.defineButton(i,l,a,u)}defineAxisBindings(i){i.forEach(({bindingId:l,name:a,sources:u,min:f,max:d,defaultValue:m})=>{this.defineAxisBinding(l,a,u??[],f,d,m)})}defineButtonBindings(i){i.forEach(({bindingId:l,name:a,sources:u,defaultValue:f})=>{this.defineButtonBinding(l,a,u??[],f)})}getInputBindingsLoadPacket(){return this.inputBindings.toLoadPacket()}applyInputBindingsLoadPacket(i){try{const l=JSON.parse(i);if(l.type!=="input-binding")throw new Error(`Invalid packet type: ${l.type}`);for(const a of l.axes)this.defineAxisBinding(a.bindingId,a.name,a.sources||[],a.min,a.max,a.defaultValue);for(const a of l.buttons)this.defineButtonBinding(a.bindingId,a.name,a.sources||[],a.defaultValue)}catch(l){throw console.error("[User] Failed to apply input bindings:",l),l}}getInputBindingRegistry(){return this.inputBindings}getStats(){return this.stats}getAxisBindingId(i){return this.inputBindings.getAxisBindingId(i)}getButtonBindingId(i){return this.inputBindings.getButtonBindingId(i)}decodeAndApplyCompressedInput(i){const l=ny(i,this.inputBindings),a=this.inputBindings.getAllAxes(),u=this.inputBindings.getAllButtons(),f=a.sort((m,y)=>m.bindingId-y.bindingId),d=u.sort((m,y)=>m.bindingId-y.bindingId);for(const[m,y]of l.axes)if(m<f.length){const g=f[m];this.setAxis(g.name,y)}for(const[m,y]of l.buttons)if(m<d.length){const g=d[m];this.setButton(g.name,y)}this.mouseX=l.mouseX,this.mouseY=l.mouseY,this.mouseOver=l.mouseOverDisplay,this.mouseDisplayId=l.displayId}}class st{constructor(i){U(this,"data");U(this,"view");this.data=new Uint8Array(i),this.view=new DataView(this.data.buffer)}static from(i){const l=new st(0);return l.data=i,l.view=new DataView(i.buffer,i.byteOffset,i.byteLength),l}static allocUnsafe(i){return new st(i)}get length(){return this.data.length}toUint8Array(){return this.data}readUInt8(i){return this.view.getUint8(i)}readInt8(i){return this.view.getInt8(i)}readUInt16BE(i){return this.view.getUint16(i,!1)}readInt16BE(i){return this.view.getInt16(i,!1)}readUInt16LE(i){return this.view.getUint16(i,!0)}readInt16LE(i){return this.view.getInt16(i,!0)}readUInt32BE(i){return this.view.getUint32(i,!1)}readInt32BE(i){return this.view.getInt32(i,!1)}readUInt32LE(i){return this.view.getUint32(i,!0)}readInt32LE(i){return this.view.getInt32(i,!0)}readBigUInt64BE(i){return this.view.getBigUint64(i,!1)}readBigInt64BE(i){return this.view.getBigInt64(i,!1)}readBigUInt64LE(i){return this.view.getBigUint64(i,!0)}readBigInt64LE(i){return this.view.getBigInt64(i,!0)}writeUInt8(i,l){this.view.setUint8(l,i)}writeInt8(i,l){this.view.setInt8(l,i)}writeUInt16BE(i,l){this.view.setUint16(l,i,!1)}writeInt16BE(i,l){this.view.setInt16(l,i,!1)}writeUInt16LE(i,l){this.view.setUint16(l,i,!0)}writeInt16LE(i,l){this.view.setInt16(l,i,!0)}writeUInt32BE(i,l){this.view.setUint32(l,i,!1)}writeInt32BE(i,l){this.view.setInt32(l,i,!1)}writeUInt32LE(i,l){this.view.setUint32(l,i,!0)}writeInt32LE(i,l){this.view.setInt32(l,i,!0)}writeBigUInt64BE(i,l){this.view.setBigUint64(l,i,!1)}writeBigInt64BE(i,l){this.view.setBigInt64(l,i,!1)}writeBigUInt64LE(i,l){this.view.setBigUint64(l,i,!0)}writeBigInt64LE(i,l){this.view.setBigInt64(l,i,!0)}copy(i,l=0,a=0,u=this.length){const f=this.data.subarray(a,u);return i.data.set(f,l),f.length}slice(i,l){const a=this.data.slice(i,l);return st.from(a)}subarray(i,l){const a=this.data.subarray(i,l);return st.from(a)}toBuffer(){return typeof Buffer<"u"&&Buffer.from?Buffer.from(this.data):this.data}static fromNodeBuffer(i){return i instanceof Uint8Array?st.from(i):st.from(new Uint8Array(i))}}class ay{encode(i){switch(i.type){case 1:return this.encodeCharOrder(i);case 2:return this.encodeTextOrder(i);case 3:return this.encodeSubFrameOrder(i);case 4:return this.encodeSubFrameMultiColorOrder(i);case 5:return this.encodeFullFrameOrder(i);case 6:return this.encodeFullFrameMultiColorOrder(i);case 7:return this.encodeSpriteOrder(i);case 8:return this.encodeSpriteMultiColorOrder(i);case 9:return this.encodeColorMapOrder(i);case 10:return this.encodeShapeOrder(i);case 11:return this.encodeDotCloudOrder(i);case 12:return this.encodeDotCloudMultiColorOrder(i);case 13:return this.encodeSpriteCloudOrder(i);case 14:return this.encodeSpriteCloudMultiColorOrder(i);case 15:return this.encodeSpriteCloudVariedOrder(i);case 16:return this.encodeSpriteCloudVariedMultiColorOrder(i);case 19:return this.encodeClearOrder(i);case 20:return this.encodeFillCharOrder(i);case 21:return this.encodeFillSpriteOrder(i);case 22:return this.encodeFillSpriteMultiColorOrder(i);case 32:return this.encodeTriggerSoundOrder(i);case 33:return this.encodeTriggerGlobalSoundOrder(i);default:throw new Error(`Unknown order type: ${i.type}`)}}encodeCharOrder(i){const l=st.allocUnsafe(Am);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.posX,a++),l.writeUInt8(i.posY,a++),l.writeUInt8(i.charCode,a++),l.writeUInt8(i.bgColorCode,a++),l.writeUInt8(i.fgColorCode,a++),l.toUint8Array()}encodeTextOrder(i){const l=new TextEncoder().encode(i.text),a=st.allocUnsafe(wm+l.length);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.posX,u++),a.writeUInt8(i.posY,u++),a.writeUInt8(l.length,u++);for(let f=0;f<l.length;f++)a.writeUInt8(l[f],u++);return a.writeUInt8(i.bgColorCode,u++),a.writeUInt8(i.fgColorCode,u++),a.toUint8Array()}encodeSubFrameOrder(i){const l=i.sizeX*i.sizeY,a=st.allocUnsafe(Um+l);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.posX,u++),a.writeUInt8(i.posY,u++),a.writeUInt8(i.sizeX,u++),a.writeUInt8(i.sizeY,u++),a.writeUInt8(i.bgColorCode,u++),a.writeUInt8(i.fgColorCode,u++);for(const f of i.frame)a.writeUInt8(f,u++);return a.toUint8Array()}encodeSubFrameMultiColorOrder(i){const l=i.sizeX*i.sizeY,a=st.allocUnsafe(xm+l*3);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.posX,u++),a.writeUInt8(i.posY,u++),a.writeUInt8(i.sizeX,u++),a.writeUInt8(i.sizeY,u++);for(const f of i.frame)a.writeUInt8(f.charCode,u++),a.writeUInt8(f.bgColorCode,u++),a.writeUInt8(f.fgColorCode,u++);return a.toUint8Array()}encodeFullFrameOrder(i){const l=i.frame.length,a=st.allocUnsafe(_m+l);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.bgColorCode,u++),a.writeUInt8(i.fgColorCode,u++);for(const f of i.frame)a.writeUInt8(f,u++);return a.toUint8Array()}encodeFullFrameMultiColorOrder(i){const l=i.frame.length,a=st.allocUnsafe(zm+l*3);let u=0;a.writeUInt8(i.type,u++);for(const f of i.frame)a.writeUInt8(f.charCode,u++),a.writeUInt8(f.bgColorCode,u++),a.writeUInt8(f.fgColorCode,u++);return a.toUint8Array()}encodeSpriteOrder(i){const l=st.allocUnsafe(Rm);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.posX,a++),l.writeUInt8(i.posY,a++),l.writeUInt8(i.spriteIndex,a++),l.writeUInt8(i.bgColorCode,a++),l.writeUInt8(i.fgColorCode,a++),l.toUint8Array()}encodeSpriteMultiColorOrder(i){const l=st.allocUnsafe(Mm);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.posX,a++),l.writeUInt8(i.posY,a++),l.writeUInt8(i.spriteIndex,a++),l.toUint8Array()}encodeColorMapOrder(i){const l=i.sizeX*i.sizeY,a=st.allocUnsafe(Bm+l*2);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.posX,u++),a.writeUInt8(i.posY,u++),a.writeUInt8(i.sizeX,u++),a.writeUInt8(i.sizeY,u++);for(const f of i.colorData)a.writeUInt8(f.bgColorCode,u++),a.writeUInt8(f.fgColorCode,u++);return a.toUint8Array()}encodeShapeOrder(i){const l=this.encodeShapeData(i.shapeType,i.shapeData),a=st.allocUnsafe(Om+l.length);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.shapeType,u++);for(let f=0;f<l.length;f++)a.writeUInt8(l[f],u++);return a.toUint8Array()}encodeShapeData(i,l){switch(i){case $t.Rectangle:{const a=st.allocUnsafe(Dm);let u=0;return a.writeUInt8(l.posX,u++),a.writeUInt8(l.posY,u++),a.writeUInt8(l.width,u++),a.writeUInt8(l.height,u++),a.writeUInt8(l.filled?1:0,u++),a.writeUInt8(l.charCode,u++),a.writeUInt8(l.bgColorCode,u++),a.writeUInt8(l.fgColorCode,u++),a.toUint8Array()}case $t.Circle:{const a=st.allocUnsafe(Lm);let u=0;return a.writeUInt8(l.centerX,u++),a.writeUInt8(l.centerY,u++),a.writeUInt8(l.radius,u++),a.writeUInt8(l.filled?1:0,u++),a.writeUInt8(l.charCode,u++),a.writeUInt8(l.bgColorCode,u++),a.writeUInt8(l.fgColorCode,u++),a.toUint8Array()}case $t.Line:{const a=st.allocUnsafe(Nm);let u=0;return a.writeUInt8(l.x1,u++),a.writeUInt8(l.y1,u++),a.writeUInt8(l.x2,u++),a.writeUInt8(l.y2,u++),a.writeUInt8(l.charCode,u++),a.writeUInt8(l.bgColorCode,u++),a.writeUInt8(l.fgColorCode,u++),a.toUint8Array()}case $t.Ellipse:{const a=st.allocUnsafe(Xm);let u=0;return a.writeUInt8(l.centerX,u++),a.writeUInt8(l.centerY,u++),a.writeUInt8(l.radiusX,u++),a.writeUInt8(l.radiusY,u++),a.writeUInt8(l.filled?1:0,u++),a.writeUInt8(l.charCode,u++),a.writeUInt8(l.bgColorCode,u++),a.writeUInt8(l.fgColorCode,u++),a.toUint8Array()}case $t.Triangle:{const a=st.allocUnsafe(Ym);let u=0;return a.writeUInt8(l.x1,u++),a.writeUInt8(l.y1,u++),a.writeUInt8(l.x2,u++),a.writeUInt8(l.y2,u++),a.writeUInt8(l.x3,u++),a.writeUInt8(l.y3,u++),a.writeUInt8(l.filled?1:0,u++),a.writeUInt8(l.charCode,u++),a.writeUInt8(l.bgColorCode,u++),a.writeUInt8(l.fgColorCode,u++),a.toUint8Array()}default:throw new Error(`Unknown shape type: ${i}`)}}encodeDotCloudOrder(i){const l=i.positions.length,a=st.allocUnsafe(Hm+l*2);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.charCode,u++),a.writeUInt8(i.bgColorCode,u++),a.writeUInt8(i.fgColorCode,u++),a.writeUInt16BE(l,u),u+=2;for(const f of i.positions)a.writeUInt8(f.posX,u++),a.writeUInt8(f.posY,u++);return a.toUint8Array()}encodeDotCloudMultiColorOrder(i){const l=i.dots.length,a=st.allocUnsafe(qm+2+l*5);let u=0;a.writeUInt8(i.type,u++),a.writeUInt16BE(l,u),u+=2;for(const f of i.dots)a.writeUInt8(f.charCode,u++),a.writeUInt8(f.bgColorCode,u++),a.writeUInt8(f.fgColorCode,u++),a.writeUInt8(f.posX,u++),a.writeUInt8(f.posY,u++);return a.toUint8Array()}encodeSpriteCloudOrder(i){const l=i.positions.length,a=st.allocUnsafe(km+2+l*2);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.spriteIndex,u++),a.writeUInt8(i.bgColorCode,u++),a.writeUInt8(i.fgColorCode,u++),a.writeUInt16BE(l,u),u+=2;for(const f of i.positions)a.writeUInt8(f.posX,u++),a.writeUInt8(f.posY,u++);return a.toUint8Array()}encodeSpriteCloudMultiColorOrder(i){const l=i.positions.length,a=st.allocUnsafe(Fm+2+l*2);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.spriteIndex,u++),a.writeUInt16BE(l,u),u+=2;for(const f of i.positions)a.writeUInt8(f.posX,u++),a.writeUInt8(f.posY,u++);return a.toUint8Array()}encodeSpriteCloudVariedOrder(i){const l=i.sprites.length,a=st.allocUnsafe(Gm+l*5);let u=0;a.writeUInt8(i.type,u++),a.writeUInt16BE(l,u),u+=2;for(const f of i.sprites)a.writeUInt8(f.spriteIndex,u++),a.writeUInt8(f.bgColorCode,u++),a.writeUInt8(f.fgColorCode,u++),a.writeUInt8(f.posX,u++),a.writeUInt8(f.posY,u++);return a.toUint8Array()}encodeSpriteCloudVariedMultiColorOrder(i){const l=i.sprites.length,a=st.allocUnsafe(Vm+l*3);let u=0;a.writeUInt8(i.type,u++),a.writeUInt16BE(l,u),u+=2;for(const f of i.sprites)a.writeUInt8(f.spriteIndex,u++),a.writeUInt8(f.posX,u++),a.writeUInt8(f.posY,u++);return a.toUint8Array()}encodeClearOrder(i){const l=st.allocUnsafe(Zm);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.charCode,a++),l.writeUInt8(i.bgColorCode,a++),l.writeUInt8(i.fgColorCode,a++),l.toUint8Array()}encodeFillCharOrder(i){const l=i.patternWidth*i.patternHeight,a=st.allocUnsafe(Qm+l);let u=0;a.writeUInt8(i.type,u++),a.writeUInt8(i.patternWidth,u++),a.writeUInt8(i.patternHeight,u++),a.writeUInt8(i.bgColorCode,u++),a.writeUInt8(i.fgColorCode,u++);for(const f of i.pattern)a.writeUInt8(f,u++);return a.toUint8Array()}encodeFillSpriteOrder(i){const l=st.allocUnsafe(jm);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.spriteIndex,a++),l.writeUInt8(i.bgColorCode,a++),l.writeUInt8(i.fgColorCode,a++),l.toUint8Array()}encodeFillSpriteMultiColorOrder(i){const l=st.allocUnsafe(Im);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.spriteIndex,a++),l.toUint8Array()}encodeTriggerSoundOrder(i){const l=st.allocUnsafe(Jm);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.posX,a++),l.writeUInt8(i.posY,a++),l.writeUInt8(i.soundId,a++),l.writeUInt8(i.loop?1:0,a++),l.toUint8Array()}encodeTriggerGlobalSoundOrder(i){const l=st.allocUnsafe(Wm);let a=0;return l.writeUInt8(i.type,a++),l.writeUInt8(i.soundId,a++),l.writeUInt8(i.loop?1:0,a++),l.toUint8Array()}}class ry{constructor(){U(this,"orderEncoder");this.orderEncoder=new ay}encode(i){const l=i.orders.map(y=>this.orderEncoder.encode(y)),a=9,u=l.reduce((y,g)=>y+g.length,0),f=a+u,d=st.allocUnsafe(f);let m=0;d.writeUInt16BE(i.id,m),m+=2,d.writeUInt8(i.updateFlags,m++),d.writeUInt8(i.zIndex,m++),d.writeUInt16BE(i.originX,m),m+=2,d.writeUInt16BE(i.originY,m),m+=2,d.writeUInt8(i.orders.length,m++);for(const y of l)st.from(y).copy(d,m),m+=y.length;return d.toUint8Array()}calculateSize(i){return 9+i.orders.reduce((u,f)=>u+this.orderEncoder.encode(f).length,0)}}class oy{constructor(){U(this,"layerEncoder");this.layerEncoder=new ry}encode(i){const l=i.layers.map(v=>this.layerEncoder.encode(v)),a=9,u=i.displays.length*7,f=2,d=l.reduce((v,C)=>v+C.length,0),m=a+u+f+d,y=st.allocUnsafe(m);let g=0;const b=typeof i.tick=="bigint"?i.tick:BigInt(i.tick);y.writeBigUInt64BE(b,g),g+=8,y.writeUInt8(i.displays.length,g),g+=1;for(const v of i.displays)y.writeUInt8(v.id,g++),y.writeUInt16BE(v.originX,g),g+=2,y.writeUInt16BE(v.originY,g),g+=2,y.writeUInt8(Math.max(1,Math.min(256,v.sizeX))-1,g++),y.writeUInt8(Math.max(1,Math.min(256,v.sizeY))-1,g++);y.writeUInt16BE(i.layers.length,g),g+=2;for(const v of l)st.from(v).copy(y,g),g+=v.length;return y.toUint8Array()}calculateSize(i){const a=i.displays.length*7,u=2,f=i.layers.reduce((d,m)=>d+this.layerEncoder.calculateSize(m),0);return 9+a+u+f}static createEmptyPacket(i){return{tick:typeof i=="bigint"?Number(i):i,displayCount:0,displays:[],layerCount:0,layers:[]}}encodeEmpty(i){const l=st.allocUnsafe(11),a=typeof i=="bigint"?i:BigInt(i);return l.writeBigUInt64BE(a,0),l.writeUInt8(0,8),l.writeUInt16BE(0,9),l.toUint8Array()}}class uy{constructor(i){U(this,"colorCache",new Array(256));this.engine=i,this.rebuildColorCache()}rebuildColorCache(){for(let i=0;i<256;i++){const l=this.engine.getColor(i);if(l){const a=l.a/255;this.colorCache[i]=`rgba(${l.r}, ${l.g}, ${l.b}, ${a})`}else this.colorCache[i]="rgba(0, 0, 0, 0)"}}getColorCSS(i){return this.colorCache[i]??this.colorCache[fi]}getColorEmission(i){const l=this.engine.getColor(i);return l?l.e:0}isLayerVisible(i,l){const a=i.x,u=i.x+i.width,f=i.y,d=i.y+i.height,m=l.x,y=l.x+W,g=l.y,b=l.y+W;return!(u<=m||a>=y||d<=g||f>=b)}rasterize(i,l){const a=new Array(i.width*i.height),u=this.getColorCSS(fi);for(let g=0;g<a.length;g++)a[g]={char:" ",fgColor:u,bgColor:u,fgEmission:0,bgEmission:0};const f=new Uint8Array(i.width*i.height),y=l.filter(g=>g.isEnabled()).filter(g=>this.isLayerVisible(i,g.getOrigin())).sort((g,b)=>b.getZOrder()-g.getZOrder());for(let g=0;g<i.height;g++)for(let b=0;b<i.width;b++){const v=g*i.width+b;if(f[v])continue;const C=i.x+b,A=i.y+g;for(const z of y){const B=z.getOrigin(),X=C-B.x,k=A-B.y;if(X<0||X>=W||k<0||k>=W)continue;const j=k*W+X,P=z.getData().get(j),dt=a[v];if(P.charCode!==0&&dt.char===" "&&(dt.char=String.fromCharCode(P.charCode)),P.fgColorCode!==fi&&dt.fgColor===u&&(dt.fgColor=this.getColorCSS(P.fgColorCode),dt.fgEmission=this.getColorEmission(P.fgColorCode)),P.bgColorCode!==fi){dt.bgColor===u&&(dt.bgColor=this.getColorCSS(P.bgColorCode),dt.bgEmission=this.getColorEmission(P.bgColorCode)),f[v]=1;break}}}return{width:i.width,height:i.height,cells:a}}rasterizeWithSortedLayers(i,l){const a=new Array(i.width*i.height),u=this.getColorCSS(fi);for(let m=0;m<a.length;m++)a[m]={char:" ",fgColor:u,bgColor:u,fgEmission:0,bgEmission:0};const f=new Uint8Array(i.width*i.height),d=l.filter(m=>this.isLayerVisible(i,m.getOrigin()));for(let m=0;m<i.height;m++)for(let y=0;y<i.width;y++){const g=m*i.width+y;if(f[g])continue;const b=i.x+y,v=i.y+m;for(const C of d){const A=C.getOrigin(),z=b-A.x,B=v-A.y;if(z<0||z>=W||B<0||B>=W)continue;const X=B*W+z,j=C.getData().get(X),F=a[g];if(j.charCode!==0&&F.char===" "&&(F.char=String.fromCharCode(j.charCode)),j.fgColorCode!==fi&&F.fgColor===u&&(F.fgColor=this.getColorCSS(j.fgColorCode),F.fgEmission=this.getColorEmission(j.fgColorCode)),j.bgColorCode!==fi){F.bgColor===u&&(F.bgColor=this.getColorCSS(j.bgColorCode),F.bgEmission=this.getColorEmission(j.bgColorCode)),f[g]=1;break}}}return{width:i.width,height:i.height,cells:a}}calculateIntersection(i,l){const a=i.x,u=i.x+i.width,f=i.y,d=i.y+i.height,m=l.x,y=l.x+W,g=l.y,b=l.y+W,v=Math.max(a,m),C=Math.min(u,y),A=Math.max(f,g),z=Math.min(d,b);return{visible:v<C&&A<z,originStart:{x:v-i.x,y:A-i.y},originEnd:{x:C-i.x,y:z-i.y},layerStart:{x:v-l.x,y:A-l.y},layerEnd:{x:C-l.x,y:z-l.y}}}}class cy{constructor(){U(this,"enabled",!1);U(this,"currentStats",null)}setEnabled(i){this.enabled=i,i||(this.currentStats=null)}isEnabled(){return this.enabled}get tick(){var i;return((i=this.currentStats)==null?void 0:i.tick)??0}get timestamp(){var i;return((i=this.currentStats)==null?void 0:i.timestamp)??0}get totalOrders(){var i;return((i=this.currentStats)==null?void 0:i.totalOrders)??0}get ordersByLayer(){var i;return((i=this.currentStats)==null?void 0:i.ordersByLayer)??new Map}get ordersByType(){var i;return((i=this.currentStats)==null?void 0:i.ordersByType)??new Map}get totalLayers(){var i;return((i=this.currentStats)==null?void 0:i.totalLayers)??0}get visibleLayers(){var i;return((i=this.currentStats)==null?void 0:i.visibleLayers)??0}get layersPerDisplay(){var i;return((i=this.currentStats)==null?void 0:i.layersPerDisplay)??new Map}get updatePacketSize(){var i;return((i=this.currentStats)==null?void 0:i.updatePacketSize)??0}get displayHeaderSize(){var i;return((i=this.currentStats)==null?void 0:i.displayHeaderSize)??0}get layerHeaderSize(){var i;return((i=this.currentStats)==null?void 0:i.layerHeaderSize)??0}get orderDataSize(){var i;return((i=this.currentStats)==null?void 0:i.orderDataSize)??0}get compressionRatio(){var i;return((i=this.currentStats)==null?void 0:i.compressionRatio)??0}get compressedPacketSize(){return Math.round(this.updatePacketSize*this.compressionRatio)}get totalCells(){var i;return((i=this.currentStats)==null?void 0:i.totalCells)??0}get nonEmptyCells(){var i;return((i=this.currentStats)==null?void 0:i.nonEmptyCells)??0}get cellsWithBackground(){var i;return((i=this.currentStats)==null?void 0:i.cellsWithBackground)??0}get rasterizationTimeMs(){var i;return((i=this.currentStats)==null?void 0:i.rasterizationTimeMs)??0}get encodingTimeMs(){var i;return((i=this.currentStats)==null?void 0:i.encodingTimeMs)??0}get packetSplit(){var i;return(i=this.currentStats)==null?void 0:i.packetSplit}get layerDetails(){var i;return(i=this.currentStats)==null?void 0:i.layerDetails}startTick(i){this.enabled&&(this.currentStats={tick:i,timestamp:Date.now(),totalOrders:0,ordersByLayer:new Map,ordersByType:new Map,totalLayers:0,visibleLayers:0,layersPerDisplay:new Map,updatePacketSize:0,displayHeaderSize:0,layerHeaderSize:0,orderDataSize:0,compressionRatio:0,totalCells:0,nonEmptyCells:0,cellsWithBackground:0,rasterizationTimeMs:0,encodingTimeMs:0})}recordLayerOrders(i,l){if(!(!this.enabled||!this.currentStats)){this.currentStats.totalOrders+=l.length,this.currentStats.ordersByLayer.set(i,l.length);for(const a of l){const u=this.currentStats.ordersByType.get(a.type)||0;this.currentStats.ordersByType.set(a.type,u+1)}}}recordLayers(i,l){!this.enabled||!this.currentStats||(this.currentStats.totalLayers=i,this.currentStats.visibleLayers=l)}recordDisplayLayers(i,l){!this.enabled||!this.currentStats||this.currentStats.layersPerDisplay.set(i,l)}recordUpdatePacketSize(i,l,a,u){!this.enabled||!this.currentStats||(this.currentStats.updatePacketSize=i,this.currentStats.displayHeaderSize=l,this.currentStats.layerHeaderSize=a,this.currentStats.orderDataSize=u,this.currentStats.compressionRatio=.25)}recordPacketSplit(i,l,a,u){!this.enabled||!this.currentStats||(this.currentStats.packetSplit={userId:i,displayCount:l,staticLayerCount:a,dynamicLayerCount:u})}recordLayerInfo(i,l,a,u){!this.enabled||!this.currentStats||(this.currentStats.layerDetails||(this.currentStats.layerDetails=[]),this.currentStats.layerDetails.push({layerId:i,isStatic:l,orderCount:a,updateFlags:u}))}recordRenderStats(i,l,a){!this.enabled||!this.currentStats||(this.currentStats.totalCells=i,this.currentStats.nonEmptyCells=l,this.currentStats.cellsWithBackground=a)}recordRasterizationTime(i){!this.enabled||!this.currentStats||(this.currentStats.rasterizationTimeMs=i)}recordEncodingTime(i){!this.enabled||!this.currentStats||(this.currentStats.encodingTimeMs=i)}endTick(){}reset(){this.currentStats=null}}class fy{constructor(){U(this,"unicolorSprites",new Map);U(this,"multicolorSprites",new Map)}loadUnicolorSprites(i){for(const l of i.sprites){const a=new Km(l.sizeX*l.sizeY);for(let f=0;f<l.data.length;f++)a.set(f,l.data[f]);const u={id:l.spriteId,sizeX:l.sizeX,sizeY:l.sizeY,data:a};this.unicolorSprites.set(u.id,u)}}loadMulticolorSprites(i){for(const l of i.sprites){const a=new xd(l.sizeX*l.sizeY);for(let f=0;f<l.data.length;f++){const d=l.data[f];a.set(f,d.charCode,d.fgColorId,d.bgColorId)}const u={id:l.spriteId,sizeX:l.sizeX,sizeY:l.sizeY,data:a};this.multicolorSprites.set(u.id,u)}}getUnicolorSprite(i){return this.unicolorSprites.get(i)}getMulticolorSprite(i){return this.multicolorSprites.get(i)}hasUnicolorSprite(i){return this.unicolorSprites.has(i)}hasMulticolorSprite(i){return this.multicolorSprites.has(i)}unloadUnicolorSprite(i){return this.unicolorSprites.delete(i)}unloadMulticolorSprite(i){return this.multicolorSprites.delete(i)}clearUnicolorSprites(){this.unicolorSprites.clear()}clearMulticolorSprites(){this.multicolorSprites.clear()}clearAll(){this.unicolorSprites.clear(),this.multicolorSprites.clear()}getUnicolorSpriteCount(){return this.unicolorSprites.size}getMulticolorSpriteCount(){return this.multicolorSprites.size}getTotalSpriteCount(){return this.unicolorSprites.size+this.multicolorSprites.size}}class _d{constructor(i,l){this.fontId=i,this.config=l}getFontId(){return this.fontId}getConfig(){return{...this.config}}getFontFamily(){return this.config.fontFamily}getFontSize(){return this.config.fontSize}getOffsetX(){return this.config.offsetX??0}getOffsetY(){return this.config.offsetY??0}getCharSpacing(){return this.config.charSpacing??0}getLineHeight(){return this.config.lineHeight??1.2}getFontWeight(){return this.config.fontWeight??"normal"}getFontStyle(){return this.config.fontStyle??"normal"}toCSS(){const i=[];i.push(`font-family: ${this.config.fontFamily}`),i.push(`font-size: ${this.config.fontSize}px`);const l=this.config.fontWeight??"normal";l!=="normal"&&i.push(`font-weight: ${l}`);const a=this.config.fontStyle??"normal";return a!=="normal"&&i.push(`font-style: ${a}`),i.join("; ")+";"}}class hy{constructor(i,l){this.fontId=i,this.config=l}getFontId(){return this.fontId}getConfig(){return{charWidth:this.config.charWidth,charHeight:this.config.charHeight,glyphs:new Map(this.config.glyphs)}}getCharWidth(){return this.config.charWidth}getCharHeight(){return this.config.charHeight}getGlyph(i){return this.config.glyphs.get(i)}hasGlyph(i){return this.config.glyphs.has(i)}getGlyphCount(){return this.config.glyphs.size}getCharCodes(){return Array.from(this.config.glyphs.keys())}}class dy{constructor(){U(this,"fonts",new Map)}loadFont(i,l){if(this.fonts.has(i))throw new Error(`WebFont with ID ${i} already exists`);const a=new _d(i,l);this.fonts.set(i,a)}getFont(i){return this.fonts.get(i)}hasFont(i){return this.fonts.has(i)}unloadFont(i){return this.fonts.delete(i)}clearFonts(){this.fonts.clear()}getFontIds(){return Array.from(this.fonts.keys()).sort((i,l)=>i-l)}getAllFonts(){return Array.from(this.fonts.entries()).sort((i,l)=>i[0]-l[0]).map(i=>i[1])}getFontCount(){return this.fonts.size}}class gy{constructor(){U(this,"fonts",new Map)}loadFont(i,l){if(this.fonts.has(i))throw new Error(`BitmapFont with ID ${i} already exists`);const a=new hy(i,l);this.fonts.set(i,a)}getFont(i){return this.fonts.get(i)}hasFont(i){return this.fonts.has(i)}unloadFont(i){return this.fonts.delete(i)}clearFonts(){this.fonts.clear()}getFontIds(){return Array.from(this.fonts.keys()).sort((i,l)=>i-l)}getAllFonts(){return Array.from(this.fonts.entries()).sort((i,l)=>i[0]-l[0]).map(i=>i[1])}getFontCount(){return this.fonts.size}}class my{constructor(i={}){U(this,"users",new Map);U(this,"mode");U(this,"maxUsers");U(this,"strictMode");U(this,"currentTick",0);U(this,"encoder");U(this,"displayRasterizer");U(this,"colorPalette",new Map);U(this,"stats",new cy);U(this,"spriteRegistry",new fy);U(this,"webFontRegistry",new dy);U(this,"bitmapFontRegistry",new gy);U(this,"activeWebFontId",0);U(this,"_renderCallCount",0);this.mode=i.mode??"server",this.maxUsers=i.maxUsers??64,this.strictMode=i.strictMode??!1,this.encoder=new oy,this.displayRasterizer=new uy(this),this.initializeDefaultPalette(),this.displayRasterizer.rebuildColorCache(),this.loadDefaultWebFont()}initializeDefaultPalette(){[{colorId:0,r:0,g:0,b:0,a:255},{colorId:1,r:0,g:0,b:170,a:255},{colorId:2,r:0,g:170,b:0,a:255},{colorId:3,r:0,g:170,b:170,a:255},{colorId:4,r:170,g:0,b:0,a:255},{colorId:5,r:170,g:0,b:170,a:255},{colorId:6,r:170,g:85,b:0,a:255},{colorId:7,r:170,g:170,b:170,a:255},{colorId:8,r:85,g:85,b:85,a:255},{colorId:9,r:85,g:85,b:255,a:255},{colorId:10,r:85,g:255,b:85,a:255},{colorId:11,r:85,g:255,b:255,a:255},{colorId:12,r:255,g:85,b:85,a:255},{colorId:13,r:255,g:85,b:255,a:255},{colorId:14,r:255,g:255,b:85,a:255},{colorId:15,r:255,g:255,b:255,a:255}].forEach(l=>{this.colorPalette.set(l.colorId,{r:l.r,g:l.g,b:l.b,a:l.a,e:0})}),this.colorPalette.set(255,{r:0,g:0,b:0,a:0,e:0})}getMode(){return this.mode}getMaxUsers(){return this.maxUsers}isStrictMode(){return this.strictMode}isServer(){return this.mode==="server"}isClient(){return this.mode==="client"}isStandalone(){return this.mode==="standalone"}createUser(i,l){if(this.users.has(i))throw new Error(`User with ID ${i} already exists`);if(this.mode==="server"&&this.users.size>=this.maxUsers)throw new Error(`Maximum number of users reached (${this.maxUsers}). Cannot create user ${i}`);if(this.mode==="client"&&this.users.size>=1)throw new Error(`Client mode only allows one user. Cannot create user ${i}`);const a=new ly(i,l,this.mode);return a.setSpriteRegistry(this.spriteRegistry),this.users.set(i,a),a}getUser(i){return this.users.get(i)??null}getUsers(){return Array.from(this.users.values())}hasUser(i){return this.users.has(i)}removeUser(i){return this.users.delete(i)}getUserCount(){return this.users.size}clearAllUsers(){this.users.clear()}setColor(i,l,a,u,f=255,d=0){if(i<0||i>255)throw new Error(`Color ID must be between 0 and 255, got ${i}`);if(i===255)throw new Error("Color ID 255 is reserved for transparency (COLOR_SKIP). Use IDs 0-254 for custom colors.");if(l<0||l>255||a<0||a>255||u<0||u>255||f<0||f>255||d<0||d>255)throw new Error("Color components must be between 0 and 255");this.colorPalette.set(i,{r:l,g:a,b:u,a:f,e:d})}getColor(i){return this.colorPalette.get(i)??null}loadPalette(i){for(const l of i)this.setColor(l.colorId,l.r,l.g,l.b,l.a,l.e??0);this.displayRasterizer.rebuildColorCache()}getPalette(){return new Map(this.colorPalette)}resetPalette(){this.colorPalette.clear(),this.initializeDefaultPalette()}getColorCSS(i){const l=this.getColor(i);if(!l)return null;const a=l.a/255;return`rgba(${l.r}, ${l.g}, ${l.b}, ${a})`}getUserIds(){return Array.from(this.users.keys())}forEachUser(i){this.users.forEach(i)}filterUsers(i){return this.getUsers().filter(i)}findUser(i){return this.getUsers().find(i)}getCurrentTick(){return this.currentTick}getStats(){return this.stats}endTick(){this.stats.isEnabled()&&this.stats.startTick(this.currentTick);const i=new Map;let l=0,a=0;return this.users.forEach((u,f)=>{const d=u.getLayers(),m=u.getDisplays();l+=d.length,u.getStats().isEnabled()&&u.getStats().startTick(this.currentTick);const y=m.map(A=>{const z=A.getOrigin(),B=A.getSize();return{id:A.getId(),originX:z.x,originY:z.y,sizeX:B.x,sizeY:B.y}});m.forEach(A=>A.resetChangeTracking());const g=[],b=[];d.forEach((A,z)=>{const B=A.getOrigin(),X=A.getOrders(),k=A.getStatic(),j=A.calculateUpdateFlags();A.resetChangeTracking(),A.getId()===0&&A.setId(z);const F={id:A.getId(),updateFlags:j,zIndex:A.getZOrder(),originX:B.x,originY:B.y,orderCount:X.length,orders:X};k?g.push(F):b.push(F)}),a+=g.length+b.length;const v=[...g,...b],C=this.encoder.encode({tick:this.currentTick,displayCount:y.length,displays:y,layerCount:v.length,layers:v});if(i.set(f,C),this.stats.isEnabled()){v.forEach((X,k)=>{this.stats.recordLayerOrders(k,X.orders)}),m.forEach((X,k)=>{this.stats.recordDisplayLayers(k,v.length)});const A=m.length*12,z=v.length*20,B=C.length-A-z;this.stats.recordUpdatePacketSize(C.length,A,z,B>0?B:0)}}),this.stats.isEnabled()&&(this.stats.recordLayers(l,a),this.stats.endTick()),this.currentTick++,i}endTickSplit(){this.stats.isEnabled()&&this.stats.startTick(this.currentTick);const i=new Map;let l=0,a=0;return this.users.forEach((u,f)=>{const d=u.getLayers(),m=u.getDisplays();l+=d.length,u.getStats().isEnabled()&&u.getStats().startTick(this.currentTick);const y=m.map(A=>{const z=A.getOrigin(),B=A.getSize();return{id:A.getId(),originX:z.x,originY:z.y,sizeX:B.x,sizeY:B.y}});m.forEach(A=>A.resetChangeTracking());const g=[],b=[];d.forEach((A,z)=>{if(!A.getNeedsCommit())return;const B=A.getOrigin(),X=A.getOrders(),k=A.getStatic(),j=A.calculateUpdateFlags();A.resetChangeTracking(),A.resetCommit(),A.getId()===0&&A.setId(z);const F={id:A.getId(),updateFlags:j,zIndex:A.getZOrder(),originX:B.x,originY:B.y,orderCount:X.length,orders:X};X.length>0&&this.stats.isEnabled()&&this.stats.recordLayerInfo(A.getId(),k,X.length,j),k?g.push(F):b.push(F)}),a+=g.length+b.length;let v=null,C=null;if(this.stats.isEnabled()&&this.stats.recordPacketSplit(f,y.length,g.length,b.length),g.length>0&&(v=this.encoder.encode({tick:this.currentTick,displayCount:y.length,displays:y,layerCount:g.length,layers:g})),C=this.encoder.encode({tick:this.currentTick,displayCount:y.length,displays:y,layerCount:b.length,layers:b}),i.set(f,{static:v,dynamic:C}),u.getStats().isEnabled()){const A=m.reduce((k,j)=>{const F=j.getSize();return k+F.x*F.y},0);u.getStats().recordDisplays(m.length,A),u.getStats().recordLayers(d.length,g.length+b.length,g.length,b.length),[...g,...b].forEach(k=>{u.getStats().recordLayerOrders(k.id,k.orders.length)});const z=(v==null?void 0:v.length)||0,B=(C==null?void 0:C.length)||0;u.getStats().recordPacketSizes(z,B);const X=u.getInputBindingRegistry();u.getStats().recordInput(!1,X.getAxisCount(),X.getButtonCount()),u.getStats().endTick()}if(this.stats.isEnabled()){const A=[...g,...b];A.forEach((j,F)=>{this.stats.recordLayerOrders(F,j.orders)}),m.forEach((j,F)=>{this.stats.recordDisplayLayers(F,A.length)});const z=((v==null?void 0:v.length)||0)+((C==null?void 0:C.length)||0),B=m.length*12,X=A.length*20,k=z-B-X;this.stats.recordUpdatePacketSize(z,B,X,k>0?k:0)}}),this.stats.isEnabled()&&(this.stats.recordLayers(l,a),this.stats.endTick()),this.currentTick++,i}getSnapshot(i){const l=this.getUser(i);if(!l)return null;const a=l.getDisplays(),u=l.getLayers(),f=a.map((m,y)=>{const g=m.getOrigin(),b=m.getSize();return{id:y,originX:g.x,originY:g.y,sizeX:b.x,sizeY:b.y}}),d=u.map((m,y)=>{const g=m.getOrigin(),b=m.getOrders(),v=7;return m.getId()===0&&m.setId(y),{id:m.getId(),updateFlags:v,zIndex:m.getZOrder(),originX:g.x,originY:g.y,orderCount:b.length,orders:b}});return this.encoder.encode({tick:this.currentTick,displayCount:f.length,displays:f,layerCount:d.length,layers:d})}resetTick(){this.currentTick=0}applyUpdatePacket(i,l){const a=this.getUser(i);if(!a){if(this.strictMode)throw new Error(`Cannot apply update packet: user ${i} does not exist`);return!1}return a.applyUpdate(l),!0}applyUpdatePacketBuffer(i,l){const{UpdatePacketDecoder:a}=require("./decoding/update/UpdatePacketDecoder"),f=new a().decode(l);return this.applyUpdatePacket(i,f)}applyLoadPacket(i){try{const{LoadDecoder:l}=require("./decoding/load/LoadDecoder"),{LoadType:a}=require("./types/load/LoadPacket"),d=new l().decode(i).load;switch(d.loadType){case a.ColorPalette:this.loadPalette(d.colors);break;case a.Sprite:this.loadUnicolorSprites(d);break;case a.MulticolorSprite:this.loadMulticolorSprites(d);break;case a.BitmapFont:{const m=this.getBitmapFontRegistry();m.hasFont(d.fontId)&&m.unloadFont(d.fontId),m.loadFont(d.fontId,{charWidth:d.width,charHeight:d.height,glyphs:new Map(d.characters.map(y=>[y.charCode,y.bitmap]))});break}case a.WebFont:{const m=this.getWebFontRegistry();m.hasFont(d.fontId)&&m.unloadFont(d.fontId),this.loadWebFontById(d.fontId,{fontFamily:d.fontFamily,fontSize:d.fontSize,offsetX:d.offsetX,offsetY:d.offsetY,charSpacing:d.charSpacing,lineHeight:d.lineHeight,fontWeight:d.fontWeight,fontStyle:d.fontStyle});break}case a.Sound:console.warn("[Core] Sound loading not yet implemented");break;default:return console.error(`[Core] Unknown LoadType: ${d.loadType}`),!1}return!0}catch(l){return console.error("[Core] Failed to apply LoadPacket:",l),!1}}generatePaletteLoadPacket(){const i=this.getPalette();if(i.size===0)return null;const{LoadEncoder:l}=require("./encoding/load/LoadEncoder"),{LoadType:a}=require("./types/load/LoadPacket"),u=new l,f=[];return i.forEach((d,m)=>{m!==255&&f.push({colorId:m,r:d.r,g:d.g,b:d.b,a:d.a,e:d.e})}),u.encode({loadType:a.ColorPalette,colors:f})}generateUnicolorSpritesLoadPacket(){const i=this.getSpriteRegistry(),l=[];for(let d=0;d<=255;d++){const m=i.getUnicolorSprite(d);if(m){const y=[];for(let g=0;g<m.sizeX*m.sizeY;g++)y.push(m.data.get(g));l.push({spriteId:m.id,sizeX:m.sizeX,sizeY:m.sizeY,data:y})}}if(l.length===0)return null;const{LoadEncoder:a}=require("./encoding/load/LoadEncoder"),{LoadType:u}=require("./types/load/LoadPacket");return new a().encode({loadType:u.Sprite,sprites:l})}generateMulticolorSpritesLoadPacket(){const i=this.getSpriteRegistry(),l=[];for(let d=0;d<=255;d++){const m=i.getMulticolorSprite(d);if(m){const y=[];for(let g=0;g<m.sizeX*m.sizeY;g++){const b=m.data.get(g);y.push({charCode:b.charCode,fgColorId:b.fgColorCode,bgColorId:b.bgColorCode})}l.push({spriteId:m.id,sizeX:m.sizeX,sizeY:m.sizeY,data:y})}}if(l.length===0)return null;const{LoadEncoder:a}=require("./encoding/load/LoadEncoder"),{LoadType:u}=require("./types/load/LoadPacket");return new a().encode({loadType:u.MulticolorSprite,sprites:l})}generateWebFontsLoadPackets(){const i=this.getWebFontRegistry(),l=i.getFontIds(),a=[],{LoadEncoder:u}=require("./encoding/load/LoadEncoder"),{LoadType:f}=require("./types/load/LoadPacket"),d=new u;for(const m of l){const y=i.getFont(m);if(y){const g=y.getConfig(),b=d.encode({loadType:f.WebFont,fontId:m,fontFamily:g.fontFamily,fontSize:g.fontSize,offsetX:g.offsetX,offsetY:g.offsetY,charSpacing:g.charSpacing,lineHeight:g.lineHeight,fontWeight:g.fontWeight,fontStyle:g.fontStyle});a.push(b)}}return a}generateBitmapFontsLoadPackets(){const i=this.getBitmapFontRegistry(),l=i.getFontIds(),a=[],{LoadEncoder:u}=require("./encoding/load/LoadEncoder"),{LoadType:f}=require("./types/load/LoadPacket"),d=new u;for(const m of l){const y=i.getFont(m);if(y){const g=[];for(let b=0;b<256;b++){const v=y.getGlyph(b);v&&g.push({charCode:b,bitmap:v})}if(g.length>0){const b=d.encode({loadType:f.BitmapFont,fontId:m,width:y.getCharWidth(),height:y.getCharHeight(),characters:g});a.push(b)}}}return a}generateAllLoadPackets(){const i=[],l=this.generatePaletteLoadPacket();l&&i.push(l);const a=this.generateUnicolorSpritesLoadPacket();a&&i.push(a);const u=this.generateMulticolorSpritesLoadPacket();u&&i.push(u);const f=this.generateWebFontsLoadPackets();i.push(...f);const d=this.generateBitmapFontsLoadPackets();return i.push(...d),i}applyInputBindingsLoadPacket(i,l){const a=this.getUser(i);if(!a){if(this.strictMode)throw new Error(`Cannot apply input bindings: user ${i} does not exist`);return!1}try{return a.applyInputBindingsLoadPacket(l),!0}catch(u){return console.error(`[Core] Failed to apply input bindings for user ${i}:`,u),!1}}getRenderState(i){const l=this.getUser(i);if(!l)return null;const a=l.getDisplays(),u=l.getLayers(),f=performance.now(),d=a.map(m=>{const y=m.getOrigin(),g=m.getSize();return this.displayRasterizer.rasterize({x:y.x,y:y.y,width:g.x,height:g.y},u)});return performance.now()-f,this._renderCallCount||(this._renderCallCount=0),this._renderCallCount++,{userId:l.id,userName:l.name,tick:this.currentTick,displays:d}}getAllRenderStates(){const i=new Map;return this.users.forEach((l,a)=>{const u=this.getRenderState(a);u&&i.set(a,u)}),i}enableStats(i){this.stats.setEnabled(i)}getStatsInstance(){return this.stats}resetStats(){this.stats.reset()}loadUnicolorSprites(i){this.spriteRegistry.loadUnicolorSprites(i)}loadMulticolorSprites(i){this.spriteRegistry.loadMulticolorSprites(i)}unloadUnicolorSprite(i){return this.spriteRegistry.unloadUnicolorSprite(i)}unloadMulticolorSprite(i){return this.spriteRegistry.unloadMulticolorSprite(i)}clearUnicolorSprites(){this.spriteRegistry.clearUnicolorSprites()}clearMulticolorSprites(){this.spriteRegistry.clearMulticolorSprites()}clearAllSprites(){this.spriteRegistry.clearAll()}getUnicolorSpriteCount(){return this.spriteRegistry.getUnicolorSpriteCount()}getMulticolorSpriteCount(){return this.spriteRegistry.getMulticolorSpriteCount()}getTotalSpriteCount(){return this.spriteRegistry.getTotalSpriteCount()}hasUnicolorSprite(i){return this.spriteRegistry.hasUnicolorSprite(i)}hasMulticolorSprite(i){return this.spriteRegistry.hasMulticolorSprite(i)}getSpriteRegistry(){return this.spriteRegistry}loadDefaultWebFont(){this.webFontRegistry.loadFont(0,{fontFamily:"Courier New",fontSize:16,offsetX:0,offsetY:0,charSpacing:0,lineHeight:1,fontWeight:"normal",fontStyle:"normal"}),this.activeWebFontId=0}loadWebFont(i){const l=i.getFontId(),a=i.getConfig();this.webFontRegistry.loadFont(l,a)}getWebFont(i){return this.webFontRegistry.getFont(i)??null}hasWebFont(i){return this.webFontRegistry.hasFont(i)}unloadWebFont(i){if(i===0)throw new Error("Cannot unload default font (fontId 0)");return this.webFontRegistry.unloadFont(i)}clearWebFonts(){this.webFontRegistry.clearFonts(),this.loadDefaultWebFont()}setActiveWebFont(i){if(!this.webFontRegistry.hasFont(i))throw new Error(`WebFont with ID ${i} does not exist`);this.activeWebFontId=i}getActiveWebFontId(){return this.activeWebFontId}getActiveWebFont(){const i=this.webFontRegistry.getFont(this.activeWebFontId);if(!i)throw new Error(`Active WebFont ${this.activeWebFontId} not found. This should not happen.`);return i}getWebFontCount(){return this.webFontRegistry.getFontCount()}getWebFontIds(){return this.webFontRegistry.getFontIds()}getWebFontRegistry(){return this.webFontRegistry}getBitmapFontRegistry(){return this.bitmapFontRegistry}loadWebFontById(i,l){const a=new _d(i,l);this.loadWebFont(a)}loadBitmapFontById(i,l){this.bitmapFontRegistry.loadFont(i,l)}getBitmapFont(i){return this.bitmapFontRegistry.getFont(i)??null}hasBitmapFont(i){return this.bitmapFontRegistry.hasFont(i)}unloadBitmapFont(i){return this.bitmapFontRegistry.unloadFont(i)}clearBitmapFonts(){this.bitmapFontRegistry.clearFonts()}getBitmapFontCount(){return this.bitmapFontRegistry.getFontCount()}getBitmapFontIds(){return this.bitmapFontRegistry.getFontIds()}}const yy=new Map([[32,new Uint8Array([0,0,0,0,0,0,0,0])],[33,new Uint8Array([24,24,24,24,24,0,24,0])],[34,new Uint8Array([108,108,108,0,0,0,0,0])],[35,new Uint8Array([54,54,127,54,127,54,54,0])],[36,new Uint8Array([12,63,104,62,11,126,24,0])],[37,new Uint8Array([96,102,12,24,48,102,6,0])],[38,new Uint8Array([56,108,108,56,109,102,59,0])],[39,new Uint8Array([24,24,24,0,0,0,0,0])],[40,new Uint8Array([12,24,48,48,48,24,12,0])],[41,new Uint8Array([48,24,12,12,12,24,48,0])],[42,new Uint8Array([0,102,60,255,60,102,0,0])],[43,new Uint8Array([0,24,24,126,24,24,0,0])],[44,new Uint8Array([0,0,0,0,0,24,24,48])],[45,new Uint8Array([0,0,0,126,0,0,0,0])],[46,new Uint8Array([0,0,0,0,0,24,24,0])],[47,new Uint8Array([0,6,12,24,48,96,0,0])],[48,new Uint8Array([60,102,110,126,118,102,60,0])],[49,new Uint8Array([24,56,24,24,24,24,126,0])],[50,new Uint8Array([60,102,6,12,24,48,126,0])],[51,new Uint8Array([60,102,6,28,6,102,60,0])],[52,new Uint8Array([12,28,60,108,126,12,12,0])],[53,new Uint8Array([126,96,124,6,6,102,60,0])],[54,new Uint8Array([28,48,96,124,102,102,60,0])],[55,new Uint8Array([126,6,12,24,48,48,48,0])],[56,new Uint8Array([60,102,102,60,102,102,60,0])],[57,new Uint8Array([60,102,102,62,6,12,56,0])],[58,new Uint8Array([0,0,24,24,0,24,24,0])],[59,new Uint8Array([0,0,24,24,0,24,24,48])],[60,new Uint8Array([12,24,48,96,48,24,12,0])],[61,new Uint8Array([0,0,126,0,126,0,0,0])],[62,new Uint8Array([48,24,12,6,12,24,48,0])],[63,new Uint8Array([60,102,12,24,24,0,24,0])],[64,new Uint8Array([60,102,110,106,110,96,60,0])],[65,new Uint8Array([60,102,102,126,102,102,102,0])],[66,new Uint8Array([124,102,102,124,102,102,124,0])],[67,new Uint8Array([60,102,96,96,96,102,60,0])],[68,new Uint8Array([120,108,102,102,102,108,120,0])],[69,new Uint8Array([126,96,96,124,96,96,126,0])],[70,new Uint8Array([126,96,96,124,96,96,96,0])],[71,new Uint8Array([60,102,96,110,102,102,60,0])],[72,new Uint8Array([102,102,102,126,102,102,102,0])],[73,new Uint8Array([126,24,24,24,24,24,126,0])],[74,new Uint8Array([62,12,12,12,12,108,56,0])],[75,new Uint8Array([102,108,120,112,120,108,102,0])],[76,new Uint8Array([96,96,96,96,96,96,126,0])],[77,new Uint8Array([99,119,127,107,99,99,99,0])],[78,new Uint8Array([102,102,118,126,110,102,102,0])],[79,new Uint8Array([60,102,102,102,102,102,60,0])],[80,new Uint8Array([124,102,102,124,96,96,96,0])],[81,new Uint8Array([60,102,102,102,106,108,54,0])],[82,new Uint8Array([124,102,102,124,108,102,102,0])],[83,new Uint8Array([60,102,96,60,6,102,60,0])],[84,new Uint8Array([126,24,24,24,24,24,24,0])],[85,new Uint8Array([102,102,102,102,102,102,60,0])],[86,new Uint8Array([102,102,102,102,102,60,24,0])],[87,new Uint8Array([99,99,99,107,127,119,99,0])],[88,new Uint8Array([102,102,60,24,60,102,102,0])],[89,new Uint8Array([102,102,102,60,24,24,24,0])],[90,new Uint8Array([126,6,12,24,48,96,126,0])],[91,new Uint8Array([60,48,48,48,48,48,60,0])],[92,new Uint8Array([0,96,48,24,12,6,0,0])],[93,new Uint8Array([60,12,12,12,12,12,60,0])],[94,new Uint8Array([24,60,102,0,0,0,0,0])],[95,new Uint8Array([0,0,0,0,0,0,255,0])],[96,new Uint8Array([48,24,12,0,0,0,0,0])],[97,new Uint8Array([0,0,60,6,62,102,62,0])],[98,new Uint8Array([96,96,124,102,102,102,124,0])],[99,new Uint8Array([0,0,60,102,96,102,60,0])],[100,new Uint8Array([6,6,62,102,102,102,62,0])],[101,new Uint8Array([0,0,60,102,126,96,60,0])],[102,new Uint8Array([28,54,48,124,48,48,48,0])],[103,new Uint8Array([0,0,62,102,102,62,6,60])],[104,new Uint8Array([96,96,124,102,102,102,102,0])],[105,new Uint8Array([24,0,56,24,24,24,60,0])],[106,new Uint8Array([12,0,28,12,12,12,108,56])],[107,new Uint8Array([96,96,102,108,120,108,102,0])],[108,new Uint8Array([56,24,24,24,24,24,60,0])],[109,new Uint8Array([0,0,102,127,107,107,99,0])],[110,new Uint8Array([0,0,124,102,102,102,102,0])],[111,new Uint8Array([0,0,60,102,102,102,60,0])],[112,new Uint8Array([0,0,124,102,102,124,96,96])],[113,new Uint8Array([0,0,62,102,102,62,6,6])],[114,new Uint8Array([0,0,108,118,96,96,96,0])],[115,new Uint8Array([0,0,62,96,60,6,124,0])],[116,new Uint8Array([48,48,124,48,48,54,28,0])],[117,new Uint8Array([0,0,102,102,102,102,62,0])],[118,new Uint8Array([0,0,102,102,102,60,24,0])],[119,new Uint8Array([0,0,99,107,107,127,54,0])],[120,new Uint8Array([0,0,102,60,24,60,102,0])],[121,new Uint8Array([0,0,102,102,102,62,6,60])],[122,new Uint8Array([0,0,126,12,24,48,126,0])],[123,new Uint8Array([14,24,24,112,24,24,14,0])],[124,new Uint8Array([24,24,24,24,24,24,24,0])],[125,new Uint8Array([112,24,24,14,24,24,112,0])],[126,new Uint8Array([49,107,70,0,0,0,0,0])]]);function py(c){const i=Array.from(yy.entries()).map(([l,a])=>({charCode:l,bitmap:a}));return{loadType:4,fontId:c,width:8,height:8,characters:i}}class Kt{static char(i,l,a,u=15,f=0){return{type:1,posX:i,posY:l,charCode:a,bgColorCode:f,fgColorCode:u}}static text(i,l,a,u=15,f=0){return{type:2,posX:i,posY:l,text:a,bgColorCode:f,fgColorCode:u}}static subFrame(i,l,a,u,f,d=15,m=0){return{type:3,posX:i,posY:l,sizeX:a,sizeY:u,frame:f,bgColorCode:m,fgColorCode:d}}static subFrameMultiColor(i,l,a,u,f){return{type:4,posX:i,posY:l,sizeX:a,sizeY:u,frame:f}}static fullFrame(i,l=15,a=0){return{type:5,frame:i,bgColorCode:a,fgColorCode:l}}static fullFrameMultiColor(i){return{type:6,frame:i}}static sprite(i,l,a,u=15,f=0){return{type:7,posX:i,posY:l,spriteIndex:a,bgColorCode:f,fgColorCode:u}}static spriteMultiColor(i,l,a){return{type:8,posX:i,posY:l,spriteIndex:a}}static colorMap(i,l,a,u,f){return{type:9,posX:i,posY:l,sizeX:a,sizeY:u,colorData:f}}static rectangle(i,l,a,u,f={}){return{type:10,shapeType:$t.Rectangle,shapeData:{posX:i,posY:l,width:a,height:u,filled:f.filled??!0,charCode:f.charCode??9608,bgColorCode:f.bgColor??0,fgColorCode:f.fgColor??15}}}static circle(i,l,a,u={}){return{type:10,shapeType:$t.Circle,shapeData:{centerX:i,centerY:l,radius:a,filled:u.filled??!0,charCode:u.charCode??9608,bgColorCode:u.bgColor??0,fgColorCode:u.fgColor??15}}}static line(i,l,a,u,f={}){return{type:10,shapeType:$t.Line,shapeData:{x1:i,y1:l,x2:a,y2:u,charCode:f.charCode??9608,bgColorCode:f.bgColor??0,fgColorCode:f.fgColor??15}}}static ellipse(i,l,a,u,f={}){return{type:10,shapeType:$t.Ellipse,shapeData:{centerX:i,centerY:l,radiusX:a,radiusY:u,filled:f.filled??!0,charCode:f.charCode??9608,bgColorCode:f.bgColor??0,fgColorCode:f.fgColor??15}}}static triangle(i,l,a,u,f,d,m={}){return{type:10,shapeType:$t.Triangle,shapeData:{x1:i,y1:l,x2:a,y2:u,x3:f,y3:d,filled:m.filled??!0,charCode:m.charCode??9608,bgColorCode:m.bgColor??0,fgColorCode:m.fgColor??15}}}static dotCloud(i,l,a=15,u=0){return{type:11,charCode:l,bgColorCode:u,fgColorCode:a,positions:i}}static dotCloudMultiColor(i){return{type:12,dots:i}}static spriteCloud(i,l,a=15,u=0){return{type:13,spriteIndex:i,bgColorCode:u,fgColorCode:a,positions:l}}static spriteCloudMultiColor(i,l){return{type:14,spriteIndex:i,positions:l}}static spriteCloudVaried(i){return{type:15,sprites:i}}static spriteCloudVariedMultiColor(i){return{type:16,sprites:i}}static clear(i=32,l=15,a=0){return{type:19,charCode:i,bgColorCode:a,fgColorCode:l}}static fillChar(i,l,a,u=15,f=0){return{type:20,patternWidth:i,patternHeight:l,pattern:a,bgColorCode:f,fgColorCode:u}}static fillSprite(i,l=15,a=0){return{type:21,spriteIndex:i,bgColorCode:a,fgColorCode:l}}static fillSpriteMultiColor(i){return{type:22,spriteIndex:i}}static boxWithBorder(i,l,a,u,f,d){return[this.rectangle(i+1,l+1,a-2,u-2,{charCode:d.charCode??9608,bgColor:d.bgColor??0,fgColor:d.fgColor??8,filled:!0}),this.rectangle(i,l,a,u,{charCode:f.charCode??9608,bgColor:f.bgColor??0,fgColor:f.fgColor??15,filled:!1})]}static grid(i,l,a,u,f,d,m={}){const y=[];for(let g=0;g<=f;g++)for(let b=0;b<=d;b++)y.push({posX:i+b*a,posY:l+g*u});return this.dotCloud(y,m.charCode??43,m.fgColor??15,m.bgColor??0)}}var vd;(c=>{function i(v,C){return(v&C)!==0}c.hasFlag=i;function l(v,C){return v|C}c.addFlag=l;function a(v,C){return v&~C}c.removeFlag=a;function u(...v){return v.reduce((C,A)=>C|A,0)}c.combine=u;function f(v){return(v&240)===0}c.isValid=f;function d(v){return i(v,1)}c.isEnabled=d;function m(v){return i(v,2)}c.isSetMode=m;function y(v){return i(v,4)}c.hasPositionChanged=y;function g(v){return i(v,8)}c.hasZOrderChanged=g;function b(v){if(v===0)return"Disabled";const C=[];return i(v,1)?C.push("Enabled"):C.push("Disabled"),i(v,2)?C.push("SET"):C.push("ADD"),i(v,4)&&C.push("Position"),i(v,8)&&C.push("ZOrder"),C.join(" | ")}c.describe=b})(vd||(vd={}));const Qo=["#000000","#800000","#008000","#808000","#000080","#800080","#008080","#c0c0c0","#808080","#ff0000","#00ff00","#ffff00","#0000ff","#ff00ff","#00ffff","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a80000","#00a800","#a8a800","#0000a8","#a800a8","#00a8a8","#a8a8a8","#545454","#fc5454","#54fc54","#fcfc54","#5454fc","#fc54fc","#54fcfc","#fcfcfc","#000000",...Array(192).fill("#808080")];function bd(c,i=Qo){return c<0||c>=i.length?"#ff00ff":i[c]}class vy{constructor(i,l){U(this,"canvas");U(this,"gl");U(this,"parentElement");U(this,"cells");U(this,"cols");U(this,"rows");U(this,"charWidth");U(this,"charHeight");U(this,"defaultFgColor");U(this,"defaultBgColor");U(this,"canvasBgColor");U(this,"bitmapFont");U(this,"atlasTexture",null);U(this,"atlasCanvas");U(this,"atlasColumns",0);U(this,"program",null);U(this,"brightProgram",null);U(this,"blurProgram",null);U(this,"compositeProgram",null);U(this,"positionBuffer",null);U(this,"texCoordBuffer",null);U(this,"colorBuffer",null);U(this,"emissionBuffer",null);U(this,"indexBuffer",null);U(this,"mainFramebuffer",null);U(this,"mainTexture",null);U(this,"brightFramebuffer",null);U(this,"brightTexture",null);U(this,"blurFramebuffer1",null);U(this,"blurTexture1",null);U(this,"blurFramebuffer2",null);U(this,"blurTexture2",null);U(this,"quadBuffer",null);U(this,"aPosition");U(this,"aTexCoord");U(this,"aColor");U(this,"aEmission");U(this,"uResolution",null);U(this,"uTexture",null);U(this,"fpsFrames",[]);U(this,"fpsLastTime",0);U(this,"showFPS");U(this,"resizeObserver");if(!i)throw new Error("TerminalGL: L'lment parent est requis");this.parentElement=i,this.cols=l.cols,this.rows=l.rows,this.charWidth=l.charWidth??8,this.charHeight=l.charHeight??8,this.defaultFgColor=l.defaultFgColor??"#ffffff",this.defaultBgColor=l.defaultBgColor??"#000000",this.canvasBgColor=l.canvasBgColor!==void 0?l.canvasBgColor:null,this.showFPS=l.showFPS??!0,this.canvas=document.createElement("canvas"),this.canvas.width=this.cols*this.charWidth,this.canvas.height=this.rows*this.charHeight,this.canvas.style.imageRendering="pixelated",this.canvas.style.imageRendering="crisp-edges",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.objectFit="contain";const a=this.canvas.getContext("webgl",{alpha:this.canvasBgColor===null,premultipliedAlpha:!1});if(!a)throw new Error("TerminalGL: WebGL non support");this.gl=a,this.cells=[];for(let u=0;u<this.rows;u++){this.cells[u]=[];for(let f=0;f<this.cols;f++)this.cells[u][f]={char:" ",fgColor:this.defaultFgColor,bgColor:this.defaultBgColor,fgEmission:0,bgEmission:0}}this.parentElement.appendChild(this.canvas),this.initWebGL(),this.setupResizeObserver()}initWebGL(){const i=this.gl,l=`
      attribute vec2 aPosition;
      attribute vec2 aTexCoord;
      attribute vec4 aColor;
      attribute float aEmission;
      
      uniform vec2 uResolution;
      
      varying vec2 vTexCoord;
      varying vec4 vColor;
      varying float vEmission;
      
      void main() {
        // Convertir de pixels en clip space (-1  1)
        vec2 clipSpace = (aPosition / uResolution) * 2.0 - 1.0;
        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
        
        vTexCoord = aTexCoord;
        vColor = aColor;
        vEmission = aEmission;
      }
    `,a=`
      precision mediump float;
      
      uniform sampler2D uTexture;
      
      varying vec2 vTexCoord;
      varying vec4 vColor;
      varying float vEmission;
      
      void main() {
        vec4 finalColor;
        
        // Si texCoord est (0, 0), c'est un background sans texture
        if (vTexCoord.x == 0.0 && vTexCoord.y == 0.0) {
          finalColor = vColor;
        } else {
          // Caractre textur : multiplier la couleur par l'alpha de la texture
          vec4 texColor = texture2D(uTexture, vTexCoord);
          finalColor = vec4(vColor.rgb * texColor.a, texColor.a);
        }
        
        // Appliquer l'mission de faon DOMINANTE mais PROGRESSIVE
        // L'mission doit crer une luminosit INDPENDANTE de la couleur de base
        if (vEmission > 0.0) {
          // Boost progressif de la couleur de base
          float boost = 1.0 + (vEmission * 0.5);
          finalColor.rgb *= boost;
          
          // CONTRIBUTION PRINCIPALE : ajout de blanc pur bas sur l'mission
          // Courbe lgrement acclre (puissance 1.3) pour progression douce
          float emissionContribution = pow(vEmission, 1.3) * 1.5;
          finalColor.rgb += vec3(emissionContribution);
        }
        
        gl_FragColor = finalColor;
      }
    `,u=this.compileShader(i.VERTEX_SHADER,l),f=this.compileShader(i.FRAGMENT_SHADER,a);if(!u||!f)throw new Error("Erreur de compilation des shaders");const d=i.createProgram();if(!d)throw new Error("Impossible de crer le programme WebGL");if(i.attachShader(d,u),i.attachShader(d,f),i.linkProgram(d),!i.getProgramParameter(d,i.LINK_STATUS)){const y=i.getProgramInfoLog(d);throw new Error("Erreur de linkage du programme: "+y)}this.program=d,this.aPosition=i.getAttribLocation(d,"aPosition"),this.aTexCoord=i.getAttribLocation(d,"aTexCoord"),this.aColor=i.getAttribLocation(d,"aColor"),this.aEmission=i.getAttribLocation(d,"aEmission"),this.uResolution=i.getUniformLocation(d,"uResolution"),this.uTexture=i.getUniformLocation(d,"uTexture"),this.positionBuffer=i.createBuffer(),this.texCoordBuffer=i.createBuffer(),this.colorBuffer=i.createBuffer(),this.emissionBuffer=i.createBuffer(),this.indexBuffer=i.createBuffer(),this.quadBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.quadBuffer);const m=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]);i.bufferData(i.ARRAY_BUFFER,m,i.STATIC_DRAW),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,this.canvas.width,this.canvas.height),this.initBloomShaders(),this.initBloomFramebuffers()}compileShader(i,l){const a=this.gl,u=a.createShader(i);return u?(a.shaderSource(u,l),a.compileShader(u),a.getShaderParameter(u,a.COMPILE_STATUS)?u:(console.error("Erreur de compilation du shader:",a.getShaderInfoLog(u)),a.deleteShader(u),null)):null}initBloomShaders(){const i=this.gl,l=`
      attribute vec2 aPosition;
      attribute vec2 aTexCoord;
      varying vec2 vTexCoord;
      
      void main() {
        gl_Position = vec4(aPosition, 0.0, 1.0);
        vTexCoord = aTexCoord;
      }
    `,a=`
      precision mediump float;
      uniform sampler2D uTexture;
      varying vec2 vTexCoord;
      
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        
        // Calculer la luminosit
        float brightness = dot(color.rgb, vec3(0.4, 0.4, 0.4));
        
        // Seuil TRS bas pour une courbe linaire ds les faibles missions
        float threshold = 0.5;
        float intensity = max(0.0, brightness - threshold) / (1.0 - threshold);
        
        // Amplifier pour compenser le seuil bas
        intensity = pow(intensity, 0.8); // Courbe lgrement exponentielle
        
        gl_FragColor = vec4(color.rgb * intensity, color.a);
      }
    `,u=`
      precision mediump float;
      uniform sampler2D uTexture;
      uniform vec2 uDirection; // (1,0) pour horizontal, (0,1) pour vertical
      uniform vec2 uResolution;
      varying vec2 vTexCoord;
      
      void main() {
        vec2 texelSize = 1.0 / uResolution;
        vec4 result = vec4(0.0);
        
        // Gaussian blur 17-tap avec rayon LARGE pour un gros halo
        float weights[9];
        weights[0] = 0.10855;
        weights[1] = 0.13135;
        weights[2] = 0.10406;
        weights[3] = 0.07216;
        weights[4] = 0.04380;
        weights[5] = 0.02328;
        weights[6] = 0.01083;
        weights[7] = 0.00441;
        weights[8] = 0.00157;
        
        result += texture2D(uTexture, vTexCoord) * weights[0];
        
        // Rayon multipli par 2 pour un halo encore plus large
        for(int i = 1; i < 9; i++) {
          vec2 offset = uDirection * texelSize * float(i) * 2.0;
          result += texture2D(uTexture, vTexCoord + offset) * weights[i];
          result += texture2D(uTexture, vTexCoord - offset) * weights[i];
        }
        
        gl_FragColor = result;
      }
    `,f=this.compileShader(i.VERTEX_SHADER,l),d=this.compileShader(i.FRAGMENT_SHADER,a);f&&d&&(this.brightProgram=i.createProgram(),this.brightProgram&&(i.attachShader(this.brightProgram,f),i.attachShader(this.brightProgram,d),i.linkProgram(this.brightProgram)));const m=this.compileShader(i.VERTEX_SHADER,l),y=this.compileShader(i.FRAGMENT_SHADER,u);m&&y&&(this.blurProgram=i.createProgram(),this.blurProgram&&(i.attachShader(this.blurProgram,m),i.attachShader(this.blurProgram,y),i.linkProgram(this.blurProgram)));const g=`
      precision mediump float;
      uniform sampler2D uScene;
      uniform sampler2D uBloom;
      varying vec2 vTexCoord;
      
      void main() {
        vec3 scene = texture2D(uScene, vTexCoord).rgb;
        vec3 bloom = texture2D(uBloom, vTexCoord).rgb;
        
        // Additive blending avec intensit TRS leve pour un halo massif
        vec3 result = scene + bloom * 6.0;
        
        gl_FragColor = vec4(result, 1.0);
      }
    `,b=this.compileShader(i.VERTEX_SHADER,l),v=this.compileShader(i.FRAGMENT_SHADER,g);b&&v&&(this.compositeProgram=i.createProgram(),this.compositeProgram&&(i.attachShader(this.compositeProgram,b),i.attachShader(this.compositeProgram,v),i.linkProgram(this.compositeProgram)))}initBloomFramebuffers(){const i=this.gl,l=this.canvas.width,a=this.canvas.height,u=(y,g)=>{const b=i.createTexture();return b?(i.bindTexture(i.TEXTURE_2D,b),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,y,g,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),b):null},f=y=>{const g=i.createFramebuffer();return g?(i.bindFramebuffer(i.FRAMEBUFFER,g),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,y,0),g):null};this.mainTexture=u(l,a),this.mainTexture&&(this.mainFramebuffer=f(this.mainTexture));const d=Math.floor(l/2),m=Math.floor(a/2);this.brightTexture=u(d,m),this.brightTexture&&(this.brightFramebuffer=f(this.brightTexture)),this.blurTexture1=u(d,m),this.blurTexture1&&(this.blurFramebuffer1=f(this.blurTexture1)),this.blurTexture2=u(d,m),this.blurTexture2&&(this.blurFramebuffer2=f(this.blurTexture2)),i.bindFramebuffer(i.FRAMEBUFFER,null)}setBitmapFont(i,l,a){this.bitmapFont=i,this.charWidth=l,this.charHeight=a,this.generateAtlas(),this.canvas.width=this.cols*this.charWidth,this.canvas.height=this.rows*this.charHeight,this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}generateAtlas(){if(!this.bitmapFont)return;const i=Array.from(this.bitmapFont.keys()).sort((y,g)=>y-g),l=i.length;this.atlasColumns=Math.ceil(Math.sqrt(l));const a=Math.ceil(l/this.atlasColumns),u=this.atlasColumns*this.charWidth,f=a*this.charHeight;this.atlasCanvas=document.createElement("canvas"),this.atlasCanvas.width=u,this.atlasCanvas.height=f;const d=this.atlasCanvas.getContext("2d");if(!d)throw new Error("Impossible de crer le contexte 2D pour l'atlas");d.clearRect(0,0,u,f),d.fillStyle="#ffffff";let m=0;for(const y of i){const g=this.bitmapFont.get(y);if(!g)continue;const b=m%this.atlasColumns,v=Math.floor(m/this.atlasColumns),C=b*this.charWidth,A=v*this.charHeight;for(let z=0;z<Math.min(g.length,this.charHeight);z++){const B=g[z];for(let X=0;X<this.charWidth;X++){const k=1<<7-X;B&k&&d.fillRect(C+X,A+z,1,1)}}m++}this.createAtlasTexture()}createAtlasTexture(){if(!this.atlasCanvas)return;const i=this.gl,l=i.createTexture();if(!l)throw new Error("Impossible de crer la texture");i.bindTexture(i.TEXTURE_2D,l),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this.atlasCanvas),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),this.atlasTexture=l}setCell(i,l,a=" ",u,f,d=0,m=0){l<0||l>=this.rows||i<0||i>=this.cols||(this.cells[l][i]={char:a||" ",fgColor:u??this.defaultFgColor,bgColor:f??this.defaultBgColor,fgEmission:Math.max(0,Math.min(255,d)),bgEmission:Math.max(0,Math.min(255,m))})}getCell(i,l){return l<0||l>=this.rows||i<0||i>=this.cols?null:this.cells[l][i]}clear(){for(let i=0;i<this.rows;i++)for(let l=0;l<this.cols;l++)this.cells[i][l]={char:" ",fgColor:this.defaultFgColor,bgColor:this.defaultBgColor,fgEmission:0,bgEmission:0}}render(){if(!this.bitmapFont||!this.atlasTexture||!this.program){console.warn("TerminalGL: Police bitmap non configure");return}const i=this.gl;if(this.mainFramebuffer&&(i.bindFramebuffer(i.FRAMEBUFFER,this.mainFramebuffer),i.viewport(0,0,this.canvas.width,this.canvas.height)),this.canvasBgColor!==null){const l=this.parseColor(this.canvasBgColor);i.clearColor(l[0],l[1],l[2],l[3])}else i.clearColor(0,0,0,0);if(i.clear(i.COLOR_BUFFER_BIT),this.renderBackgrounds(),this.renderCharacters(),this.brightProgram&&this.brightFramebuffer&&this.mainTexture){i.bindFramebuffer(i.FRAMEBUFFER,this.brightFramebuffer);const l=Math.floor(this.canvas.width/2),a=Math.floor(this.canvas.height/2);i.viewport(0,0,l,a),i.useProgram(this.brightProgram),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.mainTexture);const u=i.getUniformLocation(this.brightProgram,"uTexture");i.uniform1i(u,0),this.drawFullscreenQuad(this.brightProgram)}if(this.blurProgram&&this.blurFramebuffer1&&this.brightTexture){i.bindFramebuffer(i.FRAMEBUFFER,this.blurFramebuffer1);const l=Math.floor(this.canvas.width/2),a=Math.floor(this.canvas.height/2);i.viewport(0,0,l,a),i.useProgram(this.blurProgram),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.brightTexture);const u=i.getUniformLocation(this.blurProgram,"uTexture");i.uniform1i(u,0);const f=i.getUniformLocation(this.blurProgram,"uDirection");i.uniform2f(f,1,0);const d=i.getUniformLocation(this.blurProgram,"uResolution");i.uniform2f(d,l,a),this.drawFullscreenQuad(this.blurProgram)}if(this.blurProgram&&this.blurFramebuffer2&&this.blurTexture1){i.bindFramebuffer(i.FRAMEBUFFER,this.blurFramebuffer2);const l=Math.floor(this.canvas.width/2),a=Math.floor(this.canvas.height/2);i.viewport(0,0,l,a),i.useProgram(this.blurProgram),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.blurTexture1);const u=i.getUniformLocation(this.blurProgram,"uTexture");i.uniform1i(u,0);const f=i.getUniformLocation(this.blurProgram,"uDirection");i.uniform2f(f,0,1);const d=i.getUniformLocation(this.blurProgram,"uResolution");i.uniform2f(d,l,a),this.drawFullscreenQuad(this.blurProgram)}if(this.blurProgram&&this.blurFramebuffer1&&this.blurTexture2){i.bindFramebuffer(i.FRAMEBUFFER,this.blurFramebuffer1);const l=Math.floor(this.canvas.width/2),a=Math.floor(this.canvas.height/2);i.viewport(0,0,l,a),i.useProgram(this.blurProgram),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.blurTexture2);const u=i.getUniformLocation(this.blurProgram,"uTexture");i.uniform1i(u,0);const f=i.getUniformLocation(this.blurProgram,"uDirection");i.uniform2f(f,1,0);const d=i.getUniformLocation(this.blurProgram,"uResolution");i.uniform2f(d,l,a),this.drawFullscreenQuad(this.blurProgram)}if(this.blurProgram&&this.blurFramebuffer2&&this.blurTexture1){i.bindFramebuffer(i.FRAMEBUFFER,this.blurFramebuffer2);const l=Math.floor(this.canvas.width/2),a=Math.floor(this.canvas.height/2);i.viewport(0,0,l,a),i.useProgram(this.blurProgram),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.blurTexture1);const u=i.getUniformLocation(this.blurProgram,"uTexture");i.uniform1i(u,0);const f=i.getUniformLocation(this.blurProgram,"uDirection");i.uniform2f(f,0,1);const d=i.getUniformLocation(this.blurProgram,"uResolution");i.uniform2f(d,l,a),this.drawFullscreenQuad(this.blurProgram)}if(i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,this.canvas.width,this.canvas.height),this.compositeProgram&&this.mainTexture&&this.blurTexture2){i.useProgram(this.compositeProgram),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.mainTexture);const l=i.getUniformLocation(this.compositeProgram,"uScene");i.uniform1i(l,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this.blurTexture2);const a=i.getUniformLocation(this.compositeProgram,"uBloom");i.uniform1i(a,1),this.drawFullscreenQuad(this.compositeProgram)}else i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),this.renderBackgrounds(),this.renderCharacters();this.showFPS&&this.drawFPS()}drawFullscreenQuad(i){const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,this.quadBuffer);const a=l.getAttribLocation(i,"aPosition"),u=l.getAttribLocation(i,"aTexCoord");a!==-1&&(l.enableVertexAttribArray(a),l.vertexAttribPointer(a,2,l.FLOAT,!1,16,0)),u!==-1&&(l.enableVertexAttribArray(u),l.vertexAttribPointer(u,2,l.FLOAT,!1,16,8)),l.drawArrays(l.TRIANGLES,0,6),a!==-1&&l.disableVertexAttribArray(a),u!==-1&&l.disableVertexAttribArray(u)}renderBackgrounds(){const i=this.gl,l=[],a=[],u=[],f=[];let d=0;for(let m=0;m<this.rows;m++)for(let y=0;y<this.cols;y++){const g=this.cells[m][y];if(this.canvasBgColor!==null&&g.bgColor===this.defaultBgColor)continue;const b=y*this.charWidth,v=m*this.charHeight,C=this.charWidth,A=this.charHeight,z=this.parseColor(g.bgColor),B=g.bgEmission/255;for(let X=0;X<4;X++)u.push(B);l.push(b,v),a.push(z[0],z[1],z[2],z[3]),l.push(b+C,v),a.push(z[0],z[1],z[2],z[3]),l.push(b,v+A),a.push(z[0],z[1],z[2],z[3]),l.push(b+C,v+A),a.push(z[0],z[1],z[2],z[3]),f.push(d,d+1,d+2,d+2,d+1,d+3),d+=4}f.length!==0&&(i.useProgram(this.program),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(l),i.STATIC_DRAW),i.enableVertexAttribArray(this.aPosition),i.vertexAttribPointer(this.aPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(a),i.STATIC_DRAW),i.enableVertexAttribArray(this.aColor),i.vertexAttribPointer(this.aColor,4,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.emissionBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(u),i.STATIC_DRAW),i.enableVertexAttribArray(this.aEmission),i.vertexAttribPointer(this.aEmission,1,i.FLOAT,!1,0,0),i.disableVertexAttribArray(this.aTexCoord),i.vertexAttrib2f(this.aTexCoord,0,0),i.uniform2f(this.uResolution,this.canvas.width,this.canvas.height),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,null),i.uniform1i(this.uTexture,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),i.STATIC_DRAW),i.drawElements(i.TRIANGLES,f.length,i.UNSIGNED_SHORT,0))}renderCharacters(){const i=this.gl,l=[],a=[],u=[],f=[],d=[];let m=0;const y=this.atlasColumns*this.charWidth,g=Math.ceil(this.bitmapFont.size/this.atlasColumns)*this.charHeight,b=Array.from(this.bitmapFont.keys()).sort((v,C)=>v-C);for(let v=0;v<this.rows;v++)for(let C=0;C<this.cols;C++){const A=this.cells[v][C];if(A.char===" ")continue;const z=A.char.charCodeAt(0),B=b.indexOf(z);if(B===-1)continue;const X=C*this.charWidth,k=v*this.charHeight,j=this.charWidth,F=this.charHeight,P=B%this.atlasColumns,dt=Math.floor(B/this.atlasColumns),Mt=P*this.charWidth/y,tt=dt*this.charHeight/g,zt=(P+1)*this.charWidth/y,Pt=(dt+1)*this.charHeight/g,Rt=this.parseColor(A.fgColor),te=A.fgEmission/255;l.push(X,k),a.push(Mt,tt),u.push(Rt[0],Rt[1],Rt[2],Rt[3]),f.push(te),l.push(X+j,k),a.push(zt,tt),u.push(Rt[0],Rt[1],Rt[2],Rt[3]),f.push(te),l.push(X,k+F),a.push(Mt,Pt),u.push(Rt[0],Rt[1],Rt[2],Rt[3]),f.push(te),l.push(X+j,k+F),a.push(zt,Pt),u.push(Rt[0],Rt[1],Rt[2],Rt[3]),f.push(te),d.push(m,m+1,m+2,m+2,m+1,m+3),m+=4}if(d.length===0){this.showFPS&&this.drawFPS();return}i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(l),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.texCoordBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(a),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(u),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.emissionBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(f),i.STATIC_DRAW),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),i.STATIC_DRAW),i.useProgram(this.program),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.enableVertexAttribArray(this.aPosition),i.vertexAttribPointer(this.aPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.texCoordBuffer),i.enableVertexAttribArray(this.aTexCoord),i.vertexAttribPointer(this.aTexCoord,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),i.enableVertexAttribArray(this.aColor),i.vertexAttribPointer(this.aColor,4,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.emissionBuffer),i.enableVertexAttribArray(this.aEmission),i.vertexAttribPointer(this.aEmission,1,i.FLOAT,!1,0,0),i.uniform2f(this.uResolution,this.canvas.width,this.canvas.height),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.atlasTexture),i.uniform1i(this.uTexture,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),i.drawElements(i.TRIANGLES,d.length,i.UNSIGNED_SHORT,0),this.showFPS&&this.drawFPS()}parseColor(i){if(i.startsWith("#")){const l=i.slice(1);let a=0,u=0,f=0;return l.length===3?(a=parseInt(l[0]+l[0],16),u=parseInt(l[1]+l[1],16),f=parseInt(l[2]+l[2],16)):l.length===6&&(a=parseInt(l.slice(0,2),16),u=parseInt(l.slice(2,4),16),f=parseInt(l.slice(4,6),16)),[a/255,u/255,f/255,1]}if(i.startsWith("rgb")){const l=i.match(/rgba?\(([^)]+)\)/);if(l){const a=l[1].split(",").map(u=>parseFloat(u.trim()));return[a[0]/255,a[1]/255,a[2]/255,a[3]!==void 0?a[3]:1]}}if(i.startsWith("hsl")){const l=i.match(/hsla?\(([^)]+)\)/);if(l){const a=l[1].split(",").map(v=>parseFloat(v.trim())),u=a[0]/360,f=a[1]/100,d=a[2]/100,m=a[3]!==void 0?a[3]:1;let y,g,b;if(f===0)y=g=b=d;else{const v=(z,B,X)=>(X<0&&(X+=1),X>1&&(X-=1),X<.16666666666666666?z+(B-z)*6*X:X<.5?B:X<.6666666666666666?z+(B-z)*(.6666666666666666-X)*6:z),C=d<.5?d*(1+f):d+f-d*f,A=2*d-C;y=v(A,C,u+1/3),g=v(A,C,u),b=v(A,C,u-1/3)}return[y,g,b,m]}}return[1,1,1,1]}drawFPS(){const i=performance.now();if(this.fpsLastTime>0){const l=i-this.fpsLastTime;this.fpsFrames.push(l),this.fpsFrames.length>60&&this.fpsFrames.shift()}if(this.fpsLastTime=i,this.fpsFrames.length>0){const l=this.fpsFrames.reduce((d,m)=>d+m,0)/this.fpsFrames.length,a=Math.round(1e3/l),u=document.createElement("canvas");u.width=100,u.height=30;const f=u.getContext("2d");if(f){f.font="16px monospace",f.textBaseline="top";const d=`${a} FPS`,m=f.measureText(d);f.fillStyle="rgba(0, 0, 0, 0.7)",f.fillRect(0,0,m.width+8,20),a>=50?f.fillStyle="#00ff00":a>=30?f.fillStyle="#ffff00":f.fillStyle="#ff0000",f.fillText(d,4,2)}}}setShowFPS(i){this.showFPS=i}getCanvas(){return this.canvas}getGridSize(){return{cols:this.cols,rows:this.rows}}getCellWidth(){return this.charWidth}getCellHeight(){return this.charHeight}setupResizeObserver(){typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(()=>{this.updateCanvasSize()}),this.resizeObserver.observe(this.parentElement),this.updateCanvasSize())}updateCanvasSize(){const i=this.parentElement.clientWidth,l=this.parentElement.clientHeight;if(i===0||l===0)return;const a=this.cols*this.charWidth,u=this.rows*this.charHeight,f=a/u,d=i/l;let m,y;d>f?(y=l,m=y*f):(m=i,y=m/f);const g=m/a,b=y/u,v=Math.min(g,b),C=Math.round(v*4)/4;C>=.25&&(m=a*C,y=u*C),this.canvas.style.width=`${m}px`,this.canvas.style.height=`${y}px`,this.mainFramebuffer&&this.initBloomFramebuffers()}renderDisplayData(i){(i.sizeX!==this.cols||i.sizeY!==this.rows)&&this.resize(i.sizeX,i.sizeY);for(let l=0;l<i.cells.length;l++){const a=i.cells[l],u=l%i.sizeX,f=Math.floor(l/i.sizeX),d=bd(a.fgColor,Qo),m=bd(a.bgColor,Qo),y=String.fromCharCode(a.charCode);this.setCell(u,f,y,d,m)}this.render()}resize(i,l){if(!(i===this.cols&&l===this.rows)){this.cols=i,this.rows=l,this.cells=[];for(let a=0;a<this.rows;a++){this.cells[a]=[];for(let u=0;u<this.cols;u++)this.cells[a][u]={char:" ",fgColor:this.defaultFgColor,bgColor:this.defaultBgColor,fgEmission:0,bgEmission:0}}this.updateCanvasSize()}}getCols(){return this.cols}getRows(){return this.rows}isReady(){return!!(this.bitmapFont&&this.atlasTexture&&this.program&&this.gl)}destroy(){const i=this.gl;this.atlasTexture&&i.deleteTexture(this.atlasTexture),this.positionBuffer&&i.deleteBuffer(this.positionBuffer),this.texCoordBuffer&&i.deleteBuffer(this.texCoordBuffer),this.colorBuffer&&i.deleteBuffer(this.colorBuffer),this.emissionBuffer&&i.deleteBuffer(this.emissionBuffer),this.indexBuffer&&i.deleteBuffer(this.indexBuffer),this.program&&i.deleteProgram(this.program),this.resizeObserver&&this.resizeObserver.disconnect(),this.canvas.remove()}}class by{constructor(i=window){U(this,"targetElement");U(this,"keys",{});U(this,"callbacks",{});U(this,"boundHandlers");this.targetElement=i,this.boundHandlers={keyDown:this.handleKeyDown.bind(this),keyUp:this.handleKeyUp.bind(this)}}start(){this.targetElement.addEventListener("keydown",this.boundHandlers.keyDown),this.targetElement.addEventListener("keyup",this.boundHandlers.keyUp)}stop(){this.targetElement.removeEventListener("keydown",this.boundHandlers.keyDown),this.targetElement.removeEventListener("keyup",this.boundHandlers.keyUp)}reset(){this.keys={}}destroy(){this.stop(),this.reset()}isKeyPressed(i){return this.keys[i]||!1}getKeysPressed(){return Object.keys(this.keys).filter(i=>this.keys[i])}isAnyKeyPressed(){return Object.values(this.keys).some(i=>i)}setCallbacks(i){this.callbacks={...this.callbacks,...i}}clearCallbacks(){this.callbacks={}}isListening(){return!0}handleKeyDown(i){var a,u;const l=i.code;this.keys[l]||(this.keys[l]=!0,(u=(a=this.callbacks).onKeyDown)==null||u.call(a,l,i))}handleKeyUp(i){var a,u;const l=i.code;this.keys[l]=!1,(u=(a=this.callbacks).onKeyUp)==null||u.call(a,l,i)}}class Sy{constructor(i=window){U(this,"targetElement");U(this,"mouseButtons",{left:!1,middle:!1,right:!1});U(this,"mousePosition",K.zero());U(this,"mouseDelta",K.zero());U(this,"wheelDelta",0);U(this,"callbacks",{});U(this,"boundHandlers");this.targetElement=i,this.boundHandlers={mouseDown:this.handleMouseDown.bind(this),mouseUp:this.handleMouseUp.bind(this),mouseMove:this.handleMouseMove.bind(this),wheel:this.handleWheel.bind(this),mouseEnter:this.handleMouseEnter.bind(this),mouseLeave:this.handleMouseLeave.bind(this),contextMenu:this.handleContextMenu.bind(this)}}start(){this.targetElement.addEventListener("mousedown",this.boundHandlers.mouseDown),this.targetElement.addEventListener("mouseup",this.boundHandlers.mouseUp),this.targetElement.addEventListener("mousemove",this.boundHandlers.mouseMove),this.targetElement.addEventListener("wheel",this.boundHandlers.wheel),this.targetElement.addEventListener("mouseenter",this.boundHandlers.mouseEnter),this.targetElement.addEventListener("mouseleave",this.boundHandlers.mouseLeave),this.targetElement.addEventListener("contextmenu",this.boundHandlers.contextMenu)}stop(){this.targetElement.removeEventListener("mousedown",this.boundHandlers.mouseDown),this.targetElement.removeEventListener("mouseup",this.boundHandlers.mouseUp),this.targetElement.removeEventListener("mousemove",this.boundHandlers.mouseMove),this.targetElement.removeEventListener("wheel",this.boundHandlers.wheel),this.targetElement.removeEventListener("mouseenter",this.boundHandlers.mouseEnter),this.targetElement.removeEventListener("mouseleave",this.boundHandlers.mouseLeave),this.targetElement.removeEventListener("contextmenu",this.boundHandlers.contextMenu)}reset(){this.mouseButtons={left:!1,middle:!1,right:!1},this.mousePosition=K.zero(),this.mouseDelta=K.zero(),this.wheelDelta=0}resetDelta(){this.mouseDelta=K.zero(),this.wheelDelta=0}destroy(){this.stop(),this.reset()}isLeftMousePressed(){return this.mouseButtons.left}isRightMousePressed(){return this.mouseButtons.right}isMiddleMousePressed(){return this.mouseButtons.middle}getMousePosition(){return this.mousePosition.clone()}getMouseDelta(){return this.mouseDelta.clone()}getWheelDelta(){return this.wheelDelta}setCallbacks(i){this.callbacks={...this.callbacks,...i}}clearCallbacks(){this.callbacks={}}isListening(){return!0}handleMouseDown(i){var l,a,u,f,d,m;switch(i.button){case 0:this.mouseButtons.left=!0,(a=(l=this.callbacks).onMouseDown)==null||a.call(l,"left",this.mousePosition,i);break;case 1:this.mouseButtons.middle=!0,(f=(u=this.callbacks).onMouseDown)==null||f.call(u,"middle",this.mousePosition,i);break;case 2:this.mouseButtons.right=!0,(m=(d=this.callbacks).onMouseDown)==null||m.call(d,"right",this.mousePosition,i);break}}handleMouseUp(i){var l,a,u,f,d,m;switch(i.button){case 0:this.mouseButtons.left=!1,(a=(l=this.callbacks).onMouseUp)==null||a.call(l,"left",this.mousePosition,i);break;case 1:this.mouseButtons.middle=!1,(f=(u=this.callbacks).onMouseUp)==null||f.call(u,"middle",this.mousePosition,i);break;case 2:this.mouseButtons.right=!1,(m=(d=this.callbacks).onMouseUp)==null||m.call(d,"right",this.mousePosition,i);break}}handleMouseMove(i){var a,u;const l=new K(i.clientX,i.clientY);this.mouseDelta=l.subtract(this.mousePosition),this.mousePosition=l,(u=(a=this.callbacks).onMouseMove)==null||u.call(a,this.mousePosition,this.mouseDelta,i)}handleWheel(i){var l,a;this.wheelDelta=i.deltaY,(a=(l=this.callbacks).onMouseWheel)==null||a.call(l,this.wheelDelta,i)}handleMouseEnter(i){var l,a;(a=(l=this.callbacks).onMouseEnter)==null||a.call(l,i)}handleMouseLeave(i){var l,a;(a=(l=this.callbacks).onMouseLeave)==null||a.call(l,i)}handleContextMenu(i){this.mouseButtons.right&&i.preventDefault()}}class Cy{constructor(i=window){U(this,"targetElement");U(this,"touches",new Map);U(this,"callbacks",{});U(this,"maxTouches",10);U(this,"boundHandlers");this.targetElement=i,this.boundHandlers={touchStart:this.handleTouchStart.bind(this),touchEnd:this.handleTouchEnd.bind(this),touchMove:this.handleTouchMove.bind(this),touchCancel:this.handleTouchCancel.bind(this),orientationChange:this.handleOrientationChange.bind(this)}}start(){this.targetElement.addEventListener("touchstart",this.boundHandlers.touchStart,{passive:!1}),this.targetElement.addEventListener("touchend",this.boundHandlers.touchEnd,{passive:!1}),this.targetElement.addEventListener("touchmove",this.boundHandlers.touchMove,{passive:!1}),this.targetElement.addEventListener("touchcancel",this.boundHandlers.touchCancel,{passive:!1}),window.addEventListener("orientationchange",this.boundHandlers.orientationChange)}stop(){this.targetElement.removeEventListener("touchstart",this.boundHandlers.touchStart),this.targetElement.removeEventListener("touchend",this.boundHandlers.touchEnd),this.targetElement.removeEventListener("touchmove",this.boundHandlers.touchMove),this.targetElement.removeEventListener("touchcancel",this.boundHandlers.touchCancel),window.removeEventListener("orientationchange",this.boundHandlers.orientationChange)}reset(){this.touches.clear()}resetDelta(){}destroy(){this.stop(),this.reset()}isTouchActive(i){return i<0||i>=this.maxTouches?!1:this.touches.has(i)}getTouchPosition(i){if(i<0||i>=this.maxTouches)return null;const l=this.touches.get(i);return l?l.position.clone():null}getTouchStartPosition(i){if(i<0||i>=this.maxTouches)return null;const l=this.touches.get(i);return l?l.startPosition.clone():null}getTouchDelta(i){if(i<0||i>=this.maxTouches)return null;const l=this.touches.get(i);return l?l.position.subtract(l.startPosition):null}getTouchCount(){return this.touches.size}getAllTouches(){return Array.from(this.touches.values())}setCallbacks(i){this.callbacks={...this.callbacks,...i}}clearCallbacks(){this.callbacks={}}handleTouchStart(i){var a,u;i.preventDefault();const l=Array.from(i.changedTouches);for(const f of l){if(this.touches.size>=this.maxTouches)break;let d=-1;for(let g=0;g<this.maxTouches;g++)if(!this.touches.has(g)){d=g;break}if(d===-1)continue;const m=new K(f.clientX,f.clientY),y={id:d,position:m.clone(),startPosition:m.clone(),active:!0};this.touches.set(d,y)}(u=(a=this.callbacks).onTouchStart)==null||u.call(a,this.getAllTouches(),i)}handleTouchEnd(i){var u,f;i.preventDefault();const l=Array.from(i.changedTouches),a=[];for(const d of l)for(const[m,y]of this.touches.entries())if(new K(d.clientX,d.clientY).subtract(y.position).length()<50){a.push(m);break}for(const d of a)this.touches.delete(d);(f=(u=this.callbacks).onTouchEnd)==null||f.call(u,this.getAllTouches(),i)}handleTouchMove(i){var a,u;i.preventDefault();const l=Array.from(i.changedTouches);for(const f of l)for(const d of this.touches.values()){const m=new K(f.clientX,f.clientY);if(m.subtract(d.position).length()<100){d.position=m;break}}(u=(a=this.callbacks).onTouchMove)==null||u.call(a,this.getAllTouches(),i)}handleTouchCancel(i){var l,a;i.preventDefault(),this.touches.clear(),(a=(l=this.callbacks).onTouchCancel)==null||a.call(l,[],i)}handleOrientationChange(i){var a,u;const l=window.orientation||0;(u=(a=this.callbacks).onOrientationChange)==null||u.call(a,l)}isListening(){return!0}}class Ey{constructor(i={}){U(this,"keyboard",null);U(this,"mouse",null);U(this,"gamepad",null);U(this,"mobile",null);U(this,"config");this.config={enableKeyboardMouse:!0,enableGamepad:!0,enableMobile:!1,targetElement:window,debug:!1,...i},this.initialize()}initialize(){this.config.enableKeyboardMouse&&(this.keyboard=new by(this.config.targetElement),this.keyboard.start(),this.mouse=new Sy(this.config.targetElement),this.mouse.start(),this.log("Keyboard/Mouse initialized")),this.config.enableGamepad&&this.log("Gamepad support pending implementation"),this.config.enableMobile&&(this.mobile=new Cy(this.config.targetElement),this.mobile.start(),this.log("Mobile/Touch initialized"))}getButton(i,l){if(!wd({device:i,input:l}))return this.warn(`Input ${l} on device ${i} is not a button`),!1;switch(i){case lt.Keyboard:return this.getKeyboardButton(l);case lt.Mouse:return this.getMouseButton(l);case lt.Gamepad:return this.getGamepadButton(l);case lt.Touch:return this.getTouchButton(l);default:return this.warn(`Unknown device type: ${i}`),!1}}getAxis(i,l){if(!Tm({device:i,input:l}))return this.warn(`Input ${l} on device ${i} is not an axis`),0;switch(i){case lt.Keyboard:return this.warn("Keyboard does not have axis inputs"),0;case lt.Mouse:return this.getMouseAxis(l);case lt.Gamepad:return this.getGamepadAxis(l);case lt.Touch:return this.getTouchAxis(l);default:return this.warn(`Unknown device type: ${i}`),0}}getKeyboardButton(i){if(!this.keyboard)return!1;const l=ga[i];return this.keyboard.isKeyPressed(l)}getMouseButton(i){if(!this.mouse)return!1;switch(i){case Ge.LeftButton:return this.mouse.isLeftMousePressed();case Ge.RightButton:return this.mouse.isRightMousePressed();case Ge.MiddleButton:return this.mouse.isMiddleMousePressed();default:return!1}}getGamepadButton(i){var l,a;return!this.gamepad||i>=100?!1:((a=(l=this.gamepad).isButtonPressed)==null?void 0:a.call(l,i))??!1}getTouchButton(i){var l,a;return!this.mobile||i>=100?!1:((a=(l=this.mobile).isTouchActive)==null?void 0:a.call(l,i))??!1}getMouseAxis(i){if(!this.mouse)return 0;switch(i){case Ge.PositionX:return this.mouse.getMousePosition().x;case Ge.PositionY:return this.mouse.getMousePosition().y;case Ge.DeltaX:return this.mouse.getMouseDelta().x;case Ge.DeltaY:return this.mouse.getMouseDelta().y;case Ge.WheelDeltaY:return this.mouse.getWheelDelta();default:return 0}}getGamepadAxis(i){var a,u;if(!this.gamepad||i<100)return 0;const l=i-100;return((u=(a=this.gamepad).getAxis)==null?void 0:u.call(a,l))??0}getTouchAxis(i){var l,a;if(!this.mobile)return 0;if(i>=100&&i<200){const u=Math.floor((i-100)/2),f=(i-100)%2===0,d=(a=(l=this.mobile).getTouchPosition)==null?void 0:a.call(l,u);return d?f?d.x:d.y:0}return 0}getMousePosition(){if(!this.mouse)return null;const i=this.mouse.getMousePosition();return{x:i.x,y:i.y}}start(){var i,l;(i=this.keyboard)==null||i.start(),(l=this.mouse)==null||l.start(),this.log("Input router started")}stop(){var i,l;(i=this.keyboard)==null||i.stop(),(l=this.mouse)==null||l.stop(),this.log("Input router stopped")}reset(){var i,l;(i=this.keyboard)==null||i.reset(),(l=this.mouse)==null||l.reset(),this.log("Input router reset")}isListening(){return this.keyboard!==null&&this.config.enableKeyboardMouse||this.gamepad!==null&&this.config.enableGamepad||this.mobile!==null&&this.config.enableMobile}destroy(){var i,l;(i=this.keyboard)==null||i.destroy(),(l=this.mouse)==null||l.destroy(),this.keyboard=null,this.mouse=null,this.gamepad=null,this.mobile=null,this.log("Input router destroyed")}log(i){this.config.debug&&console.warn(`[InputRouter] ${i}`)}warn(i){console.warn(`[InputRouter] ${i}`)}}const Ze=Object.create(null);Ze.open="0";Ze.close="1";Ze.ping="2";Ze.pong="3";Ze.message="4";Ze.upgrade="5";Ze.noop="6";const ca=Object.create(null);Object.keys(Ze).forEach(c=>{ca[Ze[c]]=c});const jo={type:"error",data:"parser error"},zd=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rd=typeof ArrayBuffer=="function",Md=c=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer,tu=({type:c,data:i},l,a)=>zd&&i instanceof Blob?l?a(i):Sd(i,a):Rd&&(i instanceof ArrayBuffer||Md(i))?l?a(i):Sd(new Blob([i]),a):a(Ze[c]+(i||"")),Sd=(c,i)=>{const l=new FileReader;return l.onload=function(){const a=l.result.split(",")[1];i("b"+(a||""))},l.readAsDataURL(c)};function Cd(c){return c instanceof Uint8Array?c:c instanceof ArrayBuffer?new Uint8Array(c):new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}let Fo;function Ty(c,i){if(zd&&c.data instanceof Blob)return c.data.arrayBuffer().then(Cd).then(i);if(Rd&&(c.data instanceof ArrayBuffer||Md(c.data)))return i(Cd(c.data));tu(c,!1,l=>{Fo||(Fo=new TextEncoder),i(Fo.encode(l))})}const Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let c=0;c<Ed.length;c++)Fs[Ed.charCodeAt(c)]=c;const Ay=c=>{let i=c.length*.75,l=c.length,a,u=0,f,d,m,y;c[c.length-1]==="="&&(i--,c[c.length-2]==="="&&i--);const g=new ArrayBuffer(i),b=new Uint8Array(g);for(a=0;a<l;a+=4)f=Fs[c.charCodeAt(a)],d=Fs[c.charCodeAt(a+1)],m=Fs[c.charCodeAt(a+2)],y=Fs[c.charCodeAt(a+3)],b[u++]=f<<2|d>>4,b[u++]=(d&15)<<4|m>>2,b[u++]=(m&3)<<6|y&63;return g},wy=typeof ArrayBuffer=="function",eu=(c,i)=>{if(typeof c!="string")return{type:"message",data:Bd(c,i)};const l=c.charAt(0);return l==="b"?{type:"message",data:Uy(c.substring(1),i)}:ca[l]?c.length>1?{type:ca[l],data:c.substring(1)}:{type:ca[l]}:jo},Uy=(c,i)=>{if(wy){const l=Ay(c);return Bd(l,i)}else return{base64:!0,data:c}},Bd=(c,i)=>{switch(i){case"blob":return c instanceof Blob?c:new Blob([c]);case"arraybuffer":default:return c instanceof ArrayBuffer?c:c.buffer}},Od="",xy=(c,i)=>{const l=c.length,a=new Array(l);let u=0;c.forEach((f,d)=>{tu(f,!1,m=>{a[d]=m,++u===l&&i(a.join(Od))})})},_y=(c,i)=>{const l=c.split(Od),a=[];for(let u=0;u<l.length;u++){const f=eu(l[u],i);if(a.push(f),f.type==="error")break}return a};function zy(){return new TransformStream({transform(c,i){Ty(c,l=>{const a=l.length;let u;if(a<126)u=new Uint8Array(1),new DataView(u.buffer).setUint8(0,a);else if(a<65536){u=new Uint8Array(3);const f=new DataView(u.buffer);f.setUint8(0,126),f.setUint16(1,a)}else{u=new Uint8Array(9);const f=new DataView(u.buffer);f.setUint8(0,127),f.setBigUint64(1,BigInt(a))}c.data&&typeof c.data!="string"&&(u[0]|=128),i.enqueue(u),i.enqueue(l)})}})}let Go;function oa(c){return c.reduce((i,l)=>i+l.length,0)}function ua(c,i){if(c[0].length===i)return c.shift();const l=new Uint8Array(i);let a=0;for(let u=0;u<i;u++)l[u]=c[0][a++],a===c[0].length&&(c.shift(),a=0);return c.length&&a<c[0].length&&(c[0]=c[0].slice(a)),l}function Ry(c,i){Go||(Go=new TextDecoder);const l=[];let a=0,u=-1,f=!1;return new TransformStream({transform(d,m){for(l.push(d);;){if(a===0){if(oa(l)<1)break;const y=ua(l,1);f=(y[0]&128)===128,u=y[0]&127,u<126?a=3:u===126?a=1:a=2}else if(a===1){if(oa(l)<2)break;const y=ua(l,2);u=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),a=3}else if(a===2){if(oa(l)<8)break;const y=ua(l,8),g=new DataView(y.buffer,y.byteOffset,y.length),b=g.getUint32(0);if(b>Math.pow(2,21)-1){m.enqueue(jo);break}u=b*Math.pow(2,32)+g.getUint32(4),a=3}else{if(oa(l)<u)break;const y=ua(l,u);m.enqueue(eu(f?y:Go.decode(y),i)),a=0}if(u===0||u>c){m.enqueue(jo);break}}}})}const Dd=4;function kt(c){if(c)return My(c)}function My(c){for(var i in kt.prototype)c[i]=kt.prototype[i];return c}kt.prototype.on=kt.prototype.addEventListener=function(c,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+c]=this._callbacks["$"+c]||[]).push(i),this};kt.prototype.once=function(c,i){function l(){this.off(c,l),i.apply(this,arguments)}return l.fn=i,this.on(c,l),this};kt.prototype.off=kt.prototype.removeListener=kt.prototype.removeAllListeners=kt.prototype.removeEventListener=function(c,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var l=this._callbacks["$"+c];if(!l)return this;if(arguments.length==1)return delete this._callbacks["$"+c],this;for(var a,u=0;u<l.length;u++)if(a=l[u],a===i||a.fn===i){l.splice(u,1);break}return l.length===0&&delete this._callbacks["$"+c],this};kt.prototype.emit=function(c){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),l=this._callbacks["$"+c],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(l){l=l.slice(0);for(var a=0,u=l.length;a<u;++a)l[a].apply(this,i)}return this};kt.prototype.emitReserved=kt.prototype.emit;kt.prototype.listeners=function(c){return this._callbacks=this._callbacks||{},this._callbacks["$"+c]||[]};kt.prototype.hasListeners=function(c){return!!this.listeners(c).length};const ma=typeof Promise=="function"&&typeof Promise.resolve=="function"?i=>Promise.resolve().then(i):(i,l)=>l(i,0),Oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),By="arraybuffer";function Ld(c,...i){return i.reduce((l,a)=>(c.hasOwnProperty(a)&&(l[a]=c[a]),l),{})}const Oy=Oe.setTimeout,Dy=Oe.clearTimeout;function ya(c,i){i.useNativeTimers?(c.setTimeoutFn=Oy.bind(Oe),c.clearTimeoutFn=Dy.bind(Oe)):(c.setTimeoutFn=Oe.setTimeout.bind(Oe),c.clearTimeoutFn=Oe.clearTimeout.bind(Oe))}const Ly=1.33;function Ny(c){return typeof c=="string"?Xy(c):Math.ceil((c.byteLength||c.size)*Ly)}function Xy(c){let i=0,l=0;for(let a=0,u=c.length;a<u;a++)i=c.charCodeAt(a),i<128?l+=1:i<2048?l+=2:i<55296||i>=57344?l+=3:(a++,l+=4);return l}function Nd(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Yy(c){let i="";for(let l in c)c.hasOwnProperty(l)&&(i.length&&(i+="&"),i+=encodeURIComponent(l)+"="+encodeURIComponent(c[l]));return i}function Hy(c){let i={},l=c.split("&");for(let a=0,u=l.length;a<u;a++){let f=l[a].split("=");i[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return i}class qy extends Error{constructor(i,l,a){super(i),this.description=l,this.context=a,this.type="TransportError"}}class iu extends kt{constructor(i){super(),this.writable=!1,ya(this,i),this.opts=i,this.query=i.query,this.socket=i.socket,this.supportsBinary=!i.forceBase64}onError(i,l,a){return super.emitReserved("error",new qy(i,l,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(i){this.readyState==="open"&&this.write(i)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(i){const l=eu(i,this.socket.binaryType);this.onPacket(l)}onPacket(i){super.emitReserved("packet",i)}onClose(i){this.readyState="closed",super.emitReserved("close",i)}pause(i){}createUri(i,l={}){return i+"://"+this._hostname()+this._port()+this.opts.path+this._query(l)}_hostname(){const i=this.opts.hostname;return i.indexOf(":")===-1?i:"["+i+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(i){const l=Yy(i);return l.length?"?"+l:""}}class ky extends iu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(i){this.readyState="pausing";const l=()=>{this.readyState="paused",i()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||l()})),this.writable||(a++,this.once("drain",function(){--a||l()}))}else l()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(i){const l=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};_y(i,this.socket.binaryType).forEach(l),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const i=()=>{this.write([{type:"close"}])};this.readyState==="open"?i():this.once("open",i)}write(i){this.writable=!1,xy(i,l=>{this.doWrite(l,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const i=this.opts.secure?"https":"http",l=this.query||{};return this.opts.timestampRequests!==!1&&(l[this.opts.timestampParam]=Nd()),!this.supportsBinary&&!l.sid&&(l.b64=1),this.createUri(i,l)}}let Xd=!1;try{Xd=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Fy=Xd;function Gy(){}class Vy extends ky{constructor(i){if(super(i),typeof location<"u"){const l=location.protocol==="https:";let a=location.port;a||(a=l?"443":"80"),this.xd=typeof location<"u"&&i.hostname!==location.hostname||a!==i.port}}doWrite(i,l){const a=this.request({method:"POST",data:i});a.on("success",l),a.on("error",(u,f)=>{this.onError("xhr post error",u,f)})}doPoll(){const i=this.request();i.on("data",this.onData.bind(this)),i.on("error",(l,a)=>{this.onError("xhr poll error",l,a)}),this.pollXhr=i}}class Ve extends kt{constructor(i,l,a){super(),this.createRequest=i,ya(this,a),this._opts=a,this._method=a.method||"GET",this._uri=l,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var i;const l=Ld(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");l.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(l);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let u in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(u)&&a.setRequestHeader(u,this._opts.extraHeaders[u])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(i=this._opts.cookieJar)===null||i===void 0||i.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var u;a.readyState===3&&((u=this._opts.cookieJar)===null||u===void 0||u.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(u){this.setTimeoutFn(()=>{this._onError(u)},0);return}typeof document<"u"&&(this._index=Ve.requestsCount++,Ve.requests[this._index]=this)}_onError(i){this.emitReserved("error",i,this._xhr),this._cleanup(!0)}_cleanup(i){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Gy,i)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ve.requests[this._index],this._xhr=null}}_onLoad(){const i=this._xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ve.requestsCount=0;Ve.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Td);else if(typeof addEventListener=="function"){const c="onpagehide"in Oe?"pagehide":"unload";addEventListener(c,Td,!1)}}function Td(){for(let c in Ve.requests)Ve.requests.hasOwnProperty(c)&&Ve.requests[c].abort()}const Zy=(function(){const c=Yd({xdomain:!1});return c&&c.responseType!==null})();class Qy extends Vy{constructor(i){super(i);const l=i&&i.forceBase64;this.supportsBinary=Zy&&!l}request(i={}){return Object.assign(i,{xd:this.xd},this.opts),new Ve(Yd,this.uri(),i)}}function Yd(c){const i=c.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!i||Fy))return new XMLHttpRequest}catch{}if(!i)try{return new Oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Hd=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class jy extends iu{get name(){return"websocket"}doOpen(){const i=this.uri(),l=this.opts.protocols,a=Hd?{}:Ld(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(i,l,a)}catch(u){return this.emitReserved("error",u)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=i=>this.onClose({description:"websocket connection closed",context:i}),this.ws.onmessage=i=>this.onData(i.data),this.ws.onerror=i=>this.onError("websocket error",i)}write(i){this.writable=!1;for(let l=0;l<i.length;l++){const a=i[l],u=l===i.length-1;tu(a,this.supportsBinary,f=>{try{this.doWrite(a,f)}catch{}u&&ma(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const i=this.opts.secure?"wss":"ws",l=this.query||{};return this.opts.timestampRequests&&(l[this.opts.timestampParam]=Nd()),this.supportsBinary||(l.b64=1),this.createUri(i,l)}}const Vo=Oe.WebSocket||Oe.MozWebSocket;class Iy extends jy{createSocket(i,l,a){return Hd?new Vo(i,l,a):l?new Vo(i,l):new Vo(i)}doWrite(i,l){this.ws.send(l)}}class Jy extends iu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(i){return this.emitReserved("error",i)}this._transport.closed.then(()=>{this.onClose()}).catch(i=>{this.onError("webtransport error",i)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(i=>{const l=Ry(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=i.readable.pipeThrough(l).getReader(),u=zy();u.readable.pipeTo(i.writable),this._writer=u.writable.getWriter();const f=()=>{a.read().then(({done:m,value:y})=>{m||(this.onPacket(y),f())}).catch(m=>{})};f();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(i){this.writable=!1;for(let l=0;l<i.length;l++){const a=i[l],u=l===i.length-1;this._writer.write(a).then(()=>{u&&ma(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var i;(i=this._transport)===null||i===void 0||i.close()}}const Wy={websocket:Iy,webtransport:Jy,polling:Qy},Ky=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$y=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Io(c){if(c.length>8e3)throw"URI too long";const i=c,l=c.indexOf("["),a=c.indexOf("]");l!=-1&&a!=-1&&(c=c.substring(0,l)+c.substring(l,a).replace(/:/g,";")+c.substring(a,c.length));let u=Ky.exec(c||""),f={},d=14;for(;d--;)f[$y[d]]=u[d]||"";return l!=-1&&a!=-1&&(f.source=i,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=Py(f,f.path),f.queryKey=tp(f,f.query),f}function Py(c,i){const l=/\/{2,9}/g,a=i.replace(l,"/").split("/");return(i.slice(0,1)=="/"||i.length===0)&&a.splice(0,1),i.slice(-1)=="/"&&a.splice(a.length-1,1),a}function tp(c,i){const l={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,u,f){u&&(l[u]=f)}),l}const Jo=typeof addEventListener=="function"&&typeof removeEventListener=="function",fa=[];Jo&&addEventListener("offline",()=>{fa.forEach(c=>c())},!1);class Xi extends kt{constructor(i,l){if(super(),this.binaryType=By,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,i&&typeof i=="object"&&(l=i,i=null),i){const a=Io(i);l.hostname=a.host,l.secure=a.protocol==="https"||a.protocol==="wss",l.port=a.port,a.query&&(l.query=a.query)}else l.host&&(l.hostname=Io(l.host).host);ya(this,l),this.secure=l.secure!=null?l.secure:typeof location<"u"&&location.protocol==="https:",l.hostname&&!l.port&&(l.port=this.secure?"443":"80"),this.hostname=l.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=l.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},l.transports.forEach(a=>{const u=a.prototype.name;this.transports.push(u),this._transportsByName[u]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},l),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Hy(this.opts.query)),Jo&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fa.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(i){const l=Object.assign({},this.opts.query);l.EIO=Dd,l.transport=i,this.id&&(l.sid=this.id);const a=Object.assign({},this.opts,{query:l,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new this._transportsByName[i](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const i=this.opts.rememberUpgrade&&Xi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const l=this.createTransport(i);l.open(),this.setTransport(l)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",l=>this._onClose("transport close",l))}onOpen(){this.readyState="open",Xi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const l=new Error("server error");l.code=i.data,this._onError(l);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this._pingInterval=i.pingInterval,this._pingTimeout=i.pingTimeout,this._maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const i=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+i,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},i),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this._getWritablePackets();this.transport.send(i),this._prevBufferLen=i.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let l=1;for(let a=0;a<this.writeBuffer.length;a++){const u=this.writeBuffer[a].data;if(u&&(l+=Ny(u)),a>0&&l>this._maxPayload)return this.writeBuffer.slice(0,a);l+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const i=Date.now()>this._pingTimeoutTime;return i&&(this._pingTimeoutTime=0,ma(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),i}write(i,l,a){return this._sendPacket("message",i,l,a),this}send(i,l,a){return this._sendPacket("message",i,l,a),this}_sendPacket(i,l,a,u){if(typeof l=="function"&&(u=l,l=void 0),typeof a=="function"&&(u=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const f={type:i,data:l,options:a};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),u&&this.once("flush",u),this.flush()}close(){const i=()=>{this._onClose("forced close"),this.transport.close()},l=()=>{this.off("upgrade",l),this.off("upgradeError",l),i()},a=()=>{this.once("upgrade",l),this.once("upgradeError",l)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():i()}):this.upgrading?a():i()),this}_onError(i){if(Xi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",i),this._onClose("transport error",i)}_onClose(i,l){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Jo&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=fa.indexOf(this._offlineEventListener);a!==-1&&fa.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",i,l),this.writeBuffer=[],this._prevBufferLen=0}}}Xi.protocol=Dd;class ep extends Xi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let i=0;i<this._upgrades.length;i++)this._probe(this._upgrades[i])}_probe(i){let l=this.createTransport(i),a=!1;Xi.priorWebsocketSuccess=!1;const u=()=>{a||(l.send([{type:"ping",data:"probe"}]),l.once("packet",v=>{if(!a)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",l),!l)return;Xi.priorWebsocketSuccess=l.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(b(),this.setTransport(l),l.send([{type:"upgrade"}]),this.emitReserved("upgrade",l),l=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=l.name,this.emitReserved("upgradeError",C)}}))};function f(){a||(a=!0,b(),l.close(),l=null)}const d=v=>{const C=new Error("probe error: "+v);C.transport=l.name,f(),this.emitReserved("upgradeError",C)};function m(){d("transport closed")}function y(){d("socket closed")}function g(v){l&&v.name!==l.name&&f()}const b=()=>{l.removeListener("open",u),l.removeListener("error",d),l.removeListener("close",m),this.off("close",y),this.off("upgrading",g)};l.once("open",u),l.once("error",d),l.once("close",m),this.once("close",y),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&i!=="webtransport"?this.setTimeoutFn(()=>{a||l.open()},200):l.open()}onHandshake(i){this._upgrades=this._filterUpgrades(i.upgrades),super.onHandshake(i)}_filterUpgrades(i){const l=[];for(let a=0;a<i.length;a++)~this.transports.indexOf(i[a])&&l.push(i[a]);return l}}let ip=class extends ep{constructor(i,l={}){const a=typeof i=="object"?i:l;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(u=>Wy[u]).filter(u=>!!u)),super(i,a)}};function np(c,i="",l){let a=c;l=l||typeof location<"u"&&location,c==null&&(c=l.protocol+"//"+l.host),typeof c=="string"&&(c.charAt(0)==="/"&&(c.charAt(1)==="/"?c=l.protocol+c:c=l.host+c),/^(https?|wss?):\/\//.test(c)||(typeof l<"u"?c=l.protocol+"//"+c:c="https://"+c),a=Io(c)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const f=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+f+":"+a.port+i,a.href=a.protocol+"://"+f+(l&&l.port===a.port?"":":"+a.port),a}const sp=typeof ArrayBuffer=="function",lp=c=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(c):c.buffer instanceof ArrayBuffer,qd=Object.prototype.toString,ap=typeof Blob=="function"||typeof Blob<"u"&&qd.call(Blob)==="[object BlobConstructor]",rp=typeof File=="function"||typeof File<"u"&&qd.call(File)==="[object FileConstructor]";function nu(c){return sp&&(c instanceof ArrayBuffer||lp(c))||ap&&c instanceof Blob||rp&&c instanceof File}function ha(c,i){if(!c||typeof c!="object")return!1;if(Array.isArray(c)){for(let l=0,a=c.length;l<a;l++)if(ha(c[l]))return!0;return!1}if(nu(c))return!0;if(c.toJSON&&typeof c.toJSON=="function"&&arguments.length===1)return ha(c.toJSON(),!0);for(const l in c)if(Object.prototype.hasOwnProperty.call(c,l)&&ha(c[l]))return!0;return!1}function op(c){const i=[],l=c.data,a=c;return a.data=Wo(l,i),a.attachments=i.length,{packet:a,buffers:i}}function Wo(c,i){if(!c)return c;if(nu(c)){const l={_placeholder:!0,num:i.length};return i.push(c),l}else if(Array.isArray(c)){const l=new Array(c.length);for(let a=0;a<c.length;a++)l[a]=Wo(c[a],i);return l}else if(typeof c=="object"&&!(c instanceof Date)){const l={};for(const a in c)Object.prototype.hasOwnProperty.call(c,a)&&(l[a]=Wo(c[a],i));return l}return c}function up(c,i){return c.data=Ko(c.data,i),delete c.attachments,c}function Ko(c,i){if(!c)return c;if(c&&c._placeholder===!0){if(typeof c.num=="number"&&c.num>=0&&c.num<i.length)return i[c.num];throw new Error("illegal attachments")}else if(Array.isArray(c))for(let l=0;l<c.length;l++)c[l]=Ko(c[l],i);else if(typeof c=="object")for(const l in c)Object.prototype.hasOwnProperty.call(c,l)&&(c[l]=Ko(c[l],i));return c}const cp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fp=5;var ht;(function(c){c[c.CONNECT=0]="CONNECT",c[c.DISCONNECT=1]="DISCONNECT",c[c.EVENT=2]="EVENT",c[c.ACK=3]="ACK",c[c.CONNECT_ERROR=4]="CONNECT_ERROR",c[c.BINARY_EVENT=5]="BINARY_EVENT",c[c.BINARY_ACK=6]="BINARY_ACK"})(ht||(ht={}));class hp{constructor(i){this.replacer=i}encode(i){return(i.type===ht.EVENT||i.type===ht.ACK)&&ha(i)?this.encodeAsBinary({type:i.type===ht.EVENT?ht.BINARY_EVENT:ht.BINARY_ACK,nsp:i.nsp,data:i.data,id:i.id}):[this.encodeAsString(i)]}encodeAsString(i){let l=""+i.type;return(i.type===ht.BINARY_EVENT||i.type===ht.BINARY_ACK)&&(l+=i.attachments+"-"),i.nsp&&i.nsp!=="/"&&(l+=i.nsp+","),i.id!=null&&(l+=i.id),i.data!=null&&(l+=JSON.stringify(i.data,this.replacer)),l}encodeAsBinary(i){const l=op(i),a=this.encodeAsString(l.packet),u=l.buffers;return u.unshift(a),u}}function Ad(c){return Object.prototype.toString.call(c)==="[object Object]"}class su extends kt{constructor(i){super(),this.reviver=i}add(i){let l;if(typeof i=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");l=this.decodeString(i);const a=l.type===ht.BINARY_EVENT;a||l.type===ht.BINARY_ACK?(l.type=a?ht.EVENT:ht.ACK,this.reconstructor=new dp(l),l.attachments===0&&super.emitReserved("decoded",l)):super.emitReserved("decoded",l)}else if(nu(i)||i.base64)if(this.reconstructor)l=this.reconstructor.takeBinaryData(i),l&&(this.reconstructor=null,super.emitReserved("decoded",l));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+i)}decodeString(i){let l=0;const a={type:Number(i.charAt(0))};if(ht[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===ht.BINARY_EVENT||a.type===ht.BINARY_ACK){const f=l+1;for(;i.charAt(++l)!=="-"&&l!=i.length;);const d=i.substring(f,l);if(d!=Number(d)||i.charAt(l)!=="-")throw new Error("Illegal attachments");a.attachments=Number(d)}if(i.charAt(l+1)==="/"){const f=l+1;for(;++l&&!(i.charAt(l)===","||l===i.length););a.nsp=i.substring(f,l)}else a.nsp="/";const u=i.charAt(l+1);if(u!==""&&Number(u)==u){const f=l+1;for(;++l;){const d=i.charAt(l);if(d==null||Number(d)!=d){--l;break}if(l===i.length)break}a.id=Number(i.substring(f,l+1))}if(i.charAt(++l)){const f=this.tryParse(i.substr(l));if(su.isPayloadValid(a.type,f))a.data=f;else throw new Error("invalid payload")}return a}tryParse(i){try{return JSON.parse(i,this.reviver)}catch{return!1}}static isPayloadValid(i,l){switch(i){case ht.CONNECT:return Ad(l);case ht.DISCONNECT:return l===void 0;case ht.CONNECT_ERROR:return typeof l=="string"||Ad(l);case ht.EVENT:case ht.BINARY_EVENT:return Array.isArray(l)&&(typeof l[0]=="number"||typeof l[0]=="string"&&cp.indexOf(l[0])===-1);case ht.ACK:case ht.BINARY_ACK:return Array.isArray(l)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dp{constructor(i){this.packet=i,this.buffers=[],this.reconPack=i}takeBinaryData(i){if(this.buffers.push(i),this.buffers.length===this.reconPack.attachments){const l=up(this.reconPack,this.buffers);return this.finishedReconstruction(),l}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gp=Object.freeze(Object.defineProperty({__proto__:null,Decoder:su,Encoder:hp,get PacketType(){return ht},protocol:fp},Symbol.toStringTag,{value:"Module"}));function Ye(c,i,l){return c.on(i,l),function(){c.off(i,l)}}const mp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class kd extends kt{constructor(i,l,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=i,this.nsp=l,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const i=this.io;this.subs=[Ye(i,"open",this.onopen.bind(this)),Ye(i,"packet",this.onpacket.bind(this)),Ye(i,"error",this.onerror.bind(this)),Ye(i,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...i){return i.unshift("message"),this.emit.apply(this,i),this}emit(i,...l){var a,u,f;if(mp.hasOwnProperty(i))throw new Error('"'+i.toString()+'" is a reserved event name');if(l.unshift(i),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(l),this;const d={type:ht.EVENT,data:l};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof l[l.length-1]=="function"){const b=this.ids++,v=l.pop();this._registerAckCallback(b,v),d.id=b}const m=(u=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||u===void 0?void 0:u.writable,y=this.connected&&!(!((f=this.io.engine)===null||f===void 0)&&f._hasPingExpired());return this.flags.volatile&&!m||(y?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(i,l){var a;const u=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(u===void 0){this.acks[i]=l;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[i];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===i&&this.sendBuffer.splice(m,1);l.call(this,new Error("operation has timed out"))},u),d=(...m)=>{this.io.clearTimeoutFn(f),l.apply(this,m)};d.withError=!0,this.acks[i]=d}emitWithAck(i,...l){return new Promise((a,u)=>{const f=(d,m)=>d?u(d):a(m);f.withError=!0,l.push(f),this.emit(i,...l)})}_addToQueue(i){let l;typeof i[i.length-1]=="function"&&(l=i.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:i,flags:Object.assign({fromQueue:!0},this.flags)};i.push((u,...f)=>a!==this._queue[0]?void 0:(u!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),l&&l(u)):(this._queue.shift(),l&&l(null,...f)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(i=!1){if(!this.connected||this._queue.length===0)return;const l=this._queue[0];l.pending&&!i||(l.pending=!0,l.tryCount++,this.flags=l.flags,this.emit.apply(this,l.args))}packet(i){i.nsp=this.nsp,this.io._packet(i)}onopen(){typeof this.auth=="function"?this.auth(i=>{this._sendConnectPacket(i)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(i){this.packet({type:ht.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},i):i})}onerror(i){this.connected||this.emitReserved("connect_error",i)}onclose(i,l){this.connected=!1,delete this.id,this.emitReserved("disconnect",i,l),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(i=>{if(!this.sendBuffer.some(a=>String(a.id)===i)){const a=this.acks[i];delete this.acks[i],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(i){if(i.nsp===this.nsp)switch(i.type){case ht.CONNECT:i.data&&i.data.sid?this.onconnect(i.data.sid,i.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ht.EVENT:case ht.BINARY_EVENT:this.onevent(i);break;case ht.ACK:case ht.BINARY_ACK:this.onack(i);break;case ht.DISCONNECT:this.ondisconnect();break;case ht.CONNECT_ERROR:this.destroy();const a=new Error(i.data.message);a.data=i.data.data,this.emitReserved("connect_error",a);break}}onevent(i){const l=i.data||[];i.id!=null&&l.push(this.ack(i.id)),this.connected?this.emitEvent(l):this.receiveBuffer.push(Object.freeze(l))}emitEvent(i){if(this._anyListeners&&this._anyListeners.length){const l=this._anyListeners.slice();for(const a of l)a.apply(this,i)}super.emit.apply(this,i),this._pid&&i.length&&typeof i[i.length-1]=="string"&&(this._lastOffset=i[i.length-1])}ack(i){const l=this;let a=!1;return function(...u){a||(a=!0,l.packet({type:ht.ACK,id:i,data:u}))}}onack(i){const l=this.acks[i.id];typeof l=="function"&&(delete this.acks[i.id],l.withError&&i.data.unshift(null),l.apply(this,i.data))}onconnect(i,l){this.id=i,this.recovered=l&&this._pid===l,this._pid=l,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(i=>this.emitEvent(i)),this.receiveBuffer=[],this.sendBuffer.forEach(i=>{this.notifyOutgoingListeners(i),this.packet(i)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(i=>i()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ht.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(i){return this.flags.compress=i,this}get volatile(){return this.flags.volatile=!0,this}timeout(i){return this.flags.timeout=i,this}onAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(i),this}prependAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(i),this}offAny(i){if(!this._anyListeners)return this;if(i){const l=this._anyListeners;for(let a=0;a<l.length;a++)if(i===l[a])return l.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(i),this}prependAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(i),this}offAnyOutgoing(i){if(!this._anyOutgoingListeners)return this;if(i){const l=this._anyOutgoingListeners;for(let a=0;a<l.length;a++)if(i===l[a])return l.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(i){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const l=this._anyOutgoingListeners.slice();for(const a of l)a.apply(this,i.data)}}}function Zn(c){c=c||{},this.ms=c.min||100,this.max=c.max||1e4,this.factor=c.factor||2,this.jitter=c.jitter>0&&c.jitter<=1?c.jitter:0,this.attempts=0}Zn.prototype.duration=function(){var c=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),l=Math.floor(i*this.jitter*c);c=(Math.floor(i*10)&1)==0?c-l:c+l}return Math.min(c,this.max)|0};Zn.prototype.reset=function(){this.attempts=0};Zn.prototype.setMin=function(c){this.ms=c};Zn.prototype.setMax=function(c){this.max=c};Zn.prototype.setJitter=function(c){this.jitter=c};class $o extends kt{constructor(i,l){var a;super(),this.nsps={},this.subs=[],i&&typeof i=="object"&&(l=i,i=void 0),l=l||{},l.path=l.path||"/socket.io",this.opts=l,ya(this,l),this.reconnection(l.reconnection!==!1),this.reconnectionAttempts(l.reconnectionAttempts||1/0),this.reconnectionDelay(l.reconnectionDelay||1e3),this.reconnectionDelayMax(l.reconnectionDelayMax||5e3),this.randomizationFactor((a=l.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Zn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(l.timeout==null?2e4:l.timeout),this._readyState="closed",this.uri=i;const u=l.parser||gp;this.encoder=new u.Encoder,this.decoder=new u.Decoder,this._autoConnect=l.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(i){return arguments.length?(this._reconnection=!!i,i||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(i){return i===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=i,this)}reconnectionDelay(i){var l;return i===void 0?this._reconnectionDelay:(this._reconnectionDelay=i,(l=this.backoff)===null||l===void 0||l.setMin(i),this)}randomizationFactor(i){var l;return i===void 0?this._randomizationFactor:(this._randomizationFactor=i,(l=this.backoff)===null||l===void 0||l.setJitter(i),this)}reconnectionDelayMax(i){var l;return i===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=i,(l=this.backoff)===null||l===void 0||l.setMax(i),this)}timeout(i){return arguments.length?(this._timeout=i,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(i){if(~this._readyState.indexOf("open"))return this;this.engine=new ip(this.uri,this.opts);const l=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const u=Ye(l,"open",function(){a.onopen(),i&&i()}),f=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),i?i(m):this.maybeReconnectOnOpen()},d=Ye(l,"error",f);if(this._timeout!==!1){const m=this._timeout,y=this.setTimeoutFn(()=>{u(),f(new Error("timeout")),l.close()},m);this.opts.autoUnref&&y.unref(),this.subs.push(()=>{this.clearTimeoutFn(y)})}return this.subs.push(u),this.subs.push(d),this}connect(i){return this.open(i)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const i=this.engine;this.subs.push(Ye(i,"ping",this.onping.bind(this)),Ye(i,"data",this.ondata.bind(this)),Ye(i,"error",this.onerror.bind(this)),Ye(i,"close",this.onclose.bind(this)),Ye(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(i){try{this.decoder.add(i)}catch(l){this.onclose("parse error",l)}}ondecoded(i){ma(()=>{this.emitReserved("packet",i)},this.setTimeoutFn)}onerror(i){this.emitReserved("error",i)}socket(i,l){let a=this.nsps[i];return a?this._autoConnect&&!a.active&&a.connect():(a=new kd(this,i,l),this.nsps[i]=a),a}_destroy(i){const l=Object.keys(this.nsps);for(const a of l)if(this.nsps[a].active)return;this._close()}_packet(i){const l=this.encoder.encode(i);for(let a=0;a<l.length;a++)this.engine.write(l[a],i.options)}cleanup(){this.subs.forEach(i=>i()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(i,l){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",i,l),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const i=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const l=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{i.skipReconnect||(this.emitReserved("reconnect_attempt",i.backoff.attempts),!i.skipReconnect&&i.open(u=>{u?(i._reconnecting=!1,i.reconnect(),this.emitReserved("reconnect_error",u)):i.onreconnect()}))},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const i=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",i)}}const ks={};function da(c,i){typeof c=="object"&&(i=c,c=void 0),i=i||{};const l=np(c,i.path||"/socket.io"),a=l.source,u=l.id,f=l.path,d=ks[u]&&f in ks[u].nsps,m=i.forceNew||i["force new connection"]||i.multiplex===!1||d;let y;return m?y=new $o(a,i):(ks[u]||(ks[u]=new $o(a,i)),y=ks[u]),l.query&&!i.query&&(i.query=l.queryKey),y.socket(l.path,i)}Object.assign(da,{Manager:$o,Socket:kd,io:da,connect:da});class yp{constructor(i){U(this,"socket",null);U(this,"options");U(this,"_state",Be.Disconnected);U(this,"pingTimestamp",0);U(this,"latency",0);U(this,"pingInterval",null);this.options={url:i.url,autoReconnect:i.autoReconnect??!0,reconnectDelay:i.reconnectDelay??1e3,maxReconnectAttempts:i.maxReconnectAttempts??10,timeout:i.timeout??5e3,auth:i.auth??{},debug:i.debug??!1}}get state(){return this._state}isConnected(){var i;return this._state===Be.Connected&&((i=this.socket)==null?void 0:i.connected)===!0}async connect(){if(this.socket&&this.isConnected()){this.log("Already connected");return}return this.log(`Connecting to ${this.options.url}...`),this._state=Be.Connecting,new Promise((i,l)=>{this.socket=da(this.options.url,{auth:this.options.auth,reconnection:this.options.autoReconnect,reconnectionDelay:this.options.reconnectDelay,reconnectionAttempts:this.options.maxReconnectAttempts,timeout:this.options.timeout,transports:["websocket"]}),this.socket.on("connect",()=>{var a;this.log(`Connected with ID: ${(a=this.socket)==null?void 0:a.id}`),this._state=Be.Connected,this.startPingMonitor(),i()}),this.socket.on("connect_error",a=>{this.log(`Connection error: ${a.message}`),this._state=Be.Error,l(a)}),this.socket.on("disconnect",a=>{this.log(`Disconnected: ${a}`),this._state=Be.Disconnected,this.stopPingMonitor()}),this.socket.on("reconnect_attempt",a=>{this.log(`Reconnection attempt ${a}...`),this._state=Be.Reconnecting}),this.socket.on("reconnect",a=>{this.log(`Reconnected after ${a} attempts`),this._state=Be.Connected,this.startPingMonitor()}),this.socket.on("reconnect_failed",()=>{this.log("Reconnection failed"),this._state=Be.Error}),this.socket.on("pong",()=>{this.latency=Date.now()-this.pingTimestamp,this.log(`Ping: ${this.latency}ms`)})})}disconnect(){this.socket&&(this.log("Disconnecting..."),this.stopPingMonitor(),this.socket.disconnect(),this._state=Be.Disconnected)}send(i,l){if(!this.isConnected()||!this.socket){this.log(`Cannot send '${i}': not connected`);return}this.socket.volatile.emit(i,l)}on(i,l){if(!this.socket){this.log(`Cannot listen to '${i}': socket not initialized`);return}this.socket.on(i,l),this.log(`Listening to '${i}'`)}off(i,l){this.socket&&(this.socket.off(i,l),this.log(`Stopped listening to '${i}'`))}removeAllListeners(i){this.socket&&(i?(this.socket.removeAllListeners(i),this.log(`Removed all listeners for '${i}'`)):(this.socket.removeAllListeners(),this.log("Removed all listeners")))}async request(i,l,a=5e3){if(!this.isConnected())throw new Error("Not connected");return new Promise((u,f)=>{const d=`${i}_response`,m=setTimeout(()=>{this.off(d,y),f(new Error(`Request timeout: ${i}`))},a),y=g=>{clearTimeout(m),this.off(d,y),u(g)};this.on(d,y),this.send(i,l)})}getPing(){return this.latency}destroy(){this.log("Destroying client..."),this.stopPingMonitor(),this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this._state=Be.Disconnected}startPingMonitor(){this.pingInterval||(this.pingInterval=setInterval(()=>{this.isConnected()&&this.socket&&(this.pingTimestamp=Date.now(),this.socket.emit("ping"))},2e3))}stopPingMonitor(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}log(i,l){this.options.debug&&(l!==void 0?console.warn(`[SocketIOClient] ${i}`,l):console.warn(`[SocketIOClient] ${i}`))}}class pp{constructor(i){U(this,"core");U(this,"renderer");U(this,"input");U(this,"network",null);U(this,"options");U(this,"running",!1);U(this,"startTime",0);U(this,"lastTimestamp",0);U(this,"frameCount",0);U(this,"fps",0);U(this,"fpsUpdateTime",0);U(this,"userId","");U(this,"mode");U(this,"lastReceivedTick",-1);U(this,"tickRate",30);U(this,"accumulatedTime",0);if(this.mode=i.mode,i.mode==="local"?(this.options={mode:"local",application:i.application,container:i.container,debug:i.debug??!1,width:i.width??80,height:i.height??25,userId:i.userId??"local",username:i.username??"User"},this.userId=i.userId??"local"):this.options={mode:"connected",application:i.application,container:i.container,serverUrl:i.serverUrl,username:i.username??"Player",debug:i.debug??!1,width:i.width??80,height:i.height??25,autoReconnect:i.autoReconnect??!0,token:i.token},this.log(`Initializing ClientRuntime (${this.mode} mode)...`),this.core=new my({mode:"client",maxUsers:this.mode==="local"?1:100}),this.renderer=new vy(this.options.container,{cols:this.options.width,rows:this.options.height,charWidth:8,charHeight:8}),this.input=new Ey({enableKeyboardMouse:!0,enableGamepad:!0,enableMobile:!0,targetElement:window,debug:this.options.debug}),this.mode==="connected"){const l=this.options;this.network=new yp({url:l.serverUrl,autoReconnect:l.autoReconnect,auth:{username:l.username,token:l.token},debug:this.options.debug})}this.log("ClientRuntime initialized")}getMode(){return this.mode}isRunning(){return this.running}setTickRate(i){if(i<=0||i>1e3)throw new Error(`Invalid tick rate: ${i}. Must be between 1 and 1000.`);if(this.mode==="connected"){this.log(" setTickRate() has no effect in connected mode (server controls tick rate)");return}this.tickRate=i,this.log(`Tick rate set to ${i} TPS (local mode)`)}getTickRate(){return this.tickRate}async start(){if(this.running){this.log("Already running");return}this.log("Starting ClientRuntime..."),this.log("Calling application.init()..."),this.options.application.init(this.core,this),await this.loadDefaultFont(),await this.waitForRenderer(),this.log(" Renderer is ready"),this.mode==="connected"&&this.network&&(this.log(" Connecting to server (renderer and core are ready)..."),await this.connectToServer()),this.mode==="local"?await this.createLocalUser():await this.joinGame(),this.input.start(),this.running=!0,this.startTime=performance.now(),this.lastTimestamp=this.startTime,this.fpsUpdateTime=this.startTime,this.log("Starting main loop..."),this.mainLoop(this.lastTimestamp)}async stop(){if(!this.running)return;this.log("Stopping ClientRuntime..."),this.running=!1,this.input.stop(),this.mode==="connected"&&this.network&&(this.network.send("leave",{}),this.network.disconnect());const i=this.core.getUser(this.userId);i&&this.options.application.destroyUser&&this.options.application.destroyUser(this.core,i,"Runtime stopped"),this.log("ClientRuntime stopped")}getStats(){var i;return{mode:this.mode,running:this.running,userCount:this.core.getUsers().length,fps:this.fps,uptime:this.running?performance.now()-this.startTime:0,totalFrames:this.frameCount,latency:(i=this.network)==null?void 0:i.getPing()}}async destroy(){await this.stop(),this.log("Destroying ClientRuntime..."),this.options.application.destroy&&this.options.application.destroy(),this.renderer.destroy(),this.input.destroy(),this.network&&this.network.destroy(),this.log("ClientRuntime destroyed")}async connectToServer(){if(!this.network)return;const i=this.options;this.log(`Connecting to ${i.serverUrl}...`),await this.network.connect(),this.log("Connected to server"),this.setupNetworkHandlers()}setupNetworkHandlers(){this.network&&(this.network.on("update",i=>{try{let l;if(i instanceof Uint8Array)l=i;else if(i instanceof ArrayBuffer)l=new Uint8Array(i);else if(Array.isArray(i))l=new Uint8Array(i);else if(i.data&&Array.isArray(i.data))l=new Uint8Array(i.data);else if(typeof i=="object"&&i.type==="Buffer")l=new Uint8Array(i.data);else{this.log(`Unknown data type for update packet: ${typeof i} - ${JSON.stringify(i).substring(0,100)}`);return}this.core.applyUpdatePacketBuffer(this.userId,l)?this.render():this.log("Failed to apply update packet")}catch(l){this.log(`Error applying update packet: ${l}`)}}),this.network.on("update-static",i=>{this.handleUpdatePacket(i,"update-static")}),this.network.on("update-dynamic",i=>{this.handleUpdatePacket(i,"update-dynamic")}),this.network.on("load",i=>{try{let l;if(i instanceof Uint8Array)l=i;else if(i instanceof ArrayBuffer)l=new Uint8Array(i);else if(Array.isArray(i))l=new Uint8Array(i);else if(i.data&&Array.isArray(i.data))l=new Uint8Array(i.data);else if(typeof i=="object"&&i.type==="Buffer")l=new Uint8Array(i.data);else{this.log(`Unknown data type for load packet: ${typeof i} - ${JSON.stringify(i).substring(0,100)}`);return}this.core.applyLoadPacket(l)?this.log("Load packet applied successfully"):this.log("Failed to apply load packet")}catch(l){this.log(`Error applying load packet: ${l}`)}}),this.network.on("input-bindings",i=>{this.core.applyInputBindingsLoadPacket(this.userId,i)?this.log("Input bindings configured"):this.log("Failed to apply input bindings")}),this.network.on("disconnect",()=>{this.log("Disconnected from server")}))}async createLocalUser(){const i=this.options;this.log(`Creating local user: ${this.userId}`);const l=this.core.createUser(this.userId,i.username);this.log("Calling application.initUser()..."),this.options.application.initUser(this.core,l,{username:i.username}),this.log("Performing initial render..."),this.core.endTick(),this.render(),this.log(" Initial render complete")}async joinGame(){if(!this.network)return;const i=this.options;return new Promise((l,a)=>{this.network.send("join",{username:i.username,token:i.token}),this.network.on("join_response",u=>{if(u.success){this.userId=u.userId,this.log(`Joined game as ${this.userId}`);const f=this.core.createUser(this.userId,i.username);this.options.application.initUser(this.core,f,{username:i.username,token:i.token}),l()}else a(new Error(u.error||"Failed to join game"))}),setTimeout(()=>a(new Error("Join timeout")),5e3)})}mainLoop(i){if(!this.running)return;const l=(i-this.lastTimestamp)/1e3;this.lastTimestamp=i,this.frameCount++,i-this.fpsUpdateTime>=1e3&&(this.fps=Math.round(this.frameCount*1e3/(i-this.fpsUpdateTime)),this.frameCount=0,this.fpsUpdateTime=i);const a=this.core.getUser(this.userId);if(!a){requestAnimationFrame(u=>this.mainLoop(u));return}if(this.mode==="local"){this.accumulatedTime+=l;const u=1/this.tickRate;let f=0;for(;this.accumulatedTime>=u&&f<5;)this.collectAndApplyInput(a),this.options.application.update(this.core,u),this.options.application.updateUser(this.core,a,u),this.core.endTick(),this.accumulatedTime-=u,f++;f>0&&this.render()}else this.collectAndSendInput();requestAnimationFrame(u=>this.mainLoop(u))}collectAndApplyInput(i){this.updateMousePosition(i);const l=i.getInputBindingRegistry(),a=l.getAllAxes(),u=l.getAllButtons();a.forEach(f=>{let d=0;f.sources.forEach(m=>{if(m.type===lt.Keyboard&&m.negativeKey!==void 0&&m.positiveKey!==void 0){const y=this.input.getButton(lt.Keyboard,m.negativeKey);this.input.getButton(lt.Keyboard,m.positiveKey)&&(d+=1),y&&(d-=1)}if(m.type===lt.Mouse&&m.mouseAxis!==void 0){const y=this.input.getAxis(lt.Mouse,m.mouseAxis),g=m.sensitivity??1,b=m.scale??1,v=m.invert??!1;let C=y*g*b;v&&(C=-C),d+=C}if(m.type===lt.Touch&&m.touchId!==void 0&&m.touchAxis!==void 0){const y=100+m.touchId*2,g=m.touchAxis==="x"?y:y+1,b=this.input.getAxis(lt.Touch,g),v=m.sensitivity??1,C=m.scale??1,A=m.invert??!1;let z=b*v*C;A&&(z=-z),d+=z}}),i.setAxis(f.name,d)}),u.forEach(f=>{let d=!1;f.sources.forEach(m=>{m.type===lt.Keyboard&&m.key!==void 0&&this.input.getButton(lt.Keyboard,m.key)&&(d=!0),m.type===lt.Mouse&&m.mouseButton!==void 0&&this.input.getButton(lt.Mouse,m.mouseButton)&&(d=!0),m.type===lt.Touch&&m.touchButton!==void 0&&this.input.getButton(lt.Touch,m.touchButton)&&(d=!0)}),i.setButton(f.name,d)})}updateMousePosition(i){const l=this.input.getMousePosition();if(!l)return;const u=this.renderer.getCanvas().getBoundingClientRect(),f=l.x-u.left,d=l.y-u.top,m=u.width/this.options.width,y=u.height/this.options.height,g=Math.floor(f/m),b=Math.floor(d/y),v=f>=0&&f<u.width&&d>=0&&d<u.height,C=Math.max(0,Math.min(this.options.width-1,g)),A=Math.max(0,Math.min(this.options.height-1,b));i.setMousePosition(C,A,v)}collectAndSendInput(){if(!this.network)return;const i=this.core.getUser(this.userId);if(!i)return;this.updateMousePosition(i);const l=i.getInputBindingRegistry(),a=l.getAllAxes(),u=l.getAllButtons(),f={};a.forEach(g=>{let b=0;g.sources.forEach(v=>{if(v.type===lt.Keyboard&&v.negativeKey!==void 0&&v.positiveKey!==void 0){const C=this.input.getButton(lt.Keyboard,v.negativeKey);this.input.getButton(lt.Keyboard,v.positiveKey)&&(b+=1),C&&(b-=1)}if(v.type===lt.Mouse&&v.mouseAxis!==void 0){const C=this.input.getAxis(lt.Mouse,v.mouseAxis),A=v.sensitivity??1,z=v.scale??1,B=v.invert??!1;let X=C*A*z;B&&(X=-X),b+=X}}),f[g.name]=b,i.setAxis(g.name,b)});const d={};u.forEach(g=>{let b=!1;g.sources.forEach(v=>{v.type===lt.Keyboard&&v.key!==void 0&&this.input.getButton(lt.Keyboard,v.key)&&(b=!0),v.type===lt.Mouse&&v.mouseButton!==void 0&&this.input.getButton(lt.Mouse,v.mouseButton)&&(b=!0)}),d[g.name]=b,i.setButton(g.name,b)});const m=i.getMouseDisplayInfo(),y=m?{x:m.localX,y:m.localY}:null;this.network.send("input",{timestamp:Date.now(),axes:f,buttons:d,mousePosition:y})}render(){if(!this.renderer.isReady()){console.warn("[CLIENT RENDER]  Renderer not ready");return}const i=this.core.getRenderState(this.userId);if(!i||i.displays.length===0){console.warn("[CLIENT RENDER]  No render state or no displays");return}const l=i.displays[0];for(let a=0;a<l.height;a++)for(let u=0;u<l.width;u++){const f=l.cells[a*l.width+u];f.char===" "&&this.isTransparentColor(f.bgColor)||this.renderer.setCell(u,a,f.char,f.fgColor,f.bgColor,f.fgEmission||0,f.bgEmission||0)}this.renderer.render()}handleUpdatePacket(i,l){try{let a;if(i instanceof Uint8Array)a=i;else if(i instanceof ArrayBuffer)a=new Uint8Array(i);else if(Array.isArray(i))a=new Uint8Array(i);else if(i.data&&Array.isArray(i.data))a=new Uint8Array(i.data);else if(typeof i=="object"&&i.type==="Buffer")a=new Uint8Array(i.data);else{this.log(`Unknown data type for ${l} update packet: ${typeof i} - ${JSON.stringify(i).substring(0,100)}`);return}const u=new DataView(a.buffer,a.byteOffset,a.byteLength),f=Number(u.getBigUint64(0,!1));if(l==="update-dynamic"&&f<this.lastReceivedTick)return;if(f>this.lastReceivedTick&&(this.lastReceivedTick=f),this.core.applyUpdatePacketBuffer(this.userId,a)){if(console.log(`[CLIENT] ${l}: ${a.length}B (tick ${f}) - APPLIED `),this.options.debug){const m=this.core.getUser(this.userId);if(m){const y=m.getLayers();console.log(`[CLIENT] User has ${y.length} layers`),y.forEach((g,b)=>{const v=g.getOrders(),C=g.getStatic();(v.length>0||C)&&console.log(`  Layer ${b}: ${v.length} orders, static=${C}, z=${g.getZOrder()}`)})}console.log(`[CLIENT] Renderer ready: ${this.renderer.isReady()}`)}this.render(),this.options.debug&&console.log(`[CLIENT] render() completed for ${l}`)}else console.log(`[CLIENT]  Failed to apply ${l} packet (tick ${f})`)}catch(a){this.log(`Error applying ${l} update packet: ${a}`),console.error(a)}}async loadDefaultFont(){this.log("Loading ASCII 8x8 font...");const i=py(1),l=this.core.getBitmapFontRegistry();l.loadFont(i.fontId,{charWidth:8,charHeight:8,glyphs:new Map(i.characters.map(u=>[u.charCode,u.bitmap]))});const a=l.getFont(1);if(a){const u=new Map;for(let f=0;f<256;f++){const d=a.getGlyph(f);d&&u.set(f,d)}this.renderer.setBitmapFont(u,a.getCharWidth(),a.getCharHeight()),this.log("Font loaded")}}async waitForRenderer(){this.log("Waiting for renderer to be ready...");let i=0;const l=100;return new Promise((a,u)=>{const f=()=>{if(i++,this.renderer.isReady())this.log(` Renderer ready after ${i*50}ms`),a();else if(i>=l){const d=` Renderer failed to be ready after ${l*50}ms`;this.log(d),u(new Error(d))}else setTimeout(f,50)};f()})}isTransparentColor(i){if(!i)return!0;const l=i.toLowerCase().replace(/\s/g,"");return l==="rgba(0,0,0,0)"||l==="rgba(0,0,0,0.0)"||l==="transparent"}log(i){this.options.debug&&console.log(`[ClientRuntime/${this.mode}] ${i}`)}}class vp{constructor(){U(this,"layers",new Map);U(this,"rainDrops",[]);U(this,"splashParticles",[]);U(this,"cars",[]);U(this,"userDisplayPositions",new Map);U(this,"previousMousePositions",new Map);U(this,"previousTouchPositions",new Map);U(this,"dragStartWorldX",new Map);U(this,"dragStartMouseX",new Map);U(this,"dragStartTouchX",new Map)}generateMountainSprites(){const i=[];return[{spriteId:201,sizeX:63,sizeY:30,colorId:35},{spriteId:202,sizeX:75,sizeY:36,colorId:36},{spriteId:203,sizeX:57,sizeY:24,colorId:37}].forEach(a=>{const u=[];let f=0;for(let d=0;d<a.sizeY;d++){const m=Math.floor(a.sizeX*(d+1)/a.sizeY);let y=f+Math.floor((Math.random()-.5)*2);y=Math.max(-Math.floor(a.sizeX/8),Math.min(Math.floor(a.sizeX/8),y)),f=y;const g=Math.floor((a.sizeX-m)/2)+y,b=g+m;for(let v=0;v<a.sizeX;v++)v>=g&&v<b?u.push({charCode:35,fgColorId:a.colorId,bgColorId:a.colorId}):u.push({charCode:0,fgColorId:255,bgColorId:255})}i.push({spriteId:a.spriteId,sizeX:a.sizeX,sizeY:a.sizeY,data:u})}),i}generateCarSprites(){const i=[];return[{spriteId:50,bodyColorId:2,direction:"right"},{spriteId:51,bodyColorId:30,direction:"right"},{spriteId:52,bodyColorId:32,direction:"right"},{spriteId:53,bodyColorId:2,direction:"left"},{spriteId:54,bodyColorId:30,direction:"left"},{spriteId:55,bodyColorId:32,direction:"left"}].forEach(a=>{const d=[];for(let m=0;m<3;m++)for(let y=0;y<6;y++){let g;m===0&&(y===0||y===5)?d.push({charCode:32,fgColorId:255,bgColorId:255}):(a.direction==="right"?y===5&&m===1?g=34:y===0&&m===1?g=38:g=a.bodyColorId:y===0&&m===1?g=34:y===5&&m===1?g=38:g=a.bodyColorId,d.push({charCode:35,fgColorId:g,bgColorId:g}))}i.push({spriteId:a.spriteId,sizeX:6,sizeY:3,data:d})}),i}init(i,l){console.log(" Parallax City - Dgrads");const a=[{colorId:0,r:0,g:0,b:0,a:255},{colorId:1,r:8,g:15,b:50,a:255},{colorId:2,r:12,g:25,b:65,a:255},{colorId:3,r:18,g:35,b:80,a:255},{colorId:4,r:25,g:45,b:95,a:255},{colorId:5,r:28,g:45,b:80,a:255},{colorId:6,r:35,g:55,b:100,a:255},{colorId:7,r:40,g:65,b:120,a:255},{colorId:8,r:48,g:80,b:135,a:255},{colorId:11,r:10,g:25,b:10,a:255},{colorId:12,r:20,g:55,b:20,a:255},{colorId:13,r:25,g:70,b:25,a:255},{colorId:14,r:35,g:85,b:30,a:255},{colorId:15,r:45,g:100,b:35,a:255},{colorId:16,r:55,g:115,b:40,a:255},{colorId:17,r:65,g:130,b:45,a:255},{colorId:18,r:75,g:140,b:50,a:255},{colorId:20,r:60,g:120,b:150,a:255},{colorId:21,r:25,g:25,b:30,a:255},{colorId:22,r:30,g:30,b:35,a:255},{colorId:23,r:35,g:35,b:40,a:255},{colorId:24,r:60,g:50,b:20,a:255},{colorId:33,r:120,g:100,b:40,a:255,e:40},{colorId:28,r:15,g:15,b:20,a:255},{colorId:25,r:20,g:20,b:25,a:255},{colorId:26,r:40,g:40,b:45,a:255},{colorId:27,r:90,g:90,b:90,a:255},{colorId:30,r:80,g:80,b:80,a:255},{colorId:31,r:255,g:220,b:150,a:255,e:255},{colorId:32,r:120,g:20,b:30,a:255},{colorId:34,r:200,g:180,b:60,a:255,e:100},{colorId:38,r:180,g:20,b:20,a:255,e:80},{colorId:35,r:30,g:35,b:50,a:255},{colorId:36,r:40,g:45,b:60,a:255},{colorId:37,r:50,g:55,b:70,a:255},{colorId:40,r:100,g:80,b:20,a:255,e:60},{colorId:41,r:80,g:70,b:15,a:255,e:40}];i.loadPalette(a);const u=this.generateBuildingSprites(),f=this.generateStreetlightSprite(),d=this.generateMountainSprites(),m=this.generateCarSprites();i.loadMulticolorSprites({loadType:3,sprites:[...u,f,...d,...m]}),l.setTickRate(30),console.log(` ${u.length} building sprites + 1 streetlight sprite + ${d.length} mountain sprites + ${m.length} car sprites loaded`)}generateBuildingSprites(){const i=[];return[{w:8,h:20,bodyColor:22,windowColor:24,windowPattern:"sparse"},{w:10,h:24,bodyColor:21,windowColor:24,windowPattern:"dense"},{w:9,h:22,bodyColor:23,windowColor:24,windowPattern:"vertical"},{w:7,h:18,bodyColor:22,windowColor:24,windowPattern:"horizontal"},{w:12,h:16,bodyColor:21,windowColor:24,windowPattern:"grid"},{w:14,h:18,bodyColor:22,windowColor:24,windowPattern:"sparse"},{w:11,h:15,bodyColor:23,windowColor:24,windowPattern:"dense"},{w:13,h:17,bodyColor:21,windowColor:24,windowPattern:"vertical"},{w:15,h:12,bodyColor:22,windowColor:24,windowPattern:"horizontal"},{w:16,h:14,bodyColor:23,windowColor:24,windowPattern:"grid"},{w:14,h:13,bodyColor:21,windowColor:24,windowPattern:"sparse"},{w:10,h:28,bodyColor:21,windowColor:24,windowPattern:"dense"},{w:12,h:26,bodyColor:22,windowColor:24,windowPattern:"grid"},{w:9,h:25,bodyColor:23,windowColor:24,windowPattern:"vertical"},{w:11,h:20,bodyColor:22,windowColor:24,windowPattern:"sparse"},{w:8,h:16,bodyColor:21,windowColor:24,windowPattern:"horizontal"},{w:13,h:19,bodyColor:23,windowColor:24,windowPattern:"dense"},{w:10,h:21,bodyColor:22,windowColor:24,windowPattern:"grid"},{w:14,h:23,bodyColor:21,windowColor:24,windowPattern:"vertical"},{w:12,h:17,bodyColor:23,windowColor:24,windowPattern:"sparse"}].forEach((a,u)=>{const f=u+1,d=[];let m=a.w;m%2===0&&m++;const y=m;for(let g=0;g<a.h;g++)for(let b=0;b<y;b++){let v;b===0||b===1?v=28:this.shouldHaveWindow(b-2,g,y,a.h,a.windowPattern)?v=Math.random()<.5?a.windowColor:33:v=a.bodyColor,d.push({charCode:35,fgColorId:v,bgColorId:v})}i.push({spriteId:f,sizeX:y,sizeY:a.h,data:d})}),i}shouldHaveWindow(i,l,a,u,f){return i===0||i===a-1||l===0||l===u-1||l<2||l>=u-2?!1:i%2===1&&l%2===0}generateStreetlightSprite(){const m=[];for(let y=0;y<13;y++)for(let g=0;g<4;g++){let b=0,v=30,C=255;y===2&&g===3&&(b=31,v=0,C=31),y===1&&(g===1||g===2||g===3)&&(b=45,v=30,C=255),g===1&&y>=2&&y<13&&(b=124,v=30,C=255),m.push({charCode:b,fgColorId:v,bgColorId:C})}return{spriteId:100,sizeX:4,sizeY:13,data:m}}initUser(i,l){console.log(` Player ${l.name} - Rain Only`);const a=l.getInputBindingRegistry();a.defineAxis(0,"Horizontal",[{sourceId:0,type:lt.Keyboard,negativeKey:ga.ArrowLeft,positiveKey:ga.ArrowRight}],-1,1,0),a.defineButton(0,"MouseDrag",[{sourceId:0,type:lt.Mouse,mouseButton:Ge.LeftButton}]),a.defineButton(1,"TouchDrag",[{sourceId:0,type:lt.Touch,touchButton:0}]),console.log(" Input bindings configured for parallax city (keyboard + mouse drag + touch drag)"),console.log(" Bindings:",{keyboardAxis:"Horizontal (ArrowLeft/ArrowRight)",mouseButton:"MouseDrag (LeftButton)",touchButton:"TouchDrag (First finger)",mousePosition:"via user.getMouseDisplayInfo() (automatic)",touchPosition:"via user.getTouchDisplayInfo(0) (automatic)"});const u=new Map,f=new K(0,10),d=new ne(f,1,!0);u.set("sky",d),l.addLayer(d);const m=new ne(f,2,!0);u.set("moon",m),l.addLayer(m);const y=new ne(f,3,!0);u.set("mountains",y),l.addLayer(y);const g=new ne(f,4,!0);u.set("grass",g),l.addLayer(g);const b=new ne(f,5,!0);u.set("buildings-far",b),l.addLayer(b);const v=new ne(f,6,!0);u.set("buildings-mid",v),l.addLayer(v);const C=new ne(f,7,!0);u.set("buildings-close",C),l.addLayer(C);const A=new ne(f,8,!0);u.set("ground",A),l.addLayer(A);const z=new ne(f,9,!0);u.set("streetlights",z),l.addLayer(z);const B=new ne(f,10,!1);u.set("cars",B),l.addLayer(B);const X=new ne(f,11,!1);u.set("rain",X),l.addLayer(X);const k=new ne(f,12,!1);u.set("splash",k),l.addLayer(k),this.layers.set(l.id,u);const j=new Ud(0,80,40);j.setOrigin(new K(0,10)),j.setSize(new K(80,40)),l.addDisplay(j),this.userDisplayPositions.set(l.id,new K(0,10)),this.renderSky(l.id),this.renderMoon(l.id),this.renderMountains(l.id),this.renderGrass(l.id),this.renderGround(l.id),this.renderBuildings(l.id),this.renderRoad(l.id),this.renderStreetlights(l.id)}update(i,l){if(Math.random()<.02){const d=Math.random()<.5?1:-1,m=Math.random()<.5?1:2;let y=38;d===1?y+=1:y-=1;const g=d===1?0:255,b=[2,30,32],v=b[Math.floor(Math.random()*b.length)];let C;d===1?C=v===2?50:v===30?51:52:C=v===2?53:v===30?54:55,this.cars.push({x:g,y,speed:m,direction:d,colorId:v,spriteId:C})}this.cars=this.cars.map(d=>({...d,x:d.x+d.speed*d.direction})).filter(d=>d.x>=-10&&d.x<=265);const a=20+Math.floor(Math.random()*11),u=[1,2];for(let d=0;d<a;d++){const m=u[Math.floor(Math.random()*u.length)];this.rainDrops.push({x:Math.floor(Math.random()*255),y:-10,speed:m})}const f=[];for(const d of this.rainDrops){const m=d.y+d.speed;if(m>=38){if(this.splashParticles.length<100){const g=2+Math.floor(Math.random()*2);for(let b=0;b<g;b++)this.splashParticles.push({x:d.x,y:38,vx:(Math.random()-.5)*1.5,vy:-.5-Math.random()*.3,life:15,roadLevel:38})}}else f.push({...d,y:m})}this.rainDrops=f,this.splashParticles=this.splashParticles.map(d=>{let m=d.y+d.vy,y=d.vy+.1;return m>d.roadLevel&&(m=d.roadLevel,y=0),{x:d.x+d.vx,y:m,vx:d.vx*.95,vy:y,life:d.life-1,roadLevel:d.roadLevel}}).filter(d=>d.life>0&&d.x>=0&&d.x<255),this.rainDrops.length>1500&&(this.rainDrops=this.rainDrops.slice(-1500)),this.splashParticles.length>100&&(this.splashParticles=this.splashParticles.slice(-100))}updateUser(i,l,a){const u=l.getAxis("Horizontal"),f=l.getButton("MouseDrag"),d=l.getButton("TouchDrag"),m=this.previousMousePositions.has(l.id),y=this.previousTouchPositions.has(l.id),g=l.getMouseDisplayInfo(),b=g?g.localX:0,v=b,C=this.userDisplayPositions.get(l.id)||new K(0,10);if(f&&!m&&!d){const B=C.x+b;this.dragStartWorldX.set(l.id,B),this.dragStartMouseX.set(l.id,b),console.log(" Mouse Drag START - worldX:",B,"mouseX:",b,"displayX:",C.x)}else!f&&m&&!d&&(this.dragStartWorldX.delete(l.id),this.dragStartMouseX.delete(l.id),console.log(" Mouse Drag END"));if(d&&!y){const B=C.x+v;this.dragStartWorldX.set(l.id,B),this.dragStartTouchX.set(l.id,v),console.log(" Touch Drag START - worldX:",B,"touchX:",v,"displayX:",C.x)}else!d&&y&&(this.dragStartWorldX.delete(l.id),this.dragStartTouchX.delete(l.id),console.log(" Touch Drag END"));f?this.previousMousePositions.set(l.id,b):this.previousMousePositions.delete(l.id),d?this.previousTouchPositions.set(l.id,v):this.previousTouchPositions.delete(l.id);let A=0;if(u!==0&&(A+=u*2,console.log(" Keyboard move:",u,"totalMoveX:",A)),f&&this.dragStartWorldX.has(l.id)&&!d){const B=this.dragStartWorldX.get(l.id),X=B-b,k=X-C.x;A+=k,console.log(" Mouse Sticky drag - targetWorldX:",B,"mouseX:",b,"targetDisplayX:",X,"deltaX:",k)}if(d&&this.dragStartWorldX.has(l.id)){const B=this.dragStartWorldX.get(l.id),X=B-v,k=X-C.x;A+=k,console.log(" Touch Sticky drag - targetWorldX:",B,"touchX:",v,"targetDisplayX:",X,"deltaX:",k)}let z=!1;if(A!==0){let B=C.x+A;const j=255-80;if(B=Math.max(0,Math.min(j,B)),B!==C.x){z=!0;const F=new K(B,10);this.userDisplayPositions.set(l.id,F);const P=l.getDisplays();P[0]&&P[0].setOrigin(F)}}if(z){const B=this.userDisplayPositions.get(l.id)||new K(0,10),X=this.layers.get(l.id),k=X==null?void 0:X.get("mountains");if(k){const P=Math.floor(B.x*.5);k.setOrigin(new K(P,10)),k.commit()}const j=X==null?void 0:X.get("moon");j&&(j.setOrigin(new K(B.x,10)),j.commit())}this.renderCars(l.id),this.renderRain(l.id),this.renderSplash(l.id)}destroyUser(i,l){this.layers.delete(l.id),this.userDisplayPositions.delete(l.id),this.previousMousePositions.delete(l.id),this.previousTouchPositions.delete(l.id),this.dragStartWorldX.delete(l.id),this.dragStartMouseX.delete(l.id),this.dragStartTouchX.delete(l.id)}renderRain(i){const l=this.layers.get(i),a=l==null?void 0:l.get("rain");if(!a)return;const f=(this.userDisplayPositions.get(i)||new K(0,10)).x,d=80,m=Kt.clear(32,255,255),y=this.rainDrops.filter(g=>g.x>=f&&g.x<f+d&&g.y>=0&&g.y<40&&Number.isFinite(g.x)&&Number.isFinite(g.y)).map(g=>({posX:Math.floor(g.x),posY:Math.floor(g.y)}));if(y.length>0){const g=Kt.dotCloud(y,58,20,255);a.setOrders([m,g])}else a.setOrders([m]);a.commit()}renderSplash(i){const l=this.layers.get(i),a=l==null?void 0:l.get("splash");if(!a)return;const f=(this.userDisplayPositions.get(i)||new K(0,10)).x,d=80,m=Kt.clear(32,255,255),y=this.splashParticles.filter(g=>g.x>=f&&g.x<f+d&&g.y>=0&&g.y<40&&Number.isFinite(g.x)&&Number.isFinite(g.y)).map(g=>({posX:Math.floor(g.x),posY:Math.floor(g.y)}));if(y.length>0){const g=Kt.dotCloud(y,46,20,255);a.setOrders([m,g])}else a.setOrders([m]);a.commit()}renderCars(i){const l=this.layers.get(i),a=l==null?void 0:l.get("cars");if(!a)return;const f=(this.userDisplayPositions.get(i)||new K(0,10)).x,d=80,m=Kt.clear(32,255,255),y=6,g=6,b=this.cars.filter(C=>C.x+y>=f-g&&C.x<f+d).sort((C,A)=>C.direction-A.direction).map(C=>({posX:Math.floor(C.x),posY:Math.floor(C.y-3),spriteIndex:C.spriteId,flipX:0})),v=[];b.length>0?v.push(Kt.spriteCloudVariedMultiColor(b)):v.push(m),a.setOrders(v),a.commit()}renderSky(i){const l=this.layers.get(i),a=l==null?void 0:l.get("sky");if(!a)return;const u=8,f=[];for(let d=0;d<u;d++){const m=Math.floor(d*40/u),g=Math.floor((d+1)*40/u)-m,b=1+d;f.push(Kt.rectangle(0,m,255,g,{charCode:32,bgColor:b,fgColor:b,filled:!0}))}a.setOrders(f),a.commit()}renderMoon(i){const l=this.layers.get(i),a=l==null?void 0:l.get("moon");if(!a)return;const u=10,f=2,d=6,m=40,y=41,g=[];g.push(Kt.rectangle(u,f,d,d,{charCode:32,bgColor:m,fgColor:0,filled:!0})),[{x:u+1,y:f+2,w:2,h:1},{x:u+3,y:f+4,w:1,h:1},{x:u+4,y:f+1,w:1,h:2},{x:u+2,y:f+5,w:2,h:1}].forEach(v=>{g.push(Kt.rectangle(v.x,v.y,v.w,v.h,{charCode:32,bgColor:y,fgColor:0,filled:!0}))}),a.setOrders(g),a.commit()}renderGrass(i){const l=this.layers.get(i),a=l==null?void 0:l.get("grass");if(!a)return;const u=32,f=4,d=11,m=[];m.push(Kt.rectangle(0,u,255,f,{charCode:32,bgColor:d,fgColor:d,filled:!0})),a.setOrders(m),a.commit()}renderGround(i){const l=this.layers.get(i),a=l==null?void 0:l.get("ground");if(!a)return;const u=20,f=20,d=8,m=[];for(let y=0;y<d;y++){const g=u+Math.floor(y*f/d),v=u+Math.floor((y+1)*f/d)-g,C=11+y;m.push(Kt.rectangle(0,g,255,v,{charCode:32,bgColor:C,fgColor:C,filled:!0}))}a.setOrders(m),a.commit()}renderBuildings(i){const l=this.layers.get(i),a=l==null?void 0:l.get("buildings-close");if(!a)return;const u=[20,24,22,18,16,18,15,17,12,14,13,28,26,25,20,16,19,21,23,17],f=36,m=[{x:0,spriteId:15},{x:12,spriteId:2},{x:25,spriteId:9},{x:42,spriteId:12},{x:56,spriteId:5},{x:72,spriteId:18},{x:86,spriteId:11},{x:102,spriteId:13},{x:117,spriteId:7},{x:132,spriteId:1},{x:145,spriteId:14},{x:160,spriteId:6},{x:176,spriteId:19},{x:192,spriteId:4},{x:205,spriteId:10},{x:222,spriteId:16},{x:235,spriteId:8},{x:250,spriteId:3}].map(g=>{const b=u[g.spriteId-1],v=f-b;return{posX:g.x,posY:v,spriteIndex:g.spriteId}}),y=Kt.spriteCloudVariedMultiColor(m);a.setOrders([y]),a.commit()}renderRoad(i){const l=this.layers.get(i),a=l==null?void 0:l.get("ground");if(!a)return;const u=[];u.push(Kt.rectangle(0,36,255,4,{charCode:61,bgColor:25,fgColor:25,filled:!0}));const f=37,d=3,m=3;for(let y=0;y<255;y+=d+m)for(let g=0;g<d&&y+g<255;g++)u.push(Kt.char(y+g,f,32,255,27));a.setOrders(u),a.commit()}renderStreetlights(i){const l=this.layers.get(i),a=l==null?void 0:l.get("streetlights");if(!a)return;const u=[],f=100,d=36,m=13,g=[5,25,45,65,85,105,125,145,165,185,205,225,245].map(b=>({spriteIndex:f,posX:b,posY:d-m}));u.push(Kt.spriteCloudVariedMultiColor(g)),a.setOrders(u),a.commit()}renderMountains(i){const l=this.layers.get(i),a=l==null?void 0:l.get("mountains");if(!a)return;const u=[],f=[201,202,203],d=36,m=255,y=10,g=10;let b=[];function v(A){for(let X=0;X<20;X++){const k=Math.floor(Math.random()*(m-A));if(!b.some(j=>k<j.end&&k+A>j.start))return b.push({start:k,end:k+A+g}),k}const z=b[b.length-1],B=z?z.end:0;return b.push({start:B,end:B+A+g}),B}const C=[];for(let A=0;A<y;A++){const z=f[Math.floor(Math.random()*f.length)];let B=63,X=30;z===202&&(B=75,X=36),z===203&&(B=57,X=24);const k=v(B),j=d-X;C.push({spriteIndex:z,posX:k,posY:j})}u.push(Kt.spriteCloudVariedMultiColor(C)),a.setOrders(u),a.commit()}}function bp(){const c=ra.useRef(null),i=ra.useRef(null),[l,a]=ra.useState(!1);return ra.useEffect(()=>{if(!c.current||i.current)return;console.log("Initializing ClientRuntime in connected mode...");const u=new vp,f=new pp({application:u,container:c.current,mode:"local",username:"Player"+Math.floor(Math.random()*1e3),width:80,height:40,debug:!0});return i.current=f,f.start().then(()=>{console.log("Connected to server!"),a(!0)}).catch(d=>{console.error("Failed to connect:",d)}),()=>{console.log("Cleanup - stopping runtime"),i.current&&(i.current.stop(),i.current=null)}},[]),ln.jsxs("div",{className:"App",style:{display:"flex",flexDirection:"column",height:"100vh",margin:0,padding:0,overflow:"hidden"},children:[ln.jsxs("div",{style:{padding:"10px",backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",textAlign:"center"},children:[ln.jsx("h1",{style:{margin:"5px 0"},children:" UTSP Client Test"}),ln.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#888"},children:["Connected to server:"," ",ln.jsx("span",{style:{color:l?"#0f0":"#f00"},children:l?"YES":"NO"})]})]}),ln.jsx("div",{ref:c,style:{flex:1,backgroundColor:"#000",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"}})]})}Em.createRoot(document.getElementById("root")).render(ln.jsx(bp,{}));
